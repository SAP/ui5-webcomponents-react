import{j as o}from"./jsx-runtime-CLpGMVip.js";import{i as Y}from"./utils-C-WE68U-.js";import{r as W}from"./index-D23YZj_x.js";import{B as K}from"./index-DaCk7tY-.js";import{s as h,m as D,I as F,w,c as g,j as l,F as P,p as z,d as X,e as Z,k as ee}from"./withWebComponent-DfVDXLfc.js";import{d as E}from"./slot-_4yKMUwC.js";import{l as x}from"./event-strict-DgQLNDEV.js";import{i as te}from"./i18n-DEVDpFvK.js";import{f as U}from"./Icon-DVzRT9Bg.js";import{q as G}from"./i18n-defaults-CUGG7UPM.js";import{i as ie}from"./filter-_Icn7_85.js";import{n as se}from"./nav-back-BEROw3lr.js";import{av as q,aw as re,ax as ne,ay as oe,az as le,aA as ae,aB as de,aC as ce,aD as he}from"./i18n-defaults-BeKUSBuv.js";import{D as ue}from"./Dialog-BNz6iBJ1.js";import{a as I}from"./Button-Bn6Q5CAy.js";import{a as fe}from"./Title-D0oe8JHs.js";import{a as ge,S as $}from"./SegmentedButton-Crc8zQC3.js";import{e as j,c as B}from"./List-DgtIRlaK.js";import{L as T}from"./ListItemStandard-C37PlgD0.js";import{d as pe}from"./parameters-bundle.css-lWn4zk3B.js";var C=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var d=n.length-1;d>=0;d--)(a=n[d])&&(r=(s<3?a(r):s>3?a(e,t,r):a(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let m=class extends F{};C([h()],m.prototype,"text",void 0);C([h()],m.prototype,"additionalText",void 0);C([E()],m.prototype,"values",void 0);m=C([D("ui5-filter-item")],m);m.define();const R=w("ui5-filter-item",["additionalText","text"],[],["values"],[]);R.displayName="FilterItem";var L=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var d=n.length-1;d>=0;d--)(a=n[d])&&(r=(s<3?a(r):s>3?a(e,t,r):a(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let y=class extends F{constructor(){super(...arguments),this.selected=!1}};L([h()],y.prototype,"text",void 0);L([h({type:Boolean})],y.prototype,"selected",void 0);y=L([D("ui5-filter-item-option")],y);y.define();const p=w("ui5-filter-item-option",["text"],["selected"],[],[]);p.displayName="FilterItemOption";var M=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var d=n.length-1;d>=0;d--)(a=n[d])&&(r=(s<3?a(r):s>3?a(e,t,r):a(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let b=class extends F{constructor(){super(...arguments),this.selected=!1}};M([h()],b.prototype,"text",void 0);M([h({type:Boolean})],b.prototype,"selected",void 0);b=M([D("ui5-sort-item")],b);b.define();const v=w("ui5-sort-item",["text"],["selected"],[],[]);v.displayName="SortItem";var N;(function(n){n.Sort="Sort",n.Filter="Filter"})(N||(N={}));const _=N,_e="sort",me="M253.515 110.353q5.965 5.965 5.965 11.93 0 4.971-5.965 10.936-4.971 4.971-11.433 4.971t-11.433-4.97l-86.494-86.494v319.13q0 15.907-15.906 15.907t-15.907-15.907V48.715l-84.505 84.504q-4.971 4.971-10.936 4.971t-10.936-4.97Q0 127.253 0 122.282q0-5.965 5.965-11.93L107.371 9.942Q116.318 0 129.243 0t22.866 9.942zm151.114 387.729q-9.942 9.941-22.866 9.941t-21.872-9.941L258.485 397.67q-5.965-5.965-5.965-11.93t5.965-10.936q4.971-4.971 10.936-4.971t10.936 4.97l84.505 84.506V142.167q0-15.907 15.907-15.907t15.907 15.907v319.13l86.493-86.493q5.965-5.965 10.936-5.965 5.965 0 11.93 5.965Q512 379.774 512 385.74t-5.965 11.93z",Se=!1,xe=G,ve="SAP-icons-v4",Oe="@ui5/webcomponents-icons";U(_e,{pathData:me,ltr:Se,accData:xe,collection:ve,packageName:Oe});const ye="sort",be="M504 124q8 8 8 18 0 11-7.5 18.5T486 168t-18-7l-42-42v335q0 11-7.5 18.5T400 480t-18-7.5-7-18.5V118l-43 43q-7 7-18 7t-18.5-7.5T288 142q0-10 8-18l86-85q7-7 18-7t18 7zM180 351q7-7 18-7t18.5 7.5T224 370q0 10-8 18l-86 85q-7 7-18 7t-18-7L8 388q-8-8-8-18 0-11 7.5-18.5T26 344t18 7l43 43V58q0-11 7.5-18.5T113 32t18 7.5 7 18.5v335z",Be=!1,Te=G,Ie="SAP-icons-v5",De="@ui5/webcomponents-icons";U(ye,{pathData:be,ltr:Be,accData:Te,collection:Ie,packageName:De});const Fe="sort";function we(){return g("div",{slot:"header",class:"ui5-vsd-header",children:[g("div",{class:"ui5-vsd-header-container",children:[g("div",{class:"ui5-vsd-header-start",children:[this.showBackButton&&l(I,{design:"Transparent",icon:se,class:"ui5-vsd-back-button",onClick:this._navigateToFilters}),l(fe,{wrappingType:"None",level:"H1",class:"ui5-vsd-title",id:`${this._id}-label`,children:this._title})]}),l("div",{class:"ui5-vsd-header-end",children:l(I,{design:"Transparent",onClick:this._resetSettings,disabled:this._disableResetButton,children:this._resetButtonLabel})})]}),!this.showBackButton&&this.hasPagination&&l("div",{class:"ui5-vsd-sub-header-container",children:l("div",{class:"ui5-vsd-sub-header",children:g(ge,{onSelectionChange:this._handleModeChange,children:[l($,{selected:this.isModeSort,icon:Fe,"data-mode":"Sort"}),l($,{selected:this.isModeFilter,icon:ie,"data-mode":"Filter"})]})})})]})}function Ce(){return g("div",{class:{"ui5-vsd-content":!0,"ui5-vsd-content-expand":this.expandContent},children:[this.shouldBuildSort&&this.isModeSort&&g("div",{class:"ui5-vsd-sort",children:[l(B,{selectionMode:"SingleStart",onItemClick:this._onSortOrderChange,"sort-order":"",accessibleNameRef:`${this._id}-label`,children:l(j,{headerText:this._sortOrderLabel,children:this._currentSettings.sortOrder.map(n=>l(T,{selected:n.selected,children:n.text}))})}),l(B,{selectionMode:"SingleStart",onItemClick:this._onSortByChange,"sort-by":"",children:l(j,{headerText:this._sortByLabel,children:this._currentSettings.sortBy.map((n,e)=>l(T,{"data-ui5-external-action-item-index":e,selected:n.selected,children:n.text}))})})]}),this.shouldBuildFilter&&this.isModeFilter&&l(P,{children:this._filterStepTwo?l(B,{selectionMode:"Multiple",onItemClick:this._handleFilterValueItemClick,accessibleNameRef:`${this._id}-label`,children:this._currentSettings.filters.filter(n=>n.selected).map(n=>l(P,{children:n.filterOptions.map(e=>l(T,{selected:e.selected,children:e.text}))}))}):l(B,{onItemClick:this._changeCurrentFilter,accessibleNameRef:`${this._id}-label`,children:l(j,{headerText:this._filterByLabel,children:this.filterItems.map(n=>l(T,{class:"ui5-vsd-filterItemList",additionalText:n.additionalText,children:n.text}))})})})]})}function je(){return g("div",{slot:"footer",class:"ui5-vsd-footer",children:[l(I,{design:"Emphasized",onClick:this._confirmSettings,children:this._okButtonLabel}),l(I,{design:"Transparent",onClick:this._cancelSettings,children:this._cancelButtonLabel})]})}function Re(){return g(ue,{preventInitialFocus:!0,"aria-label":this._dialogTitle,onBeforeClose:this._restoreConfirmedOnEscape,stretch:this._isPhone,open:this.open,onBeforeOpen:this.beforeDialogOpen,onOpen:this.afterDialogOpen,onClose:this.afterDialogClose,children:[we.call(this),Ce.call(this),je.call(this)]})}z("@ui5/webcomponents-theming","sap_horizon",async()=>X);z("@ui5/webcomponents-fiori","sap_horizon",async()=>pe);const Ne=`[on-desktop] .ui5-vsd-content{height:var(--_ui5-v2-6-2_vsd_content_height);min-width:350px}[on-desktop] .ui5-vsd-content.ui5-vsd-content-expand{height:var(--_ui5-v2-6-2_vsd_expand_content_height);min-width:350px}.ui5-vsd-header{width:100%;padding-bottom:.25rem}.ui5-vsd-content{margin:0 .1px 0 -1rem}.ui5-vsd-title{font-size:var(--sapFontHeader5Size)}.ui5-vsd-header-container{display:flex;align-items:center;justify-content:space-between;height:var(--_ui5-v2-6-2_vsd_header_container);line-height:var(--_ui5-v2-6-2_vsd_header_container)}.ui5-vsd-header-end{display:flex}.ui5-vsd-sub-header{height:var(--_ui5-v2-6-2_vsd_sub_header_container_height);line-height:var(--_ui5-v2-6-2_vsd_sub_header_container_height)}.ui5-vsd-header-start{display:flex;align-items:center}.ui5-vsd-back-button{margin-inline-end:.5rem}.ui5-vsd-footer{width:100%;display:flex;justify-content:flex-end;align-items:center;margin:.1875rem 0}.ui5-vsd-footer [ui5-button]:first-child{margin-inline-end:.5rem;min-width:4rem}.ui5-vsd-sort{width:100%;height:100%}[ui5-li-group]::part(header){overflow:hidden}[ui5-dialog]::part(content){padding-top:0;padding-bottom:0;padding-inline-end:0}:host [ui5-li]::part(native-li){padding-inline-start:var(--_ui5-v2-6-2_vsd_content_li_padding)}:host [ui5-li].ui5-vsd-filterItemList::part(native-li){padding-inline-start:1rem}
`;var f=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var d=n.length-1;d>=0;d--)(a=n[d])&&(r=(s<3?a(r):s>3?a(e,t,r):a(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},u;let c=u=class extends F{constructor(){super(...arguments),this.sortDescending=!1,this.open=!1,this._currentSettings={sortOrder:[],sortBy:[],filters:[]},this._initialSettings=this._currentSettings,this._confirmedSettings=this._currentSettings,this._currentMode="Sort",this._filterStepTwo=!1}onBeforeRendering(){this._currentSettings.filters&&this._currentSettings.filters.length&&this._setAdditionalTexts(),!this.shouldBuildSort&&this.shouldBuildFilter&&(this._currentMode=_.Filter)}onInvalidation(e){e.type==="slot"&&(this._confirmedSettings=this._settings)}_setAdditionalTexts(){this.filterItems.forEach((e,t)=>{let i=0;for(let s=0;s<e.values.length;s++)this._currentSettings.filters[t].filterOptions[s].selected&&i++;e.additionalText=i?`${i}`:""})}get _selectedFilter(){for(let e=0;e<this._currentSettings.filters.length;e++)if(this._currentSettings.filters[e].selected)return this._currentSettings.filters[e]}get shouldBuildSort(){return!!this.sortItems.length}get shouldBuildFilter(){return!!this.filterItems.length}get hasPagination(){return this.shouldBuildSort&&this.shouldBuildFilter}get _filterByTitle(){const e=this._selectedFilter?this._selectedFilter.text:"";return`${u.i18nBundle.getText(q)}: ${e}`}get _dialogTitle(){return u.i18nBundle.getText(re)}get _okButtonLabel(){return u.i18nBundle.getText(ne)}get _cancelButtonLabel(){return u.i18nBundle.getText(oe)}get _resetButtonLabel(){return u.i18nBundle.getText(le)}get _ascendingLabel(){return u.i18nBundle.getText(ae)}get _descendingLabel(){return u.i18nBundle.getText(de)}get _sortOrderLabel(){return u.i18nBundle.getText(ce)}get _filterByLabel(){return u.i18nBundle.getText(q)}get _sortByLabel(){return u.i18nBundle.getText(he)}get _isPhone(){return ee()}get _sortAscending(){return!this.sortDescending}get _title(){return this.showBackButton?this._filterByTitle:this._dialogTitle}get _disableResetButton(){return this._dialog&&this._sortSetttingsAreInitial&&this._filteresAreInitial}get _sortSetttingsAreInitial(){let e=!0;return["sortBy","sortOrder"].forEach(t=>{this._currentSettings[t].forEach((i,s)=>{i.selected!==this._initialSettings[t][s].selected&&(e=!1)})}),e}get _filteresAreInitial(){let e=!0;return this._currentSettings.filters.forEach((t,i)=>{for(let s=0;s<t.filterOptions.length;s++)t.filterOptions[s].selected!==this._initialSettings.filters[i].filterOptions[s].selected&&(e=!1)}),e}get _settings(){return{sortOrder:JSON.parse(JSON.stringify(this.initSortOrderItems)),sortBy:JSON.parse(JSON.stringify(this.initSortByItems)),filters:this.filterItems.map(e=>({text:e.text||"",selected:!1,filterOptions:e.values.map(t=>({text:t.text||"",selected:t.selected}))}))}}get initSortByItems(){return this.sortItems.map((e,t)=>({text:e.text,selected:e.selected,index:t}))}get initSortOrderItems(){return[{text:this._ascendingLabel,selected:!this.sortDescending},{text:this._descendingLabel,selected:this.sortDescending}]}get expandContent(){return this._filterStepTwo||!this.hasPagination}get isModeSort(){return this._currentMode===_.Sort}get isModeFilter(){return this._currentMode===_.Filter}get showBackButton(){return this.isModeFilter&&this._filterStepTwo}get _sortOrderListDomRef(){return this.shadowRoot.querySelector("[ui5-list][sort-order]")}get _sortByList(){return this.shadowRoot.querySelector("[ui5-list][sort-by]")}get _dialogDomRef(){return this.shadowRoot.querySelector("[ui5-dialog]")}beforeDialogOpen(){this._dialog?this._restoreSettings(this._confirmedSettings):(this._sortOrder=this._sortOrderListDomRef,this._sortBy=this._sortByList,this._initialSettings=this._settings,this._currentSettings=this._settings,this._confirmedSettings=this._settings,this._dialog=this._dialogDomRef),this.fireDecoratorEvent("before-open")}afterDialogOpen(){var e,t;(t=(e=this._dialog)==null?void 0:e.querySelector("[ui5-list]"))==null||t.focusFirstItem(),this._focusRecentlyUsedControl(),this.fireDecoratorEvent("open")}afterDialogClose(){this.fireDecoratorEvent("close")}_handleModeChange(e){const t=e.detail.selectedItems[0].getAttribute("data-mode");this._currentMode=_[t]}_handleFilterValueItemClick(e){this._currentSettings.filters=this._currentSettings.filters.map(t=>(t.selected&&t.filterOptions.forEach(i=>{i.text===e.detail.item.innerText&&(i.selected=!i.selected)}),t)),this._setSelectedProp(e),this._currentSettings=JSON.parse(JSON.stringify(this._currentSettings))}_setSelectedProp(e){this.filterItems.forEach(t=>{t.values.forEach(i=>{i.text===e.detail.item.innerText&&(i.selected=!i.selected)})})}_navigateToFilters(){this._filterStepTwo=!1}_changeCurrentFilter(e){this._filterStepTwo=!0,this._currentSettings.filters=this._currentSettings.filters.map(t=>(t.selected=t.text===e.detail.item.innerText,t))}_focusRecentlyUsedControl(){if(!this._recentlyFocused||!Object.keys(this._recentlyFocused).length)return;const e=this._recentlyFocused.getSelectedItems();e.length&&e[0].focus()}_confirmSettings(){this.open=!1,this._confirmedSettings=this._currentSettings,this.fireDecoratorEvent("confirm",this.eventsParams)}_cancelSettings(){this._restoreSettings(this._confirmedSettings),this.fireDecoratorEvent("cancel",this.eventsParams),this.open=!1}get eventsParams(){const e=this._currentSettings.sortOrder.filter(S=>S.selected)[0],t=this._currentSettings.sortBy.filter(S=>S.selected)[0],i=e&&(e.text||""),s=!this._currentSettings.sortOrder[0].selected,r=t&&(t.text||""),a=t&&t.index,d=this.sortItems[a],H=this.filterItems.filter(S=>S.values.some(Q=>Q.selected));return{sortOrder:i,sortDescending:s,sortBy:r,sortByItem:d,filters:this.selectedFilters,filterItems:H}}get selectedFilters(){const e=[];return this._currentSettings.filters.forEach(t=>{const i=[];t.filterOptions.forEach(s=>{s.selected&&i.push(s.text||"")}),i.length&&(e.push({}),e[e.length-1][t.text||""]=i)}),e}_restoreConfirmedOnEscape(e){e.detail.escPressed&&(this._cancelSettings(),this._currentMode=_.Sort,this._filterStepTwo=!1)}_resetSettings(){this._restoreSettings(this._initialSettings),this._recentlyFocused=this._sortOrder,this._focusRecentlyUsedControl()}_restoreSettings(e){this._currentSettings=JSON.parse(JSON.stringify(e)),this._currentMode=_.Sort,this._filterStepTwo=!1}_onSortOrderChange(e){this._recentlyFocused=this._sortOrder,this._currentSettings.sortOrder=this.initSortOrderItems.map(t=>(t.selected=t.text===e.detail.item.innerText,t)),this._currentSettings=JSON.parse(JSON.stringify(this._currentSettings))}_onSortByChange(e){const t=Number(e.detail.item.getAttribute("data-ui5-external-action-item-index"));this._recentlyFocused=this._sortBy,this._currentSettings.sortBy=this.initSortByItems.map((i,s)=>(i.selected=s===t,i)),this._currentSettings=JSON.parse(JSON.stringify(this._currentSettings))}setConfirmedSettings(e){if(e&&this._dialog&&!this._dialog.open){const t=JSON.parse(JSON.stringify(this._confirmedSettings));if(e.sortOrder)for(let i=0;i<t.sortOrder.length;i++)t.sortOrder[i].text===e.sortOrder?t.sortOrder[i].selected=!0:t.sortOrder[i].selected=!1;if(e.sortBy)for(let i=0;i<t.sortBy.length;i++)t.sortBy[i].text===e.sortBy?t.sortBy[i].selected=!0:t.sortBy[i].selected=!1;if(e.filters){const i={};for(let s=0;s<e.filters.length;s++)i[Object.keys(e.filters[s])[0]]=e.filters[s][Object.keys(e.filters[s])[0]];for(let s=0;s<t.filters.length;s++)for(let r=0;r<t.filters[s].filterOptions.length;r++)i[t.filters[s].text||""]&&i[t.filters[s].text||""].indexOf(t.filters[s].filterOptions[r].text||"")>-1?t.filters[s].filterOptions[r].selected=!0:t.filters[s].filterOptions[r].selected=!1}this._confirmedSettings=JSON.parse(JSON.stringify(t))}}};f([h({type:Boolean})],c.prototype,"sortDescending",void 0);f([h({type:Boolean})],c.prototype,"open",void 0);f([h({type:Object})],c.prototype,"_recentlyFocused",void 0);f([h({type:Object})],c.prototype,"_currentSettings",void 0);f([h({type:Object})],c.prototype,"_initialSettings",void 0);f([h({type:Object})],c.prototype,"_confirmedSettings",void 0);f([h()],c.prototype,"_currentMode",void 0);f([h({type:Boolean,noAttribute:!0})],c.prototype,"_filterStepTwo",void 0);f([E()],c.prototype,"sortItems",void 0);f([E()],c.prototype,"filterItems",void 0);f([te("@ui5/webcomponents-fiori")],c,"i18nBundle",void 0);c=u=f([D({tag:"ui5-view-settings-dialog",renderer:Z,styles:Ne,template:Re}),x("confirm",{bubbles:!0}),x("cancel",{bubbles:!0}),x("before-open",{cancelable:!0}),x("open",{bubbles:!0}),x("close",{bubbles:!0})],c);c.define();const V=w("ui5-view-settings-dialog",[],["open","sortDescending"],["filterItems","sortItems"],["before-open","cancel","close","confirm","open"]);V.displayName="ViewSettingsDialog";const Ee={title:"Modals & Popovers / ViewSettingsDialog",component:V,argTypes:{filterItems:{control:{disable:!0}},sortItems:{control:{disable:!0}}},args:{open:Y,filterItems:o.jsxs(o.Fragment,{children:[o.jsx(R,{text:"Position",values:o.jsxs(o.Fragment,{children:[o.jsx(p,{text:"CEO"}),o.jsx(p,{text:"CTO"}),o.jsx(p,{text:"CIO"})]})}),o.jsx(R,{text:"Department",values:o.jsxs(o.Fragment,{children:[o.jsx(p,{text:"Legal"}),o.jsx(p,{text:"Finance"}),o.jsx(p,{text:"Development"})]})})]}),sortItems:o.jsxs(o.Fragment,{children:[o.jsx(v,{text:"Name"}),o.jsx(v,{text:"Position"}),o.jsx(v,{text:"Company"}),o.jsx(v,{text:"Department"})]})},parameters:{chromatic:{delay:999}},tags:["package:@ui5/webcomponents-fiori"]},O={render:n=>{const[e,t]=W.useState(n.open);return o.jsxs(o.Fragment,{children:[o.jsx(K,{onClick:()=>{t(!0)},children:"Show ViewSettingsDialog"}),o.jsx(V,{...n,open:e,onClose:i=>{t(!1),n.onClose(i)}})]})}};var A,J,k;O.parameters={...O.parameters,docs:{...(A=O.parameters)==null?void 0:A.docs,source:{originalSource:`{
  render: args => {
    const [open, setOpen] = useState(args.open);
    return <>
        <Button onClick={() => {
        setOpen(true);
      }}>
          Show ViewSettingsDialog
        </Button>
        <ViewSettingsDialog {...args} open={open} onClose={e => {
        setOpen(false);
        args.onClose(e);
      }} />
      </>;
  }
}`,...(k=(J=O.parameters)==null?void 0:J.docs)==null?void 0:k.source}}};const Le=["Default"],ot=Object.freeze(Object.defineProperty({__proto__:null,Default:O,__namedExportsOrder:Le,default:Ee},Symbol.toStringTag,{value:"Module"}));export{ot as C,O as D,R as F,v as S,p as a};
