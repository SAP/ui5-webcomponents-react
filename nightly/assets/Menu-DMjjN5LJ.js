import{j as p,p as f,d as g,m as y,e as M,c as b,s as c,I as C,k as O,x as E,q as I}from"./withWebComponent-DIBLIPif.js";import{d as x}from"./slot-_4yKMUwC.js";import{l as d}from"./event-strict-DgQLNDEV.js";import{K as h,c as _,b as S}from"./Keys-Df3IBHp2.js";import{i as P}from"./i18n-DEVDpFvK.js";import"./slim-arrow-right-CF6hjUVH.js";import{e as T}from"./Popover-DWH7u18I.js";import"./MenuItem-BHAzeMhl.js";import{L as B}from"./ListItemCustom-BxfPsEbg.js";import{d as w}from"./parameters-bundle.css-C_3tvNHF.js";import{d as R,c as D}from"./List-Ce0SnAMJ.js";import{R as N}from"./ResponsivePopover-BCkoypY8.js";import{B as j}from"./BusyIndicator-CgjmT3Fu.js";import{a as A}from"./Button-BYnClEc8.js";import{d as L}from"./decline-CkvCC5iV.js";import{f as $,g as z}from"./i18n-defaults-Cyg2J0QB.js";function F(){return p(B,{class:"ui5-menu-separator",_forcedAccessibleRole:"separator",disabled:!0})}f("@ui5/webcomponents-theming","sap_horizon",async()=>g);f("@ui5/webcomponents","sap_horizon",async()=>w);const K=`:host{border-top:.0625rem solid var(--sapGroup_ContentBorderColor);min-height:.125rem}.ui5-menu-separator{border:inherit;min-height:inherit;background:inherit;opacity:1}
`;var U=function(a,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(a,e,t,n);else for(var l=a.length-1;l>=0;l--)(r=a[l])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o};let v=class extends R{get isSeparator(){return!0}get classes(){return{main:{"ui5-menu-separator":!0}}}get _focusable(){return!1}get _pressable(){return!1}};v=U([y({tag:"ui5-menu-separator",renderer:M,styles:[K],template:F})],v);v.define();function H(){return b(N,{id:`${this._id}-menu-rp`,class:"ui5-menu-rp",placement:"Bottom",verticalAlign:"Bottom",opener:this.opener,open:this.open,preventInitialFocus:!0,hideArrow:!0,allowTargetOverlap:!0,accessibleName:this.acessibleNameText,onBeforeOpen:this._beforePopoverOpen,onOpen:this._afterPopoverOpen,onBeforeClose:this._beforePopoverClose,onClose:this._afterPopoverClose,children:[this.isPhone&&b("div",{slot:"header",class:"ui5-menu-dialog-header",children:[p("div",{class:"ui5-menu-dialog-title",children:p("h1",{children:this.headerText})}),p(A,{icon:L,design:"Transparent","aria-label":this.labelClose,onClick:this._close})]}),p("div",{id:`${this._id}-menu-main`,children:this.items.length?p(D,{id:`${this._id}- menu-list`,selectionMode:"None",loading:this.loading,loadingDelay:this.loadingDelay,separators:"None",accessibleRole:"Menu",onItemClick:this._itemClick,onMouseOver:this._itemMouseOver,onKeyDown:this._itemKeyDown,"onui5-close-menu":this._close,children:p("slot",{})}):this.loading&&p(j,{id:`${this._id}-menu-busy-indicator`,delay:this.loadingDelay,class:"ui5-menu-busy-indicator",active:!0})})]})}f("@ui5/webcomponents-theming","sap_horizon",async()=>g);f("@ui5/webcomponents","sap_horizon",async()=>w);const k=`.ui5-menu-rp[ui5-responsive-popover]::part(header),.ui5-menu-rp[ui5-responsive-popover]::part(content),.ui5-menu-rp[ui5-responsive-popover]::part(footer){padding:0}.ui5-menu-rp[ui5-responsive-popover]{box-shadow:var(--sapContent_Shadow1);border-radius:var(--_ui5-v2-6-3_menu_popover_border_radius)}.ui5-menu-busy-indicator{width:100%}.ui5-menu-dialog-header{display:flex;height:var(--_ui5-v2-6-3-responsive_popover_header_height);align-items:center;justify-content:space-between;padding:0px 1rem;width:100%;overflow:hidden}.ui5-menu-dialog-title{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;width:calc(100% - 6.5rem);padding-right:1rem;font-family:var(--sapFontHeaderFamily)}.ui5-menu-dialog-title>h1{display:inline-block;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:var(--sapFontHeader5Size)}.ui5-menu-back-button{margin-right:1rem}
`;var u=function(a,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(a,e,t,n);else for(var l=a.length-1;l>=0;l--)(r=a[l])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},m;const q=300;let s=m=class extends C{constructor(){super(...arguments),this.open=!1,this.loading=!1,this.loadingDelay=1e3}get isRtl(){return this.effectiveDir==="rtl"}get labelClose(){return m.i18nBundle.getText($)}get isPhone(){return O()}get _popover(){return this.shadowRoot.querySelector("[ui5-responsive-popover]")}get _menuItems(){return this.items.filter(e=>!e.isSeparator)}get acessibleNameText(){return m.i18nBundle.getText(z)}onBeforeRendering(){const e=this._menuItems.some(t=>!!t.icon);this._menuItems.forEach(t=>{t._siblingsWithIcon=e})}_close(){this.open=!1}_openItemSubMenu(e){clearTimeout(this._timeout),!(!e._popover||e._popover.open)&&(this.fireEvent("before-open",{item:e},!1,!1),e._popover.opener=e,e._popover.open=!0,e.selected=!0)}_closeItemSubMenu(e){if(e&&e._popover){const t=e._menuItems.find(n=>n._popover&&n._popover.open);t&&this._closeItemSubMenu(t),e._popover.open=!1,e.selected=!1}}_itemMouseOver(e){if(E()){const t=e.target;t.hasAttribute("ui5-menu-item")&&(t.focus(),this._startOpenTimeout(t))}}async focus(e){await I();const t=this._menuItems[0];return t?t.focus(e):super.focus(e)}_startOpenTimeout(e){clearTimeout(this._timeout),this._timeout=setTimeout(()=>{const t=e.parentElement,n=t&&t._menuItems.find(i=>i._popover&&i._popover.open);n&&this._closeItemSubMenu(n),this._openItemSubMenu(e)},q)}_itemClick(e){const t=e.detail.item;t._popover?this._openItemSubMenu(t):this.fireEvent("item-click",{item:t,text:t.text||""},!0,!1)&&this._popover&&t.fireEvent("close-menu",{})}_itemKeyDown(e){var r;if(!h(e)&&!_(e))return;const t=this.isRtl?_(e):h(e),n=this.isRtl?h(e):_(e),i=e.target,o=i.parentElement;S(e)&&e.preventDefault(),n?this._openItemSubMenu(i):t&&o.hasAttribute("ui5-menu-item")&&o._popover&&(o._popover.open=!1,o.selected=!1,(r=o._popover.opener)==null||r.focus())}_beforePopoverOpen(e){!this.fireEvent("before-open",{},!0,!0)&&(this.open=!1,e.preventDefault())}_afterPopoverOpen(){var e;(e=this._menuItems[0])==null||e.focus(),this.fireEvent("open",{},!1,!0)}_beforePopoverClose(e){!this.fireEvent("before-close",{escPressed:e.detail.escPressed},!0,!0)&&(this.open=!0,e.preventDefault())}_afterPopoverClose(){this.open=!1,this.fireDecoratorEvent("close")}};u([c()],s.prototype,"headerText",void 0);u([c({type:Boolean})],s.prototype,"open",void 0);u([c({type:Boolean})],s.prototype,"loading",void 0);u([c({type:Number})],s.prototype,"loadingDelay",void 0);u([c({converter:T})],s.prototype,"opener",void 0);u([x({default:!0,type:HTMLElement,invalidateOnChildChange:!0})],s.prototype,"items",void 0);u([P("@ui5/webcomponents")],s,"i18nBundle",void 0);s=m=u([y({tag:"ui5-menu",renderer:M,styles:k,template:H}),d("item-click"),d("before-open"),d("open"),d("before-close"),d("close")],s);s.define();const le=s;export{le as M,k as m};
