const d=new WeakMap,l=new WeakMap,v={attributes:!0,childList:!0,characterData:!0,subtree:!0},g=e=>{const t=e;return t.accessibleNameRef?p(e):t.accessibleName?t.accessibleName:void 0},p=e=>{var c;const t=((c=e.accessibleNameRef)==null?void 0:c.split(" "))??[];let s="";return t.forEach((o,a)=>{const n=b(e,o),r=`${n&&n.textContent?n.textContent:""}`;r&&(s+=r,a<t.length-1&&(s+=" "))}),s},u=e=>{const t=new Set;E(e).forEach(r=>{t.add(r)});const c=e.accessibleNameRef,o=e.accessibleDescriptionRef,a=[c,o].filter(Boolean).join(" ");return(a?a.split(" "):[]).forEach(r=>{const i=b(e,r);i&&t.add(i)}),Array.from(t)},E=e=>{const t=e.getRootNode().querySelectorAll(`[for="${e.id}"]`);return Array.from(t)},b=(e,t)=>e.getRootNode().querySelector(`[id='${t}']`)||document.getElementById(t),k=e=>{const t=[];if(E(e).forEach(c=>{const o=c.textContent;o&&t.push(o)}),t.length)return t.join(" ")},h=e=>s=>{const c=s&&s.type==="property"&&s.name==="accessibleNameRef",o=s&&s.type==="property"&&s.name==="accessibleDescriptionRef";if(!c&&!o)return;const a=l.get(e);if(!a)return;const n=a.observedElements,r=u(e);n.forEach(i=>{r.includes(i)||f(a,i)}),r.forEach(i=>{n.includes(i)||(m(a,i),a.observedElements.push(i))}),a==null||a.callback()},R=(e,t)=>{if(l.has(e))return;const s=u(e),c=h(e),o={host:e,observedElements:s,callback:t,invalidationCallback:c};l.set(e,o),e.attachInvalidate(c),s.forEach(a=>{m(o,a)}),t()},m=(e,t)=>{let s=d.get(t);if(!s){s={observer:null,callbacks:[]};const c=new MutationObserver(()=>{s.callbacks.forEach(n=>{n()});const a=document.getElementById(t.id);e.host.id===t.getAttribute("for")||a||f(e,t)});s.observer=c,c.observe(t,v),d.set(t,s)}s.callbacks.includes(e.callback)||s.callbacks.push(e.callback)},f=(e,t)=>{var c;const s=d.get(t);s&&(s.callbacks=s.callbacks.filter(o=>o!==e.callback),s.callbacks.length||((c=s.observer)==null||c.disconnect(),d.delete(t))),e.observedElements=e.observedElements.filter(o=>o!==t)},x=e=>{const t=l.get(e);if(!t)return;[...t.observedElements].forEach(c=>{f(t,c)}),e.detachInvalidate(t.invalidationCallback),l.delete(e)},y=e=>{const t=e;return t.accessibleDescriptionRef?A(e):t.accessibleDescription?t.accessibleDescription:void 0},A=e=>{var c;const t=((c=e.accessibleDescriptionRef)==null?void 0:c.split(" "))??[];let s="";return t.forEach((o,a)=>{const n=b(e,o),r=`${n&&n.textContent?n.textContent:""}`;r&&(s+=r,a<t.length-1&&(s+=" "))}),s};export{k as a,p as b,A as c,x as d,y as e,g,R as r};
