const i=new WeakMap,o=new WeakMap,p={attributes:!0,childList:!0,characterData:!0,subtree:!0},v=t=>{const e=t;return e.accessibleNameRef?m(t):e.accessibleName?e.accessibleName:void 0},m=t=>{var n;const e=((n=t.accessibleNameRef)==null?void 0:n.split(" "))??[];let c="";return e.forEach((s,a)=>{const r=b(t,s),l=`${r&&r.textContent?r.textContent:""}`;l&&(c+=l,a<e.length-1&&(c+=" "))}),c},f=t=>{const e=new Set;u(t).forEach(a=>{e.add(a)});const c=t.accessibleNameRef,n=t.accessibleDescriptionRef,s=[c,n].filter(Boolean).join(" ");return(s?s.split(" "):[]).forEach(a=>{const r=b(t,a);r&&e.add(r)}),Array.from(e)},u=t=>{const e=t.getRootNode().querySelectorAll(`[for="${t.id}"]`);return Array.from(e)},b=(t,e)=>t.getRootNode().querySelector(`[id='${e}']`)||document.getElementById(e),g=t=>{const e=[];if(u(t).forEach(c=>{const n=c.textContent;n&&e.push(n)}),e.length)return e.join(" ")},E=t=>e=>{const c=e&&e.type==="property"&&e.name==="accessibleNameRef",n=e&&e.type==="property"&&e.name==="accessibleDescriptionRef";if(!c&&!n)return;const s=o.get(t);if(!s)return;const a=s.observedElements,r=f(t);a.forEach(l=>{r.includes(l)||d(s,l)}),r.forEach(l=>{a.includes(l)||(h(s,l),s.observedElements.push(l))}),s==null||s.callback()},y=(t,e)=>{if(o.has(t))return;const c=f(t),n=E(t),s={host:t,observedElements:c,callback:e,invalidationCallback:n};o.set(t,s),t.attachInvalidate(n),c.forEach(a=>{h(s,a)}),e()},h=(t,e)=>{let c=i.get(e);if(!c){c={observer:null,callbacks:[]};const n=new MutationObserver(()=>{c.callbacks.forEach(a=>{a()});const s=document.getElementById(e.id);t.host.id===e.getAttribute("for")||s||d(t,e)});c.observer=n,n.observe(e,p),i.set(e,c)}c.callbacks.includes(t.callback)||c.callbacks.push(t.callback)},d=(t,e)=>{var n;const c=i.get(e);c&&(c.callbacks=c.callbacks.filter(s=>s!==t.callback),c.callbacks.length||((n=c.observer)==null||n.disconnect(),i.delete(e))),t.observedElements=t.observedElements.filter(s=>s!==e)},R=t=>{const e=o.get(t);e&&([...e.observedElements].forEach(c=>{d(e,c)}),t.detachInvalidate(e.invalidationCallback),o.delete(t))},N=t=>{const e=t;return e.accessibleDescriptionRef?k(t):e.accessibleDescription?e.accessibleDescription:void 0},k=t=>{var n;const e=((n=t.accessibleDescriptionRef)==null?void 0:n.split(" "))??[];let c="";return e.forEach((s,a)=>{const r=b(t,s),l=`${r&&r.textContent?r.textContent:""}`;l&&(c+=l,a<e.length-1&&(c+=" "))}),c};export{v as A,m as E,N as L,g as M,R as T,k as p,y};
