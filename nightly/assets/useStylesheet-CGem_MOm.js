import{a as f,u as d,c as g,r as y}from"./useIsomorphicLayoutEffect-U1V4gMqc.js";import{r as h}from"./index-CjmQ2z5u.js";globalThis["@ui5/webcomponents-react"]??(globalThis["@ui5/webcomponents-react"]={});const n=globalThis["@ui5/webcomponents-react"];function p(){return Symbol.for(`@ui5/webcomponents-react/StyleStore-${f()}/Listeners`)}function i(){return Symbol.for(`@ui5/webcomponents-react/StyleStore-${f()}`)}const m={staticCssInjected:!1,componentsMap:new Map};function a(){var t;return n[t=p()]??(n[t]=[]),n[p()]}function u(){for(const t of a())t()}function c(){var t;return n[t=i()]??(n[t]=m),n[i()]}function C(t){return a().push(t),()=>{const s=a(),o=s.indexOf(t);o!==-1&&s.splice(o,1)}}const r={subscribe:C,getSnapshot:c,getServerSnapshot:()=>m,setStaticCssInjected:t=>{const e=c();n[i()]={...e,staticCssInjected:t},u()},mountComponent:t=>{const{componentsMap:e}=c();e.has(t)?e.set(t,e.get(t)+1):e.set(t,1),u()},unmountComponent:t=>{const{componentsMap:e}=c();e.has(t)&&e.set(t,e.get(t)-1),u()}};function j(t,e,s){const{staticCssInjected:o,componentsMap:b}=h.useSyncExternalStore(r.subscribe,r.getSnapshot,r.getServerSnapshot);d(()=>{const S=`${e}-${f()}`,l=(s==null?void 0:s.alwaysInject)||!o;return l&&(g(t,"data-ui5wcr-component",S),r.mountComponent(e)),()=>{l&&(r.unmountComponent(e),b.get(e)<=0&&y("data-ui5wcr-component",S))}},[t,o])}export{r as S,j as u};
