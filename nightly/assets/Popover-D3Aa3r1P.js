import{o as L,j as b,F as x,r as M,d as V,p as f,q as G,y as D,N as F}from"./withWebComponent-BAC46Qgl.js";import{s as C}from"./slot-Df15G--e.js";import{a as R,e as S,r as $,g as j,i as U,b as H,c as X,f as Y,d as E}from"./PopupsCommon.css-BjVEqPfo.js";import{g as q}from"./getEffectiveScrollbarStyle-DY0HYxPj.js";import{g as K}from"./getActiveElement-BL9Yqj8a.js";import{a as Z}from"./Title-Dvor2iJZ.js";import{d as J}from"./parameters-bundle.css-BzaqQttB.js";function Q(){return R.call(this,{beforeContent:z,afterContent:tt})}function z(){return L(x,{children:[b("span",{class:"ui5-popover-arrow",style:this.styles.arrow}),this._displayHeader&&b("header",{class:"ui5-popup-header-root",id:"ui5-popup-header",part:"header",children:this.header.length?b("slot",{name:"header"}):b(Z,{level:"H1",class:"ui5-popup-header-text",children:this.headerText})})]})}function tt(){return b(x,{children:this._displayFooter&&!!this.footer.length&&b("footer",{class:"ui5-popup-footer-root",part:"footer",children:b("slot",{name:"footer"})})})}const et={toAttribute(i){return i instanceof HTMLElement?null:i},fromAttribute(i){return i}};var O;(function(i){i.Start="Start",i.End="End",i.Top="Top",i.Bottom="Bottom"})(O||(O={}));const p=O;var I;(function(i){i.Center="Center",i.Top="Top",i.Bottom="Bottom",i.Stretch="Stretch"})(I||(I={}));const T=I;var A;(function(i){i.Center="Center",i.Start="Start",i.End="End",i.Stretch="Stretch"})(A||(A={}));const c=A;let N;const ot=300,u=[],P=()=>{u.forEach(i=>{i.instance.reposition()})},rt=()=>{K().tagName==="IFRAME"&&ft().reverse().forEach(i=>i.instance.closePopup(!1,!1,!0))},it=()=>{N=setInterval(()=>{P(),rt()},ot)},nt=()=>{clearInterval(N)},st=()=>{document.addEventListener("scroll",P,{capture:!0})},at=()=>{document.removeEventListener("scroll",P,{capture:!0})},lt=i=>{i&&i.shadowRoot.addEventListener("scroll",P,{capture:!0})},ht=i=>{i&&i.shadowRoot.removeEventListener("scroll",P,{capture:!0})},pt=()=>{document.addEventListener("mousedown",k)},dt=()=>{document.removeEventListener("mousedown",k)},k=i=>{const t=j();if(!(t.length===0||!wt(t[t.length-1].instance)))for(let o=t.length-1;o!==-1;o--){const r=t[o].instance;if(r.isModal||r.isOpenerClicked(i))return;if(U(i,r.getBoundingClientRect()))break;r.closePopup()}},ut=i=>{const t=mt(i);S(i,t),u.push({instance:i,parentPopovers:t}),lt(i),u.length===1&&(st(),pt(),it())},ct=i=>{const t=[i];for(let e=0;e<u.length;e++){const o=u[e].parentPopovers.indexOf(i);u[e].parentPopovers.length>0&&o>-1&&t.push(u[e].instance)}for(let e=t.length-1;e>=0;e--)for(let o=0;o<u.length;o++){let r=-1;t[e]===u[o].instance&&(r=o),r>=0&&($(u[r].instance),ht(u[r].instance),u.splice(r,1)[0].instance.closePopup(!1,!0))}u.length||(at(),dt(),nt())},ft=()=>u,mt=i=>{let t=i.parentNode;const e=[];for(;t&&t.parentNode;){for(let o=0;o<u.length;o++)t===u[o].instance&&e.push(t);t=t.parentNode}return e};M("@ui5/webcomponents-theming","sap_horizon",async()=>V);M("@ui5/webcomponents","sap_horizon",async()=>J);const _t=`:host{box-shadow:var(--_ui5-v2-6-2_popover_box_shadow);background-color:var(--_ui5-v2-6-2_popover_background);max-width:calc(100vw - (100vw - 100%) - 2 * var(--_ui5-v2-6-2_popup_viewport_margin))}:host([hide-arrow]){box-shadow:var(--_ui5-v2-6-2_popover_no_arrow_box_shadow)}:host([actual-placement="Bottom"]) .ui5-popover-arrow{left:calc(50% - .5625rem);top:-.5rem;height:.5rem}:host([actual-placement="Bottom"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-6-2_popover_upward_arrow_margin)}:host([actual-placement="Start"]) .ui5-popover-arrow{top:calc(50% - .5625rem);right:-.5625rem;width:.5625rem}:host([actual-placement="Start"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-6-2_popover_right_arrow_margin)}:host([actual-placement="Top"]) .ui5-popover-arrow{left:calc(50% - .5625rem);height:.5625rem;top:100%}:host([actual-placement="Top"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-6-2_popover_downward_arrow_margin)}:host(:not([actual-placement])) .ui5-popover-arrow,:host([actual-placement="End"]) .ui5-popover-arrow{left:-.5625rem;top:calc(50% - .5625rem);width:.5625rem;height:1rem}:host(:not([actual-placement])) .ui5-popover-arrow:after,:host([actual-placement="End"]) .ui5-popover-arrow:after{margin:var(--_ui5-v2-6-2_popover_left_arrow_margin)}:host([hide-arrow]) .ui5-popover-arrow{display:none}.ui5-popover-root{min-width:6.25rem}.ui5-popover-arrow{pointer-events:none;display:block;width:1rem;height:1rem;position:absolute;overflow:hidden}.ui5-popover-arrow:after{content:"";display:block;width:.7rem;height:.7rem;background-color:var(--_ui5-v2-6-2_popover_background);box-shadow:var(--_ui5-v2-6-2_popover_box_shadow);transform:rotate(-45deg)}:host([modal])::backdrop{background-color:var(--_ui5-v2-6-2_popup_block_layer_background);opacity:var(--_ui5-v2-6-2_popup_block_layer_opacity)}:host([modal]) .ui5-block-layer{display:block}
`;var d=function(i,t,e,o){var r=arguments.length,n=r<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,t,e,o);else for(var h=i.length-1;h>=0;h--)(s=i[h])&&(n=(r<3?s(n):r>3?s(t,e,n):s(t,e))||n);return r>3&&n&&Object.defineProperty(t,e,n),n},l;const y=8;let a=l=class extends H{static get VIEWPORT_MARGIN(){return 10}constructor(){super(),this.placement="End",this.horizontalAlign="Center",this.verticalAlign="Center",this.modal=!1,this.hideArrow=!1,this.allowTargetOverlap=!1,this.disableScrolling=!1,this.arrowTranslateX=0,this.arrowTranslateY=0,this.actualPlacement="End"}set opener(t){this._opener!==t&&(this._opener=t,t&&this.open&&this.openPopup())}get opener(){return this._opener}async openPopup(){if(this._opened)return;const t=this.getOpenerHTMLElement(this.opener);if(t){if(this.isOpenerOutsideViewport(t.getBoundingClientRect())){await D(),this.open=!1,this.fireDecoratorEvent("close");return}this._openerRect=t.getBoundingClientRect(),await super.openPopup()}}isOpenerClicked(t){const e=t.target;if(e===this._opener)return!0;const o=e;return o.getFocusDomRef&&o.getFocusDomRef()===this._opener?!0:t.composedPath().indexOf(this._opener)>-1}_addOpenedPopup(){ut(this)}_removeOpenedPopup(){ct(this)}getOpenerHTMLElement(t){if(t===void 0)return t;if(t instanceof HTMLElement)return this._isUI5Element(t)?t.getFocusDomRef():t;let e=this.getRootNode();e===this&&(e=document);let o=e.getElementById(t);return e instanceof ShadowRoot&&!o&&(o=document.getElementById(t)),o&&this._isUI5Element(o)&&o.getFocusDomRef()||o}shouldCloseDueToOverflow(t,e){const r={Start:e.right,End:e.left,Top:e.top,Bottom:e.bottom},n=this.getOpenerHTMLElement(this.opener),s=Y(n);let h=!1,w=!1;if(s instanceof l){const m=s.contentDOM.getBoundingClientRect();h=e.top>m.top+m.height,w=e.top+e.height<m.top}return r[t]<0||r[t]+32>s.innerHeight||h||w}shouldCloseDueToNoOpener(t){return t.top===0&&t.bottom===0&&t.left===0&&t.right===0}isOpenerOutsideViewport(t){return t.bottom<0||t.top>window.innerHeight||t.right<0||t.left>window.innerWidth}_resize(){super._resize(),this.open&&this.reposition()}reposition(){this._show()}async _show(){super._show();const t=this.getOpenerHTMLElement(this.opener);if(t&&this._isUI5Element(t)&&!t.getDomRef())return;this._opened||this._showOutsideViewport();const e=this.getPopoverSize();let o;if(e.width===0||e.height===0)return;if(this.open&&(this._openerRect=t.getBoundingClientRect()),this._oldPlacement&&this.shouldCloseDueToNoOpener(this._openerRect)&&this.isFocusWithin()?o=this._oldPlacement:o=this.calcPlacement(this._openerRect,e),this._preventRepositionAndClose||this.isOpenerOutsideViewport(this._openerRect))return await this._waitForDomRef(),this.closePopup();this._oldPlacement=o,this.actualPlacement=o.placement;let r=E(this._left,l.VIEWPORT_MARGIN,document.documentElement.clientWidth-e.width-l.VIEWPORT_MARGIN);this.actualPlacement===p.End&&(r=Math.max(r,this._left));let n=E(this._top,l.VIEWPORT_MARGIN,document.documentElement.clientHeight-e.height-l.VIEWPORT_MARGIN);this.actualPlacement===p.Bottom&&(n=Math.max(n,this._top)),this.arrowTranslateX=o.arrow.x,this.arrowTranslateY=o.arrow.y,n=this._adjustForIOSKeyboard(n),Object.assign(this.style,{top:`${n}px`,left:`${r}px`}),this.horizontalAlign===c.Stretch&&this._width&&(this.style.width=this._width),this.verticalAlign===T.Stretch&&this._height&&(this.style.height=this._height)}_adjustForIOSKeyboard(t){if(!F())return t;const e=Math.ceil(this.getBoundingClientRect().top);return t+(Number.parseInt(this.style.top||"0")-e)}getPopoverSize(){const t=this.getBoundingClientRect(),e=t.width,o=t.height;return{width:e,height:o}}_showOutsideViewport(){Object.assign(this.style,{top:"-10000px",left:"-10000px"})}_isUI5Element(t){return"isUI5Element"in t}get arrowDOM(){return this.shadowRoot.querySelector(".ui5-popover-arrow")}calcPlacement(t,e){let o=l.VIEWPORT_MARGIN,r=0;const n=this.allowTargetOverlap,s=document.documentElement.clientWidth,h=document.documentElement.clientHeight;let w=h,m=s;const g=this.getActualPlacement(t,e);this._preventRepositionAndClose=this.shouldCloseDueToNoOpener(t)||this.shouldCloseDueToOverflow(g,t);const v=g===p.Top||g===p.Bottom;this.horizontalAlign===c.Stretch&&v?(e.width=t.width,this._width=`${t.width}px`):this.verticalAlign===T.Stretch&&!v&&(e.height=t.height,this._height=`${t.height}px`);const _=this.hideArrow?0:y;switch(g){case p.Top:o=this.getVerticalLeft(t,e),r=Math.max(t.top-e.height-_,0),n||(w=t.top-_);break;case p.Bottom:o=this.getVerticalLeft(t,e),r=t.bottom+_,n?r=Math.max(Math.min(r,h-e.height),0):w=h-t.bottom-_;break;case p.Start:o=Math.max(t.left-e.width-_,0),r=this.getHorizontalTop(t,e),n||(m=t.left-_);break;case p.End:o=t.left+t.width+_,r=this.getHorizontalTop(t,e),n?o=Math.max(Math.min(o,s-e.width),0):m=s-t.right-_;break}v?e.width>s||o<l.VIEWPORT_MARGIN?o=l.VIEWPORT_MARGIN:o+e.width>s-l.VIEWPORT_MARGIN&&(o=s-l.VIEWPORT_MARGIN-e.width):e.height>h||r<l.VIEWPORT_MARGIN?r=l.VIEWPORT_MARGIN:r+e.height>h-l.VIEWPORT_MARGIN&&(r=h-l.VIEWPORT_MARGIN-e.height),this._maxHeight=Math.round(w-l.VIEWPORT_MARGIN),this._maxWidth=Math.round(m-l.VIEWPORT_MARGIN),(this._left===void 0||Math.abs(this._left-o)>1.5)&&(this._left=Math.round(o)),(this._top===void 0||Math.abs(this._top-r)>1.5)&&(this._top=Math.round(r));const B=Number.parseInt(window.getComputedStyle(this).getPropertyValue("border-radius")),W=this.getArrowPosition(t,e,o,r,v,B);return this._left+=this.getRTLCorrectionLeft(),{arrow:W,top:this._top,left:this._left,placement:g}}getRTLCorrectionLeft(){return parseFloat(window.getComputedStyle(this).left)-this.getBoundingClientRect().left}getArrowPosition(t,e,o,r,n,s){const h=this._actualHorizontalAlign;let w=h===c.Center||h===c.Stretch;h===c.End&&o<=t.left&&(w=!0),h===c.Start&&o+e.width>=t.left+t.width&&(w=!0);let m=0;n&&w&&(m=t.left+t.width/2-o-e.width/2);let g=0;n||(g=t.top+t.height/2-r-e.height/2);const v=e.height/2-s-y/2;g=E(g,-v,v);const _=e.width/2-s-y/2;return m=E(m,-_,_),{x:Math.round(m),y:Math.round(g)}}fallbackPlacement(t,e,o,r){if(o.left>r.width)return p.Start;if(t-o.right>o.left)return p.End;if(e-o.bottom>r.height)return p.Bottom;if(e-o.bottom<o.top)return p.Top}getActualPlacement(t,e){const o=this.placement;let r=o;const n=document.documentElement.clientWidth,s=document.documentElement.clientHeight;switch(o){case p.Top:t.top<e.height&&t.top<s-t.bottom&&(r=p.Bottom);break;case p.Bottom:s-t.bottom<e.height&&s-t.bottom<t.top&&(r=p.Top);break;case p.Start:t.left<e.width&&(r=this.fallbackPlacement(n,s,t,e)||o);break;case p.End:n-t.right<e.width&&(r=this.fallbackPlacement(n,s,t,e)||o);break}return r}getVerticalLeft(t,e){const o=this._actualHorizontalAlign;let r=l.VIEWPORT_MARGIN;switch(o){case c.Center:case c.Stretch:r=t.left-(e.width-t.width)/2;break;case c.Start:r=t.left;break;case c.End:r=t.right-e.width;break}return r}getHorizontalTop(t,e){let o=0;switch(this.verticalAlign){case T.Center:case T.Stretch:o=t.top-(e.height-t.height)/2;break;case T.Top:o=t.top;break;case T.Bottom:o=t.bottom-e.height;break}return o}get isModal(){return this.modal}get _ariaLabelledBy(){if(!this._ariaLabel&&this._displayHeader)return"ui5-popup-header"}get styles(){return{...super.styles,root:{"max-height":this._maxHeight?`${this._maxHeight}px`:"","max-width":this._maxWidth?`${this._maxWidth}px`:""},arrow:{transform:`translate(${this.arrowTranslateX}px, ${this.arrowTranslateY}px)`}}}get classes(){const t=super.classes;return t.root["ui5-popover-root"]=!0,t}get _displayHeader(){return!!(this.header.length||this.headerText)}get _displayFooter(){return!0}get _actualHorizontalAlign(){if(this.effectiveDir==="rtl"){if(this.horizontalAlign===c.Start)return c.End;if(this.horizontalAlign===c.End)return c.Start}return this.horizontalAlign}};d([f()],a.prototype,"headerText",void 0);d([f()],a.prototype,"placement",void 0);d([f()],a.prototype,"horizontalAlign",void 0);d([f()],a.prototype,"verticalAlign",void 0);d([f({type:Boolean})],a.prototype,"modal",void 0);d([f({type:Boolean})],a.prototype,"hideArrow",void 0);d([f({type:Boolean})],a.prototype,"allowTargetOverlap",void 0);d([f({type:Boolean})],a.prototype,"disableScrolling",void 0);d([f({type:Number,noAttribute:!0})],a.prototype,"arrowTranslateX",void 0);d([f({type:Number,noAttribute:!0})],a.prototype,"arrowTranslateY",void 0);d([f()],a.prototype,"actualPlacement",void 0);d([f({type:Number,noAttribute:!0})],a.prototype,"_maxHeight",void 0);d([f({type:Number,noAttribute:!0})],a.prototype,"_maxWidth",void 0);d([C({type:HTMLElement})],a.prototype,"header",void 0);d([C({type:HTMLElement})],a.prototype,"footer",void 0);d([f({converter:et})],a.prototype,"opener",null);a=l=d([G({tag:"ui5-popover",styles:[H.styles,X,_t,q()],template:Q})],a);const wt=i=>"opener"in i;a.define();const It=a;export{et as D,p as P,c as a,T as b,Q as c,It as d};
