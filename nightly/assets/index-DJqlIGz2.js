import{O as R}from"./Keys-B3oBAe0t.js";import{t as T}from"./getActiveElement-kltGt_DR.js";import{s as g,m as v,A,w as N}from"./jsx-runtime-cXES_1K3.js";import{l as M}from"./event-strict-DgQLNDEV.js";import{i as C,a as K,f as D}from"./index-Bs3SdOxL.js";var r;(function(o){o.None="None",o.Single="Single",o.Multiple="Multiple"})(r||(r={}));var m=function(o,e,t,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,e,t,n);else for(var a=o.length-1;a>=0;a--)(l=o[a])&&(i=(s<3?l(i):s>3?l(e,t,i):l(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i};let d=class extends A{constructor(){super(...arguments),this.mode="Multiple",this.selected="",this.identifier="TableSelection",this._rowsLength=0}onTableActivate(e){this._table=e,this._invalidateTableAndRows()}onExitDOM(){this.mode=r.None,this._invalidateTableAndRows(),this._table=void 0}onBeforeRendering(){this._invalidateTableAndRows()}onTableBeforeRendering(){this.isMultiSelectable()&&this._table&&this._table.headerRow[0]&&this._rowsLength!==this._table.rows.length&&(this._rowsLength=this._table.rows.length,this._table.headerRow[0]._invalidate++)}isSelectable(){return this.mode!==r.None}isMultiSelectable(){return this.mode===r.Multiple}isRowSelectorRequired(){return this.mode!==r.None}getRowKey(e){return e.rowKey||""}isSelected(e){if(!this._table||!this.isSelectable())return!1;if(e.isHeaderRow())return this.areAllRowsSelected();const t=this.getRowKey(e);return this.selectedAsArray.includes(t)}hasSelectedRow(){if(!this._table||!this.isSelectable())return!1;const e=this.selectedAsArray;return this._table.rows.some(t=>{const n=this.getRowKey(t);return e.includes(n)})}areAllRowsSelected(){if(!this._table||!this._table.rows.length||this.mode!==r.Multiple)return!1;const e=this.selectedAsArray;return this._table.rows.every(t=>{const n=this.getRowKey(t);return e.includes(n)})}setSelected(e,t,n=!1){var s;(s=this._rangeSelection)!=null&&s.isMouse&&this._rangeSelection.shiftPressed||(e.isHeaderRow()?this._selectHeaderRow(t):this._selectRow(e,t),n&&this.fireDecoratorEvent("change"))}get selectedAsArray(){return this.selected.split(" ").filter(String)}set selectedAsArray(e){this.selected=e.filter(String).join(" ")}get selectedAsSet(){return new Set(this.selectedAsArray)}set selectedAsSet(e){this.selectedAsArray=[...e]}_selectRow(e,t){const n=this.getRowKey(e);if(this.mode===r.Multiple){const s=this.selectedAsSet;s[t?"add":"delete"](n),this.selectedAsSet=s}else this.selected=t?n:""}_selectHeaderRow(e){const t=this.selectedAsSet;this._table.rows.forEach(n=>{const s=this.getRowKey(n);t[e?"add":"delete"](s)}),this.selectedAsSet=t}_invalidateTableAndRows(){this._table&&(this.isSelectable()?this.isMultiSelectable()||(this.selected=this.selectedAsArray.shift()||""):this.selected="",this._table._invalidate++,this._table.headerRow[0]._invalidate++,this._table.rows.forEach(e=>e._invalidate++))}_onkeydown(e){var n;if(!this.isMultiSelectable()||!this._table||!e.shiftKey)return;const t=T();if(!(t!=null&&t.hasAttribute("ui5-table-row")||(n=this._rangeSelection)!=null&&n.isMouse||t!=null&&t.hasAttribute("ui5-growing-row"))){this._stopRangeSelection();return}if(!this._rangeSelection)this._startRangeSelection(t);else if(e.key==="ArrowUp"||e.key==="ArrowDown"){const s=R(e)?-1:1;this._handleRangeSelection(t,s)}this._rangeSelection&&(this._rangeSelection.shiftPressed=e.shiftKey)}_onkeyup(e,t){this._table&&((!t.hasAttribute("ui5-table-row")||!this._rangeSelection||!e.shiftKey)&&this._stopRangeSelection(),this._rangeSelection&&(this._rangeSelection.shiftPressed=e.shiftKey))}_onclick(e){var n,s,i;if(!this._table)return;if(C(e)){this._stopRangeSelection();return}if(!K(e)){this._stopRangeSelection();return}const t=D(e.composedPath());if(e.shiftKey&&((n=this._rangeSelection)!=null&&n.isMouse)){const l=this._rangeSelection.rows[0],a=this._table.rows.indexOf(l),h=this._table.rows.indexOf(t);if((i=(s=t.shadowRoot)==null?void 0:s.querySelector("#selection-component"))==null||i.toggleAttribute("checked",!0),a===-1||h===-1||t.rowKey===l.rowKey||t.rowKey===this._rangeSelection.rows[this._rangeSelection.rows.length-1].rowKey)return;const p=h-a;this._handleRangeSelection(t,p)}else t&&this._startRangeSelection(t,!0)}_startRangeSelection(e,t=!1){const n=this.isSelected(e);t&&!n||(this._rangeSelection={selected:n,isUp:null,rows:[e],isMouse:t,shiftPressed:!1})}_handleRangeSelection(e,t){var l,a;if(!this._rangeSelection)return;const n=t>0;(l=this._rangeSelection).isUp??(l.isUp=n);const s=n!==this._rangeSelection.isUp&&!this._rangeSelection.isMouse;let i=s&&this.isSelected(e);if(s)this._reverseRangeSelection();else{const h=this._table.rows.indexOf(e),[p,S]=[h,h-t].sort((f,c)=>f-c);i=((a=this._table)==null?void 0:a.rows.slice(p,S+1).reduce((f,c)=>{var b,_;const w=!((b=this._rangeSelection)!=null&&b.rows.includes(c)),y=this.isSelected(c)!==this._rangeSelection.selected;return w&&((_=this._rangeSelection)==null||_.rows.push(c)),this._selectRow(c,this._rangeSelection.selected),f||y},i))||!1}i&&this.fireDecoratorEvent("change")}_stopRangeSelection(){this._rangeSelection=null}_reverseRangeSelection(){var t,n;const e=(t=this._rangeSelection)==null?void 0:t.rows.pop();e&&this._selectRow(e,!1),((n=this._rangeSelection)==null?void 0:n.rows.length)===1&&(this._rangeSelection.isUp=null)}};m([g()],d.prototype,"mode",void 0);m([g()],d.prototype,"selected",void 0);d=m([v({tag:"ui5-table-selection"}),M("change",{bubbles:!0})],d);d.define();const u=N("ui5-table-selection",["mode","selected"],[],[],["change"]);u.displayName="TableSelection";try{u.displayName="TableSelection",u.__docgenInfo={description:'The `TableSelection` component is used inside the `Table` to add key-based selection capabilities to the `Table`.\n\nThe component offers three selection modes:\n* Single - select a single row.\n* Multiple - select multiple rows.\n* None - no selection active.\n\nAs the selection is key-based, `TableRow` components need to define a unique `row-key` property.\n\n### Usage\n\nThe `TableSelection` component is only used inside the `Table` component as a feature.\nIt has to be slotted inside the `Table` in the `features` slot.\nThe component is not intended to be used as a standalone component.\n\n```html\n<Table>\n	<TableSelection mode="Multiple" slot="features"></TableSelection>\n</Table>\n```\n\n\n\n__Note__: This is a UI5 Web Component! [Repository](https://github.com/SAP/ui5-webcomponents) | [Documentation](https://sap.github.io/ui5-webcomponents/)',displayName:"TableSelection",props:{onChange:{defaultValue:null,description:`Fired when the selection is changed by user interaction.

| cancelable | bubbles |
| :--------: | :-----: |
| ❌|✅|`,name:"onChange",required:!1,type:{name:"(event: Ui5CustomEvent<TableSelectionDomRef, never>) => void"}},mode:{defaultValue:{value:'"Multiple"'},description:"Defines the selection mode.",name:"mode",required:!1,type:{name:"enum",value:[{value:'"None"'},{value:'"Single"'},{value:'"Multiple"'},{value:'"None"'},{value:'"Single"'},{value:'"Multiple"'}]}},selected:{defaultValue:null,description:"Defines the selected rows separated by a space.",name:"selected",required:!1,type:{name:"string"}},className:{defaultValue:null,description:`CSS Class Name which will be appended to the most outer element of a component.
Use this prop carefully, overwriting CSS rules might break the component.`,name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:`Element style which will be appended to the most outer element of a component.
Use this prop carefully, some css properties might break the component.`,name:"style",required:!1,type:{name:"CSSProperties"}},waitForDefine:{defaultValue:null,description:`Defines whether the component should wait for the underlying custom element of the web component to be defined. This can be useful, for example, for using instance methods when mounting the component.

__Note:__ This adds a rendering cycle to your component.`,name:"waitForDefine",required:!1,type:{name:"boolean"}}}}}catch{}try{u.displayName="TableSelection",u.__docgenInfo={description:'The `TableSelection` component is used inside the `Table` to add key-based selection capabilities to the `Table`.\n\nThe component offers three selection modes:\n* Single - select a single row.\n* Multiple - select multiple rows.\n* None - no selection active.\n\nAs the selection is key-based, `TableRow` components need to define a unique `row-key` property.\n\n### Usage\n\nThe `TableSelection` component is only used inside the `Table` component as a feature.\nIt has to be slotted inside the `Table` in the `features` slot.\nThe component is not intended to be used as a standalone component.\n\n```html\n<Table>\n	<TableSelection mode="Multiple" slot="features"></TableSelection>\n</Table>\n```\n\n\n\n__Note__: This is a UI5 Web Component! [Repository](https://github.com/SAP/ui5-webcomponents) | [Documentation](https://sap.github.io/ui5-webcomponents/)',displayName:"TableSelection",props:{onChange:{defaultValue:null,description:`Fired when the selection is changed by user interaction.

| cancelable | bubbles |
| :--------: | :-----: |
| ❌|✅|`,name:"onChange",required:!1,type:{name:"(event: Ui5CustomEvent<TableSelectionDomRef, never>) => void"}},mode:{defaultValue:{value:'"Multiple"'},description:"Defines the selection mode.",name:"mode",required:!1,type:{name:"enum",value:[{value:'"None"'},{value:'"Single"'},{value:'"Multiple"'},{value:'"None"'},{value:'"Single"'},{value:'"Multiple"'}]}},selected:{defaultValue:null,description:"Defines the selected rows separated by a space.",name:"selected",required:!1,type:{name:"string"}},className:{defaultValue:null,description:`CSS Class Name which will be appended to the most outer element of a component.
Use this prop carefully, overwriting CSS rules might break the component.`,name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:`Element style which will be appended to the most outer element of a component.
Use this prop carefully, some css properties might break the component.`,name:"style",required:!1,type:{name:"CSSProperties"}},waitForDefine:{defaultValue:null,description:`Defines whether the component should wait for the underlying custom element of the web component to be defined. This can be useful, for example, for using instance methods when mounting the component.

__Note:__ This adds a rendering cycle to your component.`,name:"waitForDefine",required:!1,type:{name:"boolean"}}}}}catch{}export{u as T,r as a};
