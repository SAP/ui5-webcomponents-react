import{j as s}from"./jsx-runtime-CLpGMVip.js";import{T as m}from"./ThemingParameters-le4wpk1U.js";import{e as W}from"./index-BQ73vKGB.js";import{r as $}from"./index-D23YZj_x.js";import{u as ut,t as pt,a as Ct,b as At,c as ft,C as mt,e as E}from"./staticProps-DbLN80P8.js";import{u as kt,a as vt,C as bt,Y as L,b as w,X as Y,c as z}from"./YAxisTicks-CTC2a3e-.js";import{u as jt,C as B}from"./ChartDataLabel-DVXAZXXO.js";import{u as Lt}from"./useLongestYAxisLabel-Cxh95VXP.js";import{u as wt}from"./useOnClickInternal-Bzi6oxFd.js";import{u as Yt,a as zt,r as _t,b as H}from"./useTooltipFormatter-DNM1YWF4.js";import{n as Kt,R as Pt,T as Tt,o as It,k as Dt,p as Ft,q as Ot,B as Vt}from"./ChartContainer-RB7fR5di.js";import{C as St}from"./react-content-loader.es-CXkD-qGt.js";import{C as Rt,A as Wt}from"./ComposedChart-DxK6Tvh4.js";import{L as $t}from"./Line-Bubopl0Z.js";import{h as Bt}from"./withWebComponent-DfVDXLfc.js";import{u as Ht}from"./useIsRTL-CAvJaecp.js";const Et=s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"20",y:"20",width:"85",height:"15"}),s.jsx("rect",{x:"20",y:"40",width:"117",height:"15"}),s.jsx("rect",{x:"20",y:"60",width:"67",height:"15"}),s.jsx("rect",{x:"20",y:"80",width:"75",height:"15"}),s.jsx("rect",{x:"20",y:"100",width:"125",height:"15"}),s.jsx("rect",{x:"20",y:"120",width:"60",height:"15"})]}),Mt=s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"20",y:"50",width:"15",height:"85"}),s.jsx("rect",{x:"40",y:"18",width:"15",height:"117"}),s.jsx("rect",{x:"60",y:"68",width:"15",height:"67"}),s.jsx("rect",{x:"80",y:"60",width:"15",height:"75"}),s.jsx("rect",{x:"100",y:"10",width:"15",height:"125"}),s.jsx("rect",{x:"120",y:"75",width:"15",height:"60"})]}),Xt=s.jsx(s.Fragment,{children:s.jsx("path",{d:"M20 20 L75 40 L85 60 L125 80 L105 100 L90 120 L55 135 L92 120 L107 100 L127 80 L87 60 L77 40 L22 20 Z",fill:"none",strokeWidth:"2"})}),Nt=s.jsx(s.Fragment,{children:s.jsx("path",{d:"M20 135 L40 80 L60 70 L80 30 L100 50 L120 65 L135 100 L120 67 L100 52 L80 32 L60 72 L40 82 L20 137 Z",fill:"none",strokeWidth:"2"})}),Zt=({layout:c,measures:k})=>{const d=new Set(k.map(v=>v.type));return s.jsxs(St,{viewBox:"0 0 165 145",preserveAspectRatio:"xMidYMid meet",width:"100%",height:"100%",speed:2,backgroundColor:m.sapContent_ImagePlaceholderBackground,foregroundColor:m.sapContent_ImagePlaceholderForegroundColor,backgroundOpacity:m.sapContent_DisabledOpacity,children:[c==="vertical"&&s.jsx("rect",{x:"20",y:"10",width:"1",height:"135"}),c==="horizontal"&&s.jsx("rect",{x:"10",y:"135",width:"135",height:"1"}),c==="vertical"&&d.has("bar")&&Et,c==="horizontal"&&d.has("bar")&&Mt,c==="vertical"&&(d.has("line")||d.has("area"))&&Xt,c==="horizontal"&&(d.has("line")||d.has("area"))&&Nt]})},qt={formatter:E},Gt={formatter:E,opacity:1},Ut={line:$t,bar:Vt,area:Wt},Jt=$.forwardRef((c,k)=>{var D,F,O;const{loading:d,loadingDelay:v,dataset:h,onDataPointClick:C,noLegend:M,noAnimation:X,tooltipConfig:A,onLegendClick:N,onClick:_,layout:e="horizontal",style:Z,className:q,slot:G,syncId:U,ChartPlaceholder:J,children:Q,...tt}=c,[st,K]=Bt(k),o={yAxisLabelsVisible:!0,yAxisVisible:!1,xAxisVisible:!0,gridStroke:m.sapList_BorderColor,gridHorizontal:!0,gridVertical:!1,legendPosition:"bottom",legendHorizontalAlign:"left",zoomingTool:!1,resizeDebounce:250,yAxisWidth:null,yAxisConfig:{},xAxisConfig:{},secondYAxisConfig:{},secondXAxisConfig:{},...c.chartConfig},{referenceLine:a}=o,{dimensions:b,measures:l}=Yt(c.dimensions,c.measures,qt,Gt),ot=zt(l),x=b[0],{primaryMeasure:u,secondaryMeasure:P}=_t(l,(D=o==null?void 0:o.secondYAxis)==null?void 0:D.dataKey),it=jt(x),at=l.map(({accessor:t})=>t),y=o.secondYAxis?at.findIndex(t=>{var r;return t===((r=o.secondYAxis)==null?void 0:r.dataKey)}):0,rt=t=>({payload:r})=>mt.getValueByDataKey(r,t),j=(t,r,g)=>{if(typeof C=="function")if(typeof r=="number"){const i=Array.isArray(t==null?void 0:t.value);C(W(g,{value:i?t.value[1]-t.value[0]:t.value,dataIndex:t.index??r,dataKey:i?Object.keys(t).filter(n=>t.value.length?t[n]===t.value[1]-t.value[0]:t[n]===t.value&&n!=="value")[0]:t.dataKey??Object.keys(t).find(n=>t[n]&&t[n]===t.value&&n!=="value"),payload:t.payload}))}else C(W({},{value:Array.isArray(r.value)?r.value[1]-r.value[0]:r.value,dataKey:r.dataKey,dataIndex:r.index,payload:r.payload}))},et=ut(N),ct=wt(_),f=(h==null?void 0:h.length)>30,nt=x==null?void 0:x.accessor,[T,lt]=Lt(h,e==="vertical"?b:l,o.legendPosition),dt=kt(o.margin,o.zoomingTool),ht=vt(K,e==="vertical"?1:c.dimensions.length),I={axisLine:o.yAxisVisible,tickLine:pt,tickFormatter:u==null?void 0:u.formatter,interval:0},xt=$.useCallback(()=>s.jsx(Zt,{layout:e,measures:l}),[e,l]),{chartConfig:Qt,dimensions:ts,measures:ss,...gt}=tt,p=Ht(K);return s.jsx(Kt,{ref:st,loading:d,loadingDelay:v,dataset:h,Placeholder:J??xt,style:Z,className:q,slot:G,resizeDebounce:o.resizeDebounce,...gt,children:s.jsxs(Rt,{syncId:U,onClick:ct,stackOffset:"sign",margin:dt,data:h,layout:e,accessibilityLayer:o.accessibilityLayer,className:typeof C=="function"||typeof _=="function"?"has-click-handler":void 0,children:[s.jsx(bt,{vertical:o.gridVertical,horizontal:o.gridHorizontal,stroke:o.gridStroke}),b.map((t,r)=>{let g;const i={dataKey:t.accessor,interval:(t==null?void 0:t.interval)??(f?"preserveStart":0),tickLine:r<1,axisLine:r<1,allowDuplicatedCategory:r===0};return e==="vertical"?(i.type="category",i.visible=!1,i.hide=!o.yAxisVisible,i.tick=s.jsx(w,{config:t}),i.yAxisId=r,i.width=o.yAxisWidth??T,g=L,i.orientation=p?"right":"left"):(i.dataKey=t.accessor,i.tick=s.jsx(z,{config:t}),i.hide=!o.xAxisVisible,i.xAxisId=r,i.height=ht[r],g=Y,i.reversed=p),s.jsx(g,{...i},t.reactKey)}),e==="horizontal"&&s.jsx(L,{...I,yAxisId:"primary",width:o.yAxisWidth??T,orientation:p?"right":"left",tick:o.yAxisLabelsVisible?s.jsx(w,{config:u}):!1,...o.yAxisConfig}),e==="vertical"&&s.jsx(Y,{...I,reversed:p,xAxisId:"primary",type:"number",tick:s.jsx(z,{config:u}),...o.xAxisConfig}),((F=o.secondYAxis)==null?void 0:F.dataKey)&&e==="horizontal"&&s.jsx(L,{dataKey:o.secondYAxis.dataKey,axisLine:{stroke:o.secondYAxis.color??`var(--sapChart_OrderedColor_${y%12+1})`},tick:s.jsx(w,{config:P,secondYAxisConfig:{color:o.secondYAxis.color??`var(--sapChart_OrderedColor_${y%12+1})`}}),tickLine:{stroke:o.secondYAxis.color??`var(--sapChart_OrderedColor_${y%12+1})`},label:{value:o.secondYAxis.name,offset:2,angle:90,position:"center"},orientation:p?"left":"right",interval:0,yAxisId:"secondary",...o.secondYAxisConfig}),((O=o.secondYAxis)==null?void 0:O.dataKey)&&e==="vertical"&&s.jsx(Y,{dataKey:o.secondYAxis.dataKey,axisLine:{stroke:o.secondYAxis.color??`var(--sapChart_OrderedColor_${y%12+1})`},tick:s.jsx(z,{config:P,secondYAxisConfig:{color:o.secondYAxis.color??`var(--sapChart_OrderedColor_${y%12+1})`}}),tickLine:{stroke:o.secondYAxis.color??`var(--sapChart_OrderedColor_${y%12+1})`},label:{value:o.secondYAxis.name,offset:2,angle:90,position:"center"},orientation:"top",interval:0,xAxisId:"secondary",type:"number",...o.secondXAxisConfig}),a&&s.jsx(Pt,{...a,stroke:(a==null?void 0:a.color)??(a==null?void 0:a.stroke),y:a!=null&&a.value?e==="horizontal"?a==null?void 0:a.value:void 0:a==null?void 0:a.y,x:a!=null&&a.value?e==="vertical"?a==null?void 0:a.value:void 0:a==null?void 0:a.x,yAxisId:(a==null?void 0:a.yAxisId)??e==="horizontal"?"primary":void 0,xAxisId:(a==null?void 0:a.xAxisId)??e==="vertical"?"primary":void 0,label:a==null?void 0:a.label}),(A==null?void 0:A.active)!==!1&&s.jsx(Tt,{cursor:Ct,formatter:ot,contentStyle:At,labelFormatter:it,...A}),!M&&s.jsx(It,{verticalAlign:o.legendPosition,align:o.legendHorizontalAlign,onClick:et,wrapperStyle:lt,...o.legendConfig}),l==null?void 0:l.map((t,r)=>{var V,S;const g=Ut[t.type],i={isAnimationActive:!X};let n="top";switch(t.type){case"line":i.activeDot={onClick:j},i.strokeWidth=t.width,i.strokeOpacity=t.opacity,i.dot=t.showDot??!f;break;case"bar":i.hide=t.hide,i.fillOpacity=t.opacity,i.strokeOpacity=t.opacity,i.barSize=t.width,i.onClick=j,i.stackId=t.stackId??void 0,i.labelPosition=t.stackId?"insideTop":"top",e==="vertical"?n="insideRight":n="insideTop";break;case"area":i.dot=!f,i.fillOpacity=.3,i.strokeOpacity=t.opacity,i.strokeWidth=t.width,i.activeDot={onClick:j};break}return e==="vertical"?i.xAxisId=((V=o.secondYAxis)==null?void 0:V.dataKey)===t.accessor?"secondary":"primary":i.yAxisId=((S=o.secondYAxis)==null?void 0:S.dataKey)===t.accessor?"secondary":"primary",s.jsx(g,{name:t.label??t.accessor,label:t.type==="bar"||f?void 0:s.jsx(B,{config:t,chartType:t.type,position:n}),stroke:t.color??`var(--sapChart_OrderedColor_${r%12+1})`,fill:t.color??`var(--sapChart_OrderedColor_${r%12+1})`,type:"monotone",dataKey:t.accessor,...i,children:t.type==="bar"&&s.jsxs(s.Fragment,{children:[s.jsx(Dt,{data:h,valueAccessor:rt(t.accessor),content:s.jsx(B,{config:t,chartType:"column",position:"insideTop"})}),h.map((R,yt)=>s.jsx(Ft,{fill:H(t,R,r),stroke:H(t,R,r)},yt))]})},t.reactKey)}),!!o.zoomingTool&&s.jsx(Ot,{dataKey:nt,tickFormatter:x==null?void 0:x.formatter,...ft,...typeof o.zoomingTool=="object"?o.zoomingTool:{}}),Q]})})});Jt.displayName="ComposedChart";export{Jt as C};
