import{j as p,c as _,F as M,p as u,d as y,s as a,m as C,e as z,I as D,q as L,w as W}from"./withWebComponent-DfVDXLfc.js";import{d as j}from"./slot-_4yKMUwC.js";import{l as A}from"./event-strict-DgQLNDEV.js";import{f as P}from"./ResizeHandler-DlOwLzX7.js";import{A as $}from"./AccessibilityTextsHelper-CSnJP9TL.js";import"./overflow-CoFnpJEV.js";import{i as V}from"./i18n-DEVDpFvK.js";import"./utils-C9_9ShpY.js";import{bP as x}from"./i18n-defaults-Cyg2J0QB.js";import{a as O}from"./Button-Bn6Q5CAy.js";import{d as q}from"./Popover-D2H5tr2x.js";import{i as F}from"./overflow-C57CDQ5m.js";import{d as T}from"./parameters-bundle.css-BzaqQttB.js";import{m as H,d as S}from"./useIsomorphicLayoutEffect-Clyi7m9u.js";var w;(function(s){s.Default="Default",s.NeverOverflow="NeverOverflow",s.AlwaysOverflow="AlwaysOverflow"})(w||(w={}));const b=w;function k(){return p(q,{class:"ui5-overflow-popover",placement:"Bottom",horizontalAlign:"End",onClose:this.onOverflowPopoverClosed,onOpen:this.onOverflowPopoverOpened,hideArrow:!0,children:p("div",{class:{"ui5-overflow-list":!0,"ui5-overflow-list--alignleft":this.hasItemWithText},children:this.overflowItems.map(s=>s.toolbarPopoverTemplate.call(s.context))})})}function G(){return _(M,{children:[_("div",{class:{"ui5-tb-items":!0,"ui5-tb-items-full-width":this.hasFlexibleSpacers},role:this.accInfo.root.role,"aria-label":this.accInfo.root.accessibleName,children:[this.standardItems.map(s=>s.toolbarTemplate.call(s.context)),p(O,{"aria-hidden":this.hideOverflowButton,icon:F,design:"Transparent",class:{"ui5-tb-item":!0,"ui5-tb-overflow-btn":!0,"ui5-tb-overflow-btn-hidden":this.hideOverflowButton},tooltip:this.accInfo.overflowButton.tooltip,accessibleName:this.accInfo.overflowButton.accessibleName,accessibilityAttributes:this.accInfo.overflowButton.accessibilityAttributes})]}),k.call(this)]})}u("@ui5/webcomponents-theming","sap_horizon",async()=>y);u("@ui5/webcomponents","sap_horizon",async()=>T);const U=`:host(:not([hidden])){width:100%;height:var(--_ui5-v2-6-2-toolbar-height);display:flex;align-items:center;justify-content:flex-end;box-sizing:border-box;border-bottom:.0625rem solid var(--sapGroup_ContentBorderColor);padding:0 var(--_ui5-v2-6-2-toolbar-padding-left) 0 var(--_ui5-v2-6-2-toolbar-padding-right);background-color:var(--sapList_HeaderBackground)}:host([align-content="Start"]){justify-content:flex-start}.ui5-tb-items{width:100%;height:100%;display:inherit;align-items:inherit;justify-content:inherit;gap:var(--_ui5-v2-6-2-toolbar-items-gap)}.ui5-tb-items-full-width{width:100%}.ui5-tb-item{flex-shrink:0}.ui5-tb-separator{height:var(--_ui5-v2-6-2-toolbar-separator-height);width:.0625rem;background:var(--sapToolbar_SeparatorColor);box-sizing:border-box}.ui5-tb-overflow-btn-hidden{visibility:hidden;position:absolute}:host([design="Transparent"]){background-color:transparent}
`;u("@ui5/webcomponents-theming","sap_horizon",async()=>y);u("@ui5/webcomponents","sap_horizon",async()=>T);const J=`.ui5-overflow-popover::part(content){padding:var(--_ui5-v2-6-2_toolbar_overflow_padding)}.ui5-overflow-list{display:flex;flex-direction:column;justify-content:center;align-items:center}.ui5-tb-popover-item{width:100%}.ui5-tb-popover-item:not(:last-child){margin-bottom:.25rem}.ui5-tb-separator-in-overflow{display:none;height:.0625rem;background:var(--sapToolbar_SeparatorColor);box-sizing:border-box}.ui5-tb-separator-in-overflow[visible]{display:block}
`,v=H("ToolbarItem.registry",new Map),K=s=>{v.set(s.getMetadata().getPureTag(),s)},Q=s=>{if(!v.has(s))throw new Error(`No template found for ${s}`);return v.get(s)},X=()=>[...v.values()].map(s=>s.styles);var f=function(s,e,t,o){var r=arguments.length,i=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(s,e,t,o);else for(var l=s.length-1;l>=0;l--)(n=s[l])&&(i=(r<3?n(i):r>3?n(e,t,i):n(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i},m;function R(s,e){return Number(s.getPropertyValue(e).replace("rem",""))*parseInt(getComputedStyle(document.body).getPropertyValue("font-size"))}function B(s,e){return Number(s.getPropertyValue(e).replace("px",""))}let h=m=class extends D{static get styles(){const e=X();return[U,J,...e]}constructor(){super(),this.alignContent="End",this.reverseOverflow=!1,this.design="Solid",this.itemsToOverflow=[],this.itemsWidth=0,this.minContentWidth=0,this.popoverOpen=!1,this.itemsWidthMeasured=!1,this.ITEMS_WIDTH_MAP=new Map,this._onResize=this.onResize.bind(this),this._onInteract=e=>this.onInteract(e)}get overflowButtonSize(){var e;return((e=this.overflowButtonDOM)==null?void 0:e.getBoundingClientRect().width)||0}get padding(){const e=getComputedStyle(this.getDomRef());return R(e,S("--_ui5-toolbar-padding-left"))+R(e,S("--_ui5-toolbar-padding-right"))}get subscribedEvents(){return this.items.map(e=>Array.from(e.subscribedEvents.keys())).flat().filter((e,t,o)=>o.indexOf(e)===t)}get alwaysOverflowItems(){return this.items.filter(e=>e.overflowPriority===b.AlwaysOverflow)}get movableItems(){return this.items.filter(e=>e.overflowPriority!==b.AlwaysOverflow&&e.overflowPriority!==b.NeverOverflow)}get overflowItems(){const e=this.getItemsInfo(this.itemsToOverflow.filter(t=>!t.ignoreSpace));return this.reverseOverflow?e.reverse():e}get standardItems(){return this.getItemsInfo(this.items.filter(e=>this.itemsToOverflow.indexOf(e)===-1))}get hideOverflowButton(){return this.itemsToOverflow.filter(e=>!(e.ignoreSpace||e.isSeparator)).length===0}get interactiveItemsCount(){return this.items.filter(e=>e.isInteractive).length}get hasAriaSemantics(){return this.interactiveItemsCount>1}get accessibleRole(){return this.hasAriaSemantics?"toolbar":void 0}get ariaLabelText(){return this.hasAriaSemantics?$(this):void 0}get accInfo(){var e;return{root:{role:this.accessibleRole,accessibleName:this.ariaLabelText},overflowButton:{accessibleName:m.i18nBundle.getText(x),tooltip:m.i18nBundle.getText(x),accessibilityAttributes:{expanded:(e=this.overflowButtonDOM)==null?void 0:e.accessibilityAttributes.expanded,hasPopup:"menu"}}}}get overflowButtonDOM(){return this.shadowRoot.querySelector(".ui5-tb-overflow-btn")}get itemsDOM(){return this.shadowRoot.querySelector(".ui5-tb-items")}get hasItemWithText(){return this.itemsToOverflow.some(e=>e.containsText)}get hasFlexibleSpacers(){return this.items.some(e=>e.hasFlexibleWidth)}onEnterDOM(){P.register(this,this._onResize)}onExitDOM(){P.deregister(this,this._onResize)}onInvalidation(e){e.reason==="childchange"&&e.child===this.itemsToOverflow[0]&&this.onToolbarItemChange()}onBeforeRendering(){this.detachListeners(),this.attachListeners(),this.preprocessItems()}async onAfterRendering(){await L(),this.storeItemsWidth(),this.processOverflowLayout()}isOverflowOpen(){return this.getOverflowPopover().open}openOverflow(){const e=this.getOverflowPopover();e.opener=this.overflowButtonDOM,e.open=!0,this.reverseOverflow=e.actualPlacement==="Top"}closeOverflow(){const e=this.getOverflowPopover();e.open=!1}toggleOverflow(){this.popoverOpen?this.closeOverflow():this.openOverflow()}getOverflowPopover(){return this.shadowRoot.querySelector(".ui5-overflow-popover")}processOverflowLayout(){const e=this.offsetWidth-this.padding,t=this.itemsWidth;let o=t-e+this.overflowButtonSize;t<=e&&(o=0),!(this.width===e&&this.contentWidth===t)&&(this.distributeItems(o),this.width=e,this.contentWidth=t)}storeItemsWidth(){let e=0,t=0;if(this.items.forEach(o=>{const r=this.getItemWidth(o);e+=r,o.overflowPriority===b.NeverOverflow&&(t+=r),this.ITEMS_WIDTH_MAP.set(o._id,r)}),t!==this.minContentWidth){const o=this.offsetWidth-this.getDomRef().offsetWidth;this.fireDecoratorEvent("_min-content-width-change",{minWidth:t+o+this.overflowButtonSize})}this.itemsWidth=e,this.minContentWidth=t}distributeItems(e=0){const t=this.movableItems.reverse();let o=0,r=t[o];for(this.itemsToOverflow=[],this.distributeItemsThatAlwaysOverflow();e>0&&r;)this.itemsToOverflow.unshift(r),e-=this.getCachedItemWidth(r==null?void 0:r._id)||0,o++,r=t[o];if(o<t.length){let i=t[o];for(;o<=t.length-1&&i.isSeparator;)this.itemsToOverflow.unshift(i),o++,i=t[o]}this.setSeperatorsVisibilityInOverflow()}distributeItemsThatAlwaysOverflow(){this.alwaysOverflowItems.forEach(e=>{this.itemsToOverflow.push(e)})}setSeperatorsVisibilityInOverflow(){this.itemsToOverflow.forEach((e,t,o)=>{e.isSeparator&&(e.visible=this.shouldShowSeparatorInOverflow(t,o))})}shouldShowSeparatorInOverflow(e,t){let o=!1,r=!1;return t.forEach((i,n)=>{n<e&&!i.isSeparator&&(o=!0),n>e&&!i.isSeparator&&(r=!0)}),o&&r}onOverflowPopoverClosed(){this.popoverOpen=!1,this.overflowButtonDOM&&(this.overflowButtonDOM.accessibilityAttributes.expanded=!1)}onBeforeClose(e){e.preventDefault()}onOverflowPopoverOpened(){this.popoverOpen=!0,this.overflowButtonDOM&&(this.overflowButtonDOM.accessibilityAttributes.expanded=!0)}onResize(){this.itemsWidth&&(this.closeOverflow(),this.processOverflowLayout())}onInteract(e){e.stopImmediatePropagation();const t=e.target,o=t.closest(".ui5-tb-item")||t.closest(".ui5-tb-popover-item");if(t===this.overflowButtonDOM){this.toggleOverflow();return}if(!o)return;const r=t.getAttribute("data-ui5-external-action-item-id");if(r){const i=this.getItemByID(r),n=e.type,l=e.type.replace("ui5-",""),E=!(i!=null&&i.fireEvent(l,{...e.detail,targetRef:t})),g=(i==null?void 0:i.subscribedEvents.get(n))||(i==null?void 0:i.subscribedEvents.get(l));if(E||i!=null&&i.preventOverflowClosing||g!=null&&g.preventClosing)return;this.closeOverflow()}}attachListeners(){const e=this.getOverflowPopover();this.subscribedEvents.forEach(t=>{var o;(o=this.itemsDOM)==null||o.addEventListener(t,this._onInteract),e==null||e.addEventListener(t,this._onInteract)})}detachListeners(){const e=this.getOverflowPopover();this.subscribedEvents.forEach(t=>{var o;(o=this.itemsDOM)==null||o.removeEventListener(t,this._onInteract),e==null||e.removeEventListener(t,this._onInteract)})}onToolbarItemChange(){this.itemsToOverflow=[],this.contentWidth=0}getItemsInfo(e){return e.map(t=>{const o=t.constructor,r=Q(o.getMetadata().getPureTag());return r?{toolbarTemplate:r.toolbarTemplate,toolbarPopoverTemplate:r.toolbarPopoverTemplate,context:t}:null}).filter(t=>!!t)}getItemWidth(e){if(e.ignoreSpace||e.isSeparator)return 0;const t=e._id,o=this.getRegisteredToolbarItemByID(t);let r=0;if(o){const i=getComputedStyle(o);r=o.offsetWidth+B(i,"margin-inline-end")+B(i,"margin-inline-start")}else r=this.getCachedItemWidth(t)||0;return Math.ceil(r)}getCachedItemWidth(e){return this.ITEMS_WIDTH_MAP.get(e)}getItemByID(e){return this.items.find(t=>t._id===e)}getRegisteredToolbarItemByID(e){return this.itemsDOM.querySelector(`[data-ui5-external-action-item-id="${e}"]`)}preprocessItems(){this.items.forEach(e=>{e._getRealDomRef=()=>this.getDomRef().querySelector(`[data-ui5-stable*=${e.stableDomRef}]`)??this.getOverflowPopover().querySelector(`[data-ui5-stable*=${e.stableDomRef}]`)})}};f([a()],h.prototype,"alignContent",void 0);f([a({type:Number})],h.prototype,"width",void 0);f([a({type:Number})],h.prototype,"contentWidth",void 0);f([a({type:Boolean})],h.prototype,"reverseOverflow",void 0);f([a()],h.prototype,"accessibleName",void 0);f([a()],h.prototype,"accessibleNameRef",void 0);f([a()],h.prototype,"design",void 0);f([j({default:!0,type:HTMLElement,invalidateOnChildChange:!0})],h.prototype,"items",void 0);f([V("@ui5/webcomponents")],h,"i18nBundle",void 0);h=m=f([C({tag:"ui5-toolbar",languageAware:!0,renderer:z,template:G}),A("_min-content-width-change",{bubbles:!0})],h);h.define();const Y=W("ui5-toolbar",["accessibleName","accessibleNameRef","alignContent","design"],[],[],[]);Y.displayName="Toolbar";var N=function(s,e,t,o){var r=arguments.length,i=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(s,e,t,o);else for(var l=s.length-1;l>=0;l--)(n=s[l])&&(i=(r<3?n(i):r>3?n(e,t,i):n(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i};class I extends D{constructor(){super(...arguments),this.overflowPriority="Default",this.preventOverflowClosing=!1}get ignoreSpace(){return!1}get containsText(){return!1}get hasFlexibleWidth(){return!1}get isInteractive(){return!0}get isSeparator(){return!1}static get toolbarTemplate(){throw new Error("Template must be defined")}static get toolbarPopoverTemplate(){throw new Error("Popover template must be defined")}get subscribedEvents(){return new Map}get stableDomRef(){return this.getAttribute("stable-dom-ref")||`${this._id}-stable-dom-ref`}}N([a()],I.prototype,"overflowPriority",void 0);N([a({type:Boolean})],I.prototype,"preventOverflowClosing",void 0);function Z(){return p(O,{class:"ui5-tb-button ui5-tb-item",id:this.id,style:{width:this.width,display:this.hidden?"none":"inline-block"},icon:this.icon,endIcon:this.endIcon,tooltip:this.tooltip,accessibleName:this.accessibleName,accessibleNameRef:this.accessibleNameRef,accessibilityAttributes:this.accessibilityAttributes,design:this.design,disabled:this.disabled,hidden:this.hidden,"data-ui5-external-action-item-id":this._id,"data-ui5-stable":this.stableDomRef,children:this.text})}function ee(){return p(O,{icon:this.icon,endIcon:this.endIcon,accessibleName:this.accessibleName,accessibleNameRef:this.accessibleNameRef,accessibilityAttributes:this.accessibilityAttributes,tooltip:this.tooltip,design:this.design,disabled:this.disabled,hidden:this.hidden,class:"ui5-tb-popover-button ui5-tb-popover-item","data-ui5-external-action-item-id":this._id,"data-ui5-stable":this.stableDomRef,children:this.text})}u("@ui5/webcomponents-theming","sap_horizon",async()=>y);u("@ui5/webcomponents","sap_horizon",async()=>T);const te=`:not([icon-only]).ui5-tb-popover-button::part(button){justify-content:start}
`;var c=function(s,e,t,o){var r=arguments.length,i=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(s,e,t,o);else for(var l=s.length-1;l>=0;l--)(n=s[l])&&(i=(r<3?n(i):r>3?n(e,t,i):n(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i};let d=class extends I{constructor(){super(...arguments),this.disabled=!1,this.design="Default",this.accessibilityAttributes={}}get styles(){return{width:this.width,display:this.hidden?"none":"inline-block"}}get containsText(){return!0}static get toolbarTemplate(){return Z}static get toolbarPopoverTemplate(){return ee}get subscribedEvents(){const e=new Map;return e.set("click",{preventClosing:!1}),e}};c([a({type:Boolean})],d.prototype,"disabled",void 0);c([a()],d.prototype,"design",void 0);c([a()],d.prototype,"icon",void 0);c([a()],d.prototype,"endIcon",void 0);c([a()],d.prototype,"tooltip",void 0);c([a()],d.prototype,"accessibleName",void 0);c([a()],d.prototype,"accessibleNameRef",void 0);c([a({type:Object})],d.prototype,"accessibilityAttributes",void 0);c([a()],d.prototype,"text",void 0);c([a()],d.prototype,"width",void 0);d=c([C({tag:"ui5-toolbar-button",styles:te}),A("click",{bubbles:!0,cancelable:!0})],d);K(d);d.define();const oe=W("ui5-toolbar-button",["accessibilityAttributes","accessibleName","accessibleNameRef","design","endIcon","icon","overflowPriority","text","tooltip","width"],["disabled","preventOverflowClosing"],[],["click"]);oe.displayName="ToolbarButton";export{oe as T,Y as a,b,I as c,K as r};
