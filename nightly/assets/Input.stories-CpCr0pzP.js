import{j as u}from"./useIsomorphicLayoutEffect-DCJrFAVs.js";import{s as w}from"./utils-BHgxP_Sc.js";import{f as y}from"./i18nBundle-CyjtwURt.js";import{f as A,I as G}from"./Input-DpC8OHMb.js";import{f as b}from"./List-B4HlHID8.js";import P from"./SuggestionItem-CRU07sD5.js";import{b as C}from"./Button-Bn9nox5u.js";import{I as O}from"./Icon-Bjam5y2n.js";import{Z as F,w as $}from"./i18n-defaults-BuF9xM0k.js";import{b as D,a as I,S as l}from"./index-NOneBA7d.js";import{o as E}from"./ValueState-Bg0UWejw.js";import{e as R}from"./employee-DSGfa6j4.js";import{I as j}from"./index-DZ_C2PQH.js";import{I as T}from"./index-BeFV5MiT.js";const N=r=>r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");function g(r,e,t,s){return r.replaceAll(new RegExp(N(e),`${s?"i":""}g`),t)}function L(r,e){if(!r||!e)return r;const t=o=>{const[c,d]=o.split("");for(;r.indexOf(o)>=0||e.indexOf(o)>=0;)o=`${c}${o}${d}`;return o},s=t("12"),n=t("34");let i=A(g(r,e,o=>`${s}${o}${n}`,!0));return[[s,"<b>"],[n,"</b>"]].forEach(([o,c])=>{i=g(i,o,c,!1)}),i}class a{constructor(e,t,s,n){this.component=e,this.slotName=t,this.handleFocus=n,this.highlight=s,this.selectedItemIndex=-1}onUp(e){return e.preventDefault(),this._handleItemNavigation(!1),!0}onDown(e){return e.preventDefault(),this._handleItemNavigation(!0),!0}onSpace(e){return this._isItemOnTarget()?(e.preventDefault(),this.onItemSelected(this._selectedItem,!0),!0):!1}onEnter(e){return this._isGroupItem?(e.preventDefault(),!1):this._isItemOnTarget()?(this.onItemSelected(this._selectedItem,!0),!0):!1}onPageUp(e){e.preventDefault();const t=this.selectedItemIndex-10>-1;return this._hasValueState&&!t?(this._focusValueState(),!0):(this._moveItemSelection(this.selectedItemIndex,t?this.selectedItemIndex-=10:this.selectedItemIndex=0),!0)}onPageDown(e){e.preventDefault();const t=this._getItems(),s=t.length-1,n=this.selectedItemIndex+10<=s;return this._hasValueState&&!t?(this._focusValueState(),!0):(this._moveItemSelection(this.selectedItemIndex,n?this.selectedItemIndex+=10:this.selectedItemIndex=s),!0)}onHome(e){return e.preventDefault(),this._hasValueState?(this._focusValueState(),!0):(this._moveItemSelection(this.selectedItemIndex,this.selectedItemIndex=0),!0)}onEnd(e){e.preventDefault();const t=this._getItems().length-1;return this._hasValueState&&!t?(this._focusValueState(),!0):(this._moveItemSelection(this.selectedItemIndex,this.selectedItemIndex=t),!0)}onTab(){return this._isItemOnTarget()?(this.onItemSelected(this._selectedItem,!0),!0):!1}toggle(e,t){(e!==void 0?e:!this.isOpened())?this._getComponent().open=!0:this.close(t.preventFocusRestore)}get _selectedItem(){return this._getNonGroupItems().find(e=>e.selected)}_isScrollable(){const e=this._getScrollContainer();return e.offsetHeight<e.scrollHeight}close(e=!1){const t=this._getItems()&&this._getItems()[this.selectedItemIndex];this._getComponent().open=!1;const s=this._getPicker();s.preventFocusRestore=e,s.open=!1,t&&t.focused&&(t.focused=!1)}updateSelectedItemPosition(e){this.selectedItemIndex=e}onItemSelected(e,t){const s=e,n=this._getNonGroupItems();s&&(this.accInfo={isGroup:s.hasAttribute("ui5-suggestion-item-group"),currentPos:n.indexOf(s)+1,listSize:n.length,itemText:s.text||"",additionalText:s.additionalText},this._getComponent().onItemSelected(s,t),s.selected=!1,s.focused=!1,this._getComponent().open=!1)}onItemSelect(e){this._getComponent().onItemSelect(e)}onItemPress(e){let t;const s=e.type==="ui5-item-click";s&&!e.detail.item.selected||this._handledPress&&!s||(s&&e.detail.item.selected?(t=e.detail.item,this._handledPress=!0):t=e.detail.selectedItems[0],this.onItemSelected(t,!1))}_onOpen(){this._applyFocus()}_onClose(){this._handledPress=!1}_applyFocus(){var e;this.selectedItemIndex&&((e=this._getItems()[this.selectedItemIndex])==null||e.focus())}_isItemOnTarget(){return this.isOpened()&&this.selectedItemIndex!==null&&this.selectedItemIndex!==-1&&!this._isGroupItem}get _isGroupItem(){const e=this._getItems();return!e||!e[this.selectedItemIndex]?!1:e[this.selectedItemIndex].hasAttribute("ui5-suggestion-item-group")}isOpened(){var e;return!!((e=this._getPicker())!=null&&e.open)}_handleItemNavigation(e){this._getItems().length&&(e?this._selectNextItem():this._selectPreviousItem())}_selectNextItem(){const e=this._getItems().length,t=this.selectedItemIndex;if(this._hasValueState&&t===-1&&!this.component._isValueStateFocused){this._focusValueState();return}(t===-1&&!this._hasValueState||this.component._isValueStateFocused)&&(this._clearValueStateFocus(),this.selectedItemIndex=-1),!(t!==-1&&t+1>e-1)&&this._moveItemSelection(t,++this.selectedItemIndex)}_selectPreviousItem(){const e=this._getItems(),t=this.selectedItemIndex;if(this._hasValueState&&t===0&&!this.component._isValueStateFocused){this.component.hasSuggestionItemSelected=!1,this.component._isValueStateFocused=!0,this.selectedItemIndex=0,e[0].focused=!1,e[0].hasAttribute("ui5-suggestion-item")&&(e[0].selected=!1);return}if(this.component._isValueStateFocused){this.component.focused=!0,this.component._isValueStateFocused=!1,this.selectedItemIndex=0;return}if(!(t===-1||t===null)){if(t-1<0){(e[t].hasAttribute("ui5-suggestion-item")||e[t].hasAttribute("ui5-suggestion-item-custom"))&&(e[t].selected=!1),e[t].focused=!1,this.component.focused=!0,this.component.hasSuggestionItemSelected=!1,this.selectedItemIndex-=1;return}this._moveItemSelection(t,--this.selectedItemIndex)}}_moveItemSelection(e,t){const s=this._getItems(),n=s[t],i=s[e],o=this._getNonGroupItems(),c=n.hasAttribute("ui5-suggestion-item-group");if(!n)return;this.component.focused=!1,this._clearValueStateFocus();const d=this._getItems()[this.selectedItemIndex];if(this.accInfo={isGroup:c,currentPos:s.indexOf(n)+1,itemText:(c?d.headerText:d.text)||""},(n.hasAttribute("ui5-suggestion-item")||n.hasAttribute("ui5-suggestion-item-custom"))&&(this.accInfo.additionalText=n.additionalText||"",this.accInfo.currentPos=o.indexOf(n)+1,this.accInfo.listSize=o.length),i&&(i.focused=!1),(i!=null&&i.hasAttribute("ui5-suggestion-item")||i!=null&&i.hasAttribute("ui5-suggestion-item-custom"))&&(i.selected=!1),n&&(n.focused=!0,c||(n.selected=!0),this.handleFocus&&n.focus()),this.component.hasSuggestionItemSelected=!0,this.onItemSelect(n),!this._isItemIntoView(n)){const v=this._isGroupItem?n.shadowRoot.querySelector("[ui5-li-group-header]"):n;this._scrollItemIntoView(v)}}_deselectItems(){this._getItems().forEach(t=>{t.hasAttribute("ui5-suggestion-item")&&(t.selected=!1),t.focused=!1})}_clearItemFocus(){const e=this._getItems().find(t=>t.focused);e&&(e.focused=!1)}_isItemIntoView(e){const t=e.getDomRef().getBoundingClientRect(),s=this._getComponent().getDomRef().getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;return t.top+a.SCROLL_STEP<=n&&t.top>=s.top}_scrollItemIntoView(e){e.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})}_getScrollContainer(){return this._scrollContainer||(this._scrollContainer=this._getPicker().shadowRoot.querySelector(".ui5-popup-content")),this._scrollContainer}_getItems(){return Array.from(this._getComponent().querySelectorAll("[ui5-suggestion-item], [ui5-suggestion-item-group], [ui5-suggestion-item-custom]"))}_getNonGroupItems(){return Array.from(this._getComponent().querySelectorAll("[ui5-suggestion-item], [ui5-suggestion-item-custom]"))}_getComponent(){return this.component}_getList(){return this._getPicker().querySelector("[ui5-list]")}_getListWidth(){var e;return(e=this._getList())==null?void 0:e.offsetWidth}_getPicker(){return this._getComponent().shadowRoot.querySelector("[ui5-responsive-popover]")}get itemSelectionAnnounce(){if(!this.accInfo)return"";if(this.accInfo.isGroup)return`${a.i18nBundle.getText(F)} ${this.accInfo.itemText}`;const e=a.i18nBundle.getText($,this.accInfo.currentPos||0,this.accInfo.listSize||0);return`${this.accInfo.additionalText} ${e}`}hightlightInput(e,t){return L(e,t)}get _hasValueState(){return this.component.hasValueStateMessage}_focusValueState(){this.component._isValueStateFocused=!0,this.component.focused=!1,this.component.hasSuggestionItemSelected=!1,this.selectedItemIndex=0,this.component.value=this.component.typedInValue,this._deselectItems()}_clearValueStateFocus(){this.component._isValueStateFocused=!1}_clearSelectedSuggestionAndaccInfo(){this.accInfo=void 0,this.selectedItemIndex=0}static get dependencies(){return[P,D,b,C,O]}static async init(){a.i18nBundle=await y("@ui5/webcomponents")}}a.SCROLL_STEP=60;w("InputSuggestions",a);const k={title:"Inputs / Input",component:T,argTypes:{children:{control:{disable:!0}},icon:{control:{disable:!0}},valueStateMessage:{control:{disable:!0}}},args:{type:G.Text,valueState:E.None,icon:u.jsx(j,{name:R})},tags:["package:@ui5/webcomponents"]},m={},h={name:"with SuggestionItem",args:{showSuggestions:!0,placeholder:"type anything to show suggestions",icon:null},render:r=>u.jsxs(T,{...r,style:{width:"400px"},children:[u.jsxs(I,{headerText:"A Group",children:[u.jsx(l,{text:"United States",additionalText:"USA"}),u.jsx(l,{text:"Bulgaria"})]}),u.jsxs(I,{headerText:"Another Group Items",children:[u.jsx(l,{text:"Argentina"}),u.jsx(l,{text:"Germany"}),u.jsx(l,{text:"Iceland"}),u.jsx(l,{text:"Moldova"})]})]})};var f,p,_;m.parameters={...m.parameters,docs:{...(f=m.parameters)==null?void 0:f.docs,source:{originalSource:"{}",...(_=(p=m.parameters)==null?void 0:p.docs)==null?void 0:_.source}}};var S,x,V;h.parameters={...h.parameters,docs:{...(S=h.parameters)==null?void 0:S.docs,source:{originalSource:`{
  name: 'with SuggestionItem',
  args: {
    showSuggestions: true,
    placeholder: 'type anything to show suggestions',
    icon: null
  },
  render: args => {
    return <Input {...args} style={{
      width: '400px'
    }}>
        <SuggestionItemGroup headerText="A Group">
          <SuggestionItem text="United States" additionalText={'USA'} />
          <SuggestionItem text="Bulgaria" />
        </SuggestionItemGroup>
        <SuggestionItemGroup headerText="Another Group Items">
          <SuggestionItem text="Argentina" />
          <SuggestionItem text="Germany" />
          <SuggestionItem text="Iceland" />
          <SuggestionItem text="Moldova" />
        </SuggestionItemGroup>
      </Input>;
  }
}`,...(V=(x=h.parameters)==null?void 0:x.docs)==null?void 0:V.source}}};const B=["Default","WithSuggestionItem"],se=Object.freeze(Object.defineProperty({__proto__:null,Default:m,WithSuggestionItem:h,__namedExportsOrder:B,default:k},Symbol.toStringTag,{value:"Module"}));export{se as C,m as D,h as W};
