import{j as g}from"./jsx-runtime-CLpGMVip.js";import{o as p}from"./ValueState-Bg0UWejw.js";import{B as P}from"./index-DaCk7tY-.js";import{j as d,c as m,F as A,p as U,d as k,s as l,m as M,e as R,I as C,w as O}from"./withWebComponent-DfVDXLfc.js";import{l as y}from"./event-strict-DgQLNDEV.js";import{d as V}from"./slot-_4yKMUwC.js";import{i as N}from"./i18n-DEVDpFvK.js";import{b as j,i as z}from"./Keys-Df3IBHp2.js";import{aJ as L,aK as H,e as W,d as $,V as q,c as K}from"./i18n-defaults-Cyg2J0QB.js";import{a as G}from"./Input-CdGIkdwS.js";import{I as J}from"./Icon-DVzRT9Bg.js";import{d as Q}from"./Popover-D2H5tr2x.js";import{d as X}from"./parameters-bundle.css-BzaqQttB.js";import{R as Y}from"./ResponsivePopoverCommon.css-B_MYpl_B.js";import{v as Z}from"./ValueStateMessage.css-CANQlyZ6.js";function ee(){return d(Q,{preventInitialFocus:!0,preventFocusRestore:!0,hideArrow:!0,placement:"Bottom",horizontalAlign:"Start",class:"ui5-valuestatemessage-popover",children:m("div",{slot:"header",class:{"ui5-valuestatemessage-root":!0,"ui5-valuestatemessage--success":this.valueState===p.Positive,"ui5-valuestatemessage--error":this.valueState===p.Negative,"ui5-valuestatemessage--warning":this.valueState===p.Critical,"ui5-valuestatemessage--information":this.valueState===p.Information},style:{width:`${this.ui5Input?this.ui5Input.offsetWidth:0}px`},children:[this._valueStateMessageInputIcon&&d(J,{class:"ui5-input-value-state-message-icon",name:this._valueStateMessageInputIcon}),te.call(this)]})})}function te(){return d(A,{children:this.shouldDisplayDefaultValueStateMessage?this.valueStateText:d("slot",{name:"valueStateMessage"})})}function oe(){return m(A,{children:[m("div",{class:"ui5-file-uploader-root",onMouseOver:this._onmouseover,onMouseOut:this._onmouseout,onFocusIn:this._onfocusin,onFocusOut:this._onfocusout,onKeyDown:this._onkeydown,onKeyUp:this._onkeyup,onClick:this._onclick,onDragOver:this._ondrag,onDrop:this._ondrop,children:[m("div",{class:"ui5-file-uploader-mask",children:[!this.hideInput&&d(G,{value:this.value,valueState:this.valueState,placeholder:this.placeholder,disabled:this.disabled,tabindex:-1,class:"ui5-file-uploader-input"}),d("slot",{})]}),d("input",{type:"file",tabindex:-1,"aria-hidden":"true",multiple:this.multiple,accept:this.accept,title:this.titleText,disabled:this.disabled,onChange:this._onChange})]}),ee.call(this)]})}U("@ui5/webcomponents-theming","sap_horizon",async()=>k);U("@ui5/webcomponents","sap_horizon",async()=>X);const ae=`:host{vertical-align:middle}:host{display:inline-block}.ui5-file-uploader-root{position:relative}.ui5-file-uploader-root input[type=file]{opacity:0;position:absolute;top:0;left:0;height:100%;width:100%;font-size:0}.ui5-file-uploader-root input[type=file]:not([disabled]){cursor:pointer}.ui5-file-uploader-mask{display:flex;align-items:center}.ui5-file-uploader-mask [ui5-input]{margin-right:.25rem}:host([value-state="None"]:not([disabled]):hover) [ui5-input],:host(:not([value-state]):not([disabled]):hover) [ui5-input]{border:var(--_ui5-v2-6-2_file_uploader_hover_border);background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_Shadow)}:host([value-state="Negative"]:not([disabled]):hover) [ui5-input]{background-color:var(--_ui5-v2-6-2_file_uploader_value_state_error_hover_background_color);box-shadow:var(--sapField_Hover_InvalidShadow)}:host([value-state="Critical"]:not([disabled]):hover) [ui5-input]{background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_WarningShadow)}:host([value-state="Positive"]:not([disabled]):hover) [ui5-input]{background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_SuccessShadow)}:host([value-state="Information"]:not([disabled]):hover) [ui5-input]{background-color:var(--sapField_Hover_Background);box-shadow:var(--sapField_Hover_InformationShadow)}:host(:not([disabled]):active) [ui5-button]{background-color:var(--sapButton_Active_Background);border-color:var(--sapButton_Active_BorderColor);color:var(--sapButton_Active_TextColor);text-shadow:none}
`;var i=function(n,e,t,a){var s=arguments.length,r=s<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,t):a,v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,a);else for(var S=n.length-1;S>=0;S--)(v=n[S])&&(r=(s<3?v(r):s>3?v(e,t,r):v(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},u;const ie=n=>n/1024/1024;let o=u=class extends C{constructor(){super(...arguments),this.hideInput=!1,this.disabled=!1,this.multiple=!1,this.value="",this.valueState="None",this.focused=!1}async formElementAnchor(){return this.getFocusDomRefAsync()}getFocusDomRef(){return this.content[0]}get formFormattedValue(){if(this.files&&this.name){const e=new FormData;for(let t=0;t<this.files.length;t++)e.append(this.name,this.files[t]);return e}return null}_onmouseover(){this.content.forEach(e=>{e.classList.add("ui5_hovered")})}_onmouseout(){this.content.forEach(e=>{e.classList.remove("ui5_hovered")})}_onclick(){var e;(e=this.getFocusDomRef())!=null&&e.matches(":has(:focus-within)")&&this._input.click()}_onkeydown(e){j(e)&&(this._input.click(),e.preventDefault())}_onkeyup(e){z(e)&&(this._input.click(),e.preventDefault())}_ondrag(e){e.preventDefault(),e.stopPropagation()}_ondrop(e){var s;e.preventDefault(),e.stopPropagation();const t=(s=e.dataTransfer)==null?void 0:s.files;if(!t)return;const a=this._validateFiles(t);!this.value&&!a.length||(this._input.files=a,this._updateValue(a),this.fireDecoratorEvent("change",{files:a}))}_onfocusin(){this.focused=!0}_onfocusout(){this.focused=!1}get files(){return this._input?this._input.files:u._emptyFilesList}onAfterRendering(){this.value||(this._input.value=""),this.toggleValueStatePopover(this.shouldOpenValueStateMessagePopover)}_onChange(e){let t=e.target.files;t&&(t=this._validateFiles(t)),!(!this.value&&!(t!=null&&t.length))&&(this._updateValue(t),this.fireDecoratorEvent("change",{files:t}))}_updateValue(e){this.value=Array.from(e||[]).reduce((t,a)=>`${t}"${a.name}" `,"")}_validateFiles(e){const t=this.maxFileSize?this._getExceededFiles(e):[];return t.length&&(this.fireDecoratorEvent("file-size-exceed",{filesData:t}),e=new DataTransfer().files),e}_getExceededFiles(e){const t=Array.from(e),a=[];for(let s=0;s<t.length;s++){const r=ie(t[s].size);r>this.maxFileSize&&a.push({fileName:t[s].name,fileSize:r})}return a}toggleValueStatePopover(e){e?this.openValueStatePopover():this.closeValueStatePopover()}openValueStatePopover(){const e=this._getPopover();e&&(e.opener=this,e.open=!0)}closeValueStatePopover(){const e=this._getPopover();e&&(e.open=!1)}_getPopover(){return this.shadowRoot.querySelector(".ui5-valuestatemessage-popover")}static get _emptyFilesList(){return this.emptyInput||(this.emptyInput=document.createElement("input"),this.emptyInput.type="file"),this.emptyInput.files}get browseText(){return u.i18nBundle.getText(L)}get titleText(){return u.i18nBundle.getText(H)}get _input(){return this.shadowRoot.querySelector("input[type=file]")||this.querySelector("input[type=file][data-ui5-form-support]")}get valueStateTextMappings(){return{Positive:u.i18nBundle.getText(W),Information:u.i18nBundle.getText($),Negative:u.i18nBundle.getText(q),Critical:u.i18nBundle.getText(K)}}get valueStateText(){return this.valueStateTextMappings[this.valueState]}get hasValueState(){return this.valueState!==p.None}get hasValueStateText(){return this.hasValueState&&this.valueState!==p.Positive}get shouldDisplayDefaultValueStateMessage(){return!this.valueStateMessage.length&&this.hasValueStateText}get shouldOpenValueStateMessagePopover(){return this.focused&&this.hasValueStateText&&!this.hideInput}get _valueStateMessageInputIcon(){const e={Negative:"error",Critical:"alert",Positive:"sys-enter-2",Information:"information"};return this.valueState!==p.None?e[this.valueState]:""}get ui5Input(){return this.shadowRoot.querySelector(".ui5-file-uploader-input")}};i([l()],o.prototype,"accept",void 0);i([l({type:Boolean})],o.prototype,"hideInput",void 0);i([l({type:Boolean})],o.prototype,"disabled",void 0);i([l({type:Boolean})],o.prototype,"multiple",void 0);i([l()],o.prototype,"name",void 0);i([l()],o.prototype,"placeholder",void 0);i([l()],o.prototype,"value",void 0);i([l({type:Number})],o.prototype,"maxFileSize",void 0);i([l()],o.prototype,"valueState",void 0);i([l({type:Boolean})],o.prototype,"focused",void 0);i([V({type:HTMLElement,default:!0})],o.prototype,"content",void 0);i([V()],o.prototype,"valueStateMessage",void 0);i([N("@ui5/webcomponents")],o,"i18nBundle",void 0);o=u=i([M({tag:"ui5-file-uploader",languageAware:!0,formAssociated:!0,renderer:R,styles:[ae,Y,Z],template:oe}),y("change",{bubbles:!0}),y("file-size-exceed",{bubbles:!0})],o);o.define();const _=O("ui5-file-uploader",["accept","maxFileSize","name","placeholder","value","valueState"],["disabled","hideInput","multiple"],["valueStateMessage"],["change","file-size-exceed"]);_.displayName="FileUploader";const se={title:"Inputs / FileUploader",component:_,argTypes:{children:{control:{disable:!0}},valueStateMessage:{control:{disable:!0}}},args:{valueState:p.None},tags:["package:@ui5/webcomponents"]},c={},h={render(n){return g.jsx(_,{...n,children:g.jsx(P,{children:"Upload single file"})})}},f={render(n){return g.jsx(_,{...n,hideInput:!0,children:g.jsx(P,{children:"Upload single file"})})}};var b,x,F;c.parameters={...c.parameters,docs:{...(b=c.parameters)==null?void 0:b.docs,source:{originalSource:"{}",...(F=(x=c.parameters)==null?void 0:x.docs)==null?void 0:F.source}}};var I,T,w;h.parameters={...h.parameters,docs:{...(I=h.parameters)==null?void 0:I.docs,source:{originalSource:`{
  render(args) {
    return <FileUploader {...args}>
        <Button>Upload single file</Button>
      </FileUploader>;
  }
}`,...(w=(T=h.parameters)==null?void 0:T.docs)==null?void 0:w.source}}};var B,D,E;f.parameters={...f.parameters,docs:{...(B=f.parameters)==null?void 0:B.docs,source:{originalSource:`{
  render(args) {
    return <FileUploader {...args} hideInput>
        <Button>Upload single file</Button>
      </FileUploader>;
  }
}`,...(E=(D=f.parameters)==null?void 0:D.docs)==null?void 0:E.source}}};const re=["Default","WithButton","WithHiddenInput"],Fe=Object.freeze(Object.defineProperty({__proto__:null,Default:c,WithButton:h,WithHiddenInput:f,__namedExportsOrder:re,default:se},Symbol.toStringTag,{value:"Module"}));export{Fe as C,c as D,h as W,f as a};
