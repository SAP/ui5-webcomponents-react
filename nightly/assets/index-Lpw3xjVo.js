import{s as S,E as v,m as A,w as M}from"./jsx-runtime-CkEx_Gfk.js";import{l as C}from"./event-strict-DgQLNDEV.js";import{i as D,a as K,b as x,f as N}from"./index-CT0045ds.js";import{t as U}from"./getActiveElement-kltGt_DR.js";import{O as I}from"./Keys-B3oBAe0t.js";var w=function(a,e,t,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,e,t,n);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i};let d=class extends v{constructor(){super(...arguments),this.identifier="TableSelection"}onTableActivate(e){this._table=e,this._invalidateTableAndRows()}onExitDOM(){this._invalidateTableAndRows(),this._table=void 0}onBeforeRendering(){!this._table&&this.parentElement&&D(this.parentElement)&&(this._table=this.parentElement),this._invalidateTableAndRows()}isSelectable(){return!0}isMultiSelectable(){return!1}isRowSelectorRequired(){return!0}getRowKey(e){return e.rowKey||""}getRowByKey(e){if(this._table&&e)return this._table.rows.find(t=>this.getRowKey(t)===e)}_invalidateTableAndRows(){this._table&&(this._table._invalidate++,this._table.rows.forEach(e=>e._invalidate++))}};w([S()],d.prototype,"selected",void 0);d=w([C("change",{bubbles:!1})],d);const P=d;var g=function(a,e,t,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,e,t,n);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i};let u=class extends P{constructor(){super(...arguments),this._rowsLength=0}onTableBeforeRendering(){this._table&&this._table.headerRow[0]&&this._rowsLength!==this._table.rows.length&&(this._rowsLength=this._table.rows.length,this._table.headerRow[0]._invalidate++)}isMultiSelectable(){return!0}isSelected(e){if(e.isHeaderRow())return this.areAllRowsSelected();const t=this.getRowKey(e);return this.getSelectedAsSet().has(t)}setSelected(e,t,n=!1){var o;if((o=this._rangeSelection)!=null&&o.isMouse&&this._rangeSelection.shiftPressed)return;const s=e.isHeaderRow()?this._table.rows:[e],i=this.getSelectedAsSet();s.forEach(l=>{const r=this.getRowKey(l);i[t?"add":"delete"](r)}),this.setSelectedAsSet(i),n&&this.fireDecoratorEvent("change")}getSelectedRows(){return this._table?this._table.rows.filter(e=>this.isSelected(e)):[]}areAllRowsSelected(){if(!this._table||!this._table.rows.length)return!1;const e=this.getSelectedAsSet();return this._table.rows.every(t=>{const n=this.getRowKey(t);return e.has(n)})}getSelectedAsSet(){const t=(this.selected||"").split(" ").filter(String);return new Set(t)}setSelectedAsSet(e){this.selected=[...e].join(" ")}_invalidateTableAndRows(){var t;super._invalidateTableAndRows();const e=(t=this._table)==null?void 0:t.headerRow[0];e&&e._invalidate++}_onkeydown(e){var n;if(!this._table||!e.shiftKey)return;const t=U();if(!(t!=null&&t.hasAttribute("ui5-table-row")||(n=this._rangeSelection)!=null&&n.isMouse||t!=null&&t.hasAttribute("ui5-growing-row"))){this._stopRangeSelection();return}if(this._rangeSelection){if(e.key==="ArrowUp"||e.key==="ArrowDown"){const s=I(e)?-1:1;this._handleRangeSelection(t,s)}}else{const s=t;this._startRangeSelection(s,this.isSelected(s))}this._rangeSelection&&(this._rangeSelection.shiftPressed=e.shiftKey)}_onkeyup(e,t){this._table&&((!t.hasAttribute("ui5-table-row")||!this._rangeSelection||!e.shiftKey)&&this._stopRangeSelection(),this._rangeSelection&&(this._rangeSelection.shiftPressed=e.shiftKey))}_onclick(e){var n,s,i;if(!this._table)return;if(K(e)){this._stopRangeSelection();return}if(!x(e)){this._stopRangeSelection();return}const t=N(e.composedPath());if(e.shiftKey&&((n=this._rangeSelection)!=null&&n.isMouse)){const o=this._rangeSelection.rows[0],l=this._table.rows.indexOf(o),r=this._table.rows.indexOf(t);if((i=(s=t.shadowRoot)==null?void 0:s.querySelector("#selection-component"))==null||i.toggleAttribute("checked",!0),e.stopImmediatePropagation(),l===-1||r===-1||t.rowKey===o.rowKey||t.rowKey===this._rangeSelection.rows[this._rangeSelection.rows.length-1].rowKey)return;const f=r-l;this._handleRangeSelection(t,f)}else t&&this._startRangeSelection(t,!this.isSelected(t),!0)}_startRangeSelection(e,t,n=!1){this._rangeSelection={selected:t,isUp:null,rows:[e],isMouse:n,shiftPressed:!1}}_handleRangeSelection(e,t){var o,l;if(!this._rangeSelection)return;const n=t>0;(o=this._rangeSelection).isUp??(o.isUp=n);const s=n!==this._rangeSelection.isUp&&!this._rangeSelection.isMouse;let i=s&&this.isSelected(e);if(s)this._reverseRangeSelection();else{const r=this._table.rows.indexOf(e),[f,y]=[r,r-t].sort((p,c)=>p-c),b=this.getSelectedAsSet();i=((l=this._table)==null?void 0:l.rows.slice(f,y+1).reduce((p,c)=>{var m,_;const R=!((m=this._rangeSelection)!=null&&m.rows.includes(c)),T=this.isSelected(c)!==this._rangeSelection.selected;return R&&((_=this._rangeSelection)==null||_.rows.push(c)),b[this._rangeSelection.selected?"add":"delete"](this.getRowKey(c)),p||T},i))||!1,this.setSelectedAsSet(b)}i&&this.fireDecoratorEvent("change")}_stopRangeSelection(){this._rangeSelection=null}_reverseRangeSelection(){var t,n;const e=(t=this._rangeSelection)==null?void 0:t.rows.pop();e&&this.setSelected(e,!1),((n=this._rangeSelection)==null?void 0:n.rows.length)===1&&(this._rangeSelection.isUp=null)}};g([S()],u.prototype,"selected",void 0);u=g([A({tag:"ui5-table-selection-multi"})],u);u.define();const h=M("ui5-table-selection-multi",["selected"],[],[],["change"]);h.displayName="TableSelectionMulti";try{h.displayName="TableSelectionMulti",h.__docgenInfo={description:'The `TableSelectionMulti` component is used inside the `Table` to add multi-selection capabilities to the `Table`.\nSince selection is key-based, each `TableRow` must define a unique `row-key` property.\n\n### Usage\n\nThe `TableSelectionMulti` component is a feature designed exclusively for use within the `Table` component.\nIt must be placed inside the `features` slot of `Table`.\nThis component is not intended for standalone use.\n\n```html\n<Table>\n	<TableSelectionMulti slot="features" selected="Row1 Row3"></TableSelectionMulti>\n</Table>\n```\n\n\n\n__Note__: This is a UI5 Web Component! [Repository](https://github.com/SAP/ui5-webcomponents) | [Documentation](https://sap.github.io/ui5-webcomponents/)',displayName:"TableSelectionMulti",props:{onChange:{defaultValue:null,description:`Fired when the selection is changed by user interaction.

| cancelable | bubbles |
| :--------: | :-----: |
| ❌|✅|`,name:"onChange",required:!1,type:{name:"(event: Ui5CustomEvent<TableSelectionMultiDomRef, never>) => void"}},selected:{defaultValue:{value:"undefined"},description:"Defines the `row-key` values of selected rows, with each value separated by a space.",name:"selected",required:!1,type:{name:"string"}},className:{defaultValue:null,description:`CSS Class Name which will be appended to the most outer element of a component.
Use this prop carefully, overwriting CSS rules might break the component.`,name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:`Element style which will be appended to the most outer element of a component.
Use this prop carefully, some css properties might break the component.`,name:"style",required:!1,type:{name:"CSSProperties"}},waitForDefine:{defaultValue:null,description:`Defines whether the component should wait for the underlying custom element of the web component to be defined. This can be useful, for example, for using instance methods when mounting the component.

__Note:__ This adds a rendering cycle to your component.`,name:"waitForDefine",required:!1,type:{name:"boolean"}}}}}catch{}try{h.displayName="TableSelectionMulti",h.__docgenInfo={description:'The `TableSelectionMulti` component is used inside the `Table` to add multi-selection capabilities to the `Table`.\nSince selection is key-based, each `TableRow` must define a unique `row-key` property.\n\n### Usage\n\nThe `TableSelectionMulti` component is a feature designed exclusively for use within the `Table` component.\nIt must be placed inside the `features` slot of `Table`.\nThis component is not intended for standalone use.\n\n```html\n<Table>\n	<TableSelectionMulti slot="features" selected="Row1 Row3"></TableSelectionMulti>\n</Table>\n```\n\n\n\n__Note__: This is a UI5 Web Component! [Repository](https://github.com/SAP/ui5-webcomponents) | [Documentation](https://sap.github.io/ui5-webcomponents/)',displayName:"TableSelectionMulti",props:{onChange:{defaultValue:null,description:`Fired when the selection is changed by user interaction.

| cancelable | bubbles |
| :--------: | :-----: |
| ❌|✅|`,name:"onChange",required:!1,type:{name:"(event: Ui5CustomEvent<TableSelectionMultiDomRef, never>) => void"}},selected:{defaultValue:{value:"undefined"},description:"Defines the `row-key` values of selected rows, with each value separated by a space.",name:"selected",required:!1,type:{name:"string"}},className:{defaultValue:null,description:`CSS Class Name which will be appended to the most outer element of a component.
Use this prop carefully, overwriting CSS rules might break the component.`,name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:`Element style which will be appended to the most outer element of a component.
Use this prop carefully, some css properties might break the component.`,name:"style",required:!1,type:{name:"CSSProperties"}},waitForDefine:{defaultValue:null,description:`Defines whether the component should wait for the underlying custom element of the web component to be defined. This can be useful, for example, for using instance methods when mounting the component.

__Note:__ This adds a rendering cycle to your component.`,name:"waitForDefine",required:!1,type:{name:"boolean"}}}}}catch{}export{h as T,P as a};
