{"version":3,"file":"ResizeHandler-9ebe913c.js","sources":["../../node_modules/@ui5/webcomponents-base/dist/delegate/ResizeHandler.js"],"sourcesContent":["import { instanceOfUI5Element } from \"../UI5Element.js\";\nlet resizeObserver;\nconst observedElements = new Map();\nconst getResizeObserver = () => {\n    if (!resizeObserver) {\n        resizeObserver = new window.ResizeObserver(entries => {\n            window.requestAnimationFrame(() => {\n                entries.forEach(entry => {\n                    const callbacks = observedElements.get(entry.target);\n                    // Callbacks could be async and we need to handle returned promises to comply with the eslint \"no-misused-promises\" rule.\n                    // Although Promise.all awaits all, we don't await the additional task after calling the callbacks and should not make any difference.\n                    callbacks && Promise.all(callbacks.map((callback) => callback()));\n                });\n            });\n        });\n    }\n    return resizeObserver;\n};\nconst observe = (element, callback) => {\n    const callbacks = observedElements.get(element) || [];\n    // if no callbacks have been added for this element - start observing it\n    if (!callbacks.length) {\n        getResizeObserver().observe(element);\n    }\n    // save the callbacks in an array\n    observedElements.set(element, [...callbacks, callback]);\n};\nconst unobserve = (element, callback) => {\n    const callbacks = observedElements.get(element) || [];\n    if (callbacks.length === 0) {\n        return;\n    }\n    const filteredCallbacks = callbacks.filter((fn) => fn !== callback);\n    if (filteredCallbacks.length === 0) {\n        getResizeObserver().unobserve(element);\n        observedElements.delete(element);\n    }\n    else {\n        observedElements.set(element, filteredCallbacks);\n    }\n};\n/**\n * Allows to register/deregister resize observers for a DOM element\n *\n * @public\n * @class\n  */\nclass ResizeHandler {\n    /**\n     * @static\n     * @public\n     * @param {*} element UI5 Web Component or DOM Element to be observed\n     * @param {*} callback Callback to be executed\n     */\n    static register(element, callback) {\n        let effectiveElement = element;\n        if (instanceOfUI5Element(effectiveElement)) {\n            effectiveElement = effectiveElement.getDomRef();\n        }\n        if (effectiveElement instanceof HTMLElement) {\n            observe(effectiveElement, callback);\n        }\n        else {\n            console.warn(\"Cannot register ResizeHandler for element\", element); // eslint-disable-line\n        }\n    }\n    /**\n     * @static\n     * @public\n     * @param {*} element UI5 Web Component or DOM Element to be unobserved\n     * @param {*} callback Callback to be removed\n     */\n    static deregister(element, callback) {\n        let effectiveElement = element;\n        if (instanceOfUI5Element(effectiveElement)) {\n            effectiveElement = effectiveElement.getDomRef();\n        }\n        if (effectiveElement instanceof HTMLElement) {\n            unobserve(effectiveElement, callback);\n        }\n        else {\n            console.warn(\"Cannot deregister ResizeHandler for element\", element); // eslint-disable-line\n        }\n    }\n}\nexport default ResizeHandler;\n//# sourceMappingURL=ResizeHandler.js.map"],"names":["resizeObserver","observedElements","getResizeObserver","entries","entry","callbacks","callback","observe","element","unobserve","filteredCallbacks","fn","ResizeHandler","effectiveElement","instanceOfUI5Element"],"mappings":"6CACA,IAAIA,EACJ,MAAMC,EAAmB,IAAI,IACvBC,EAAoB,KACjBF,IACDA,EAAiB,IAAI,OAAO,eAAeG,GAAW,CAClD,OAAO,sBAAsB,IAAM,CAC/BA,EAAQ,QAAQC,GAAS,CACrB,MAAMC,EAAYJ,EAAiB,IAAIG,EAAM,MAAM,EAGnDC,GAAa,QAAQ,IAAIA,EAAU,IAAKC,GAAaA,EAAU,CAAA,CAAC,CACpF,CAAiB,CACjB,CAAa,CACb,CAAS,GAEEN,GAELO,EAAU,CAACC,EAASF,IAAa,CACnC,MAAMD,EAAYJ,EAAiB,IAAIO,CAAO,GAAK,CAAA,EAE9CH,EAAU,QACXH,EAAmB,EAAC,QAAQM,CAAO,EAGvCP,EAAiB,IAAIO,EAAS,CAAC,GAAGH,EAAWC,CAAQ,CAAC,CAC1D,EACMG,EAAY,CAACD,EAASF,IAAa,CACrC,MAAMD,EAAYJ,EAAiB,IAAIO,CAAO,GAAK,CAAA,EACnD,GAAIH,EAAU,SAAW,EACrB,OAEJ,MAAMK,EAAoBL,EAAU,OAAQM,GAAOA,IAAOL,CAAQ,EAC9DI,EAAkB,SAAW,GAC7BR,EAAmB,EAAC,UAAUM,CAAO,EACrCP,EAAiB,OAAOO,CAAO,GAG/BP,EAAiB,IAAIO,EAASE,CAAiB,CAEvD,EAOA,MAAME,CAAc,CAOhB,OAAO,SAASJ,EAASF,EAAU,CAC/B,IAAIO,EAAmBL,EACnBM,EAAqBD,CAAgB,IACrCA,EAAmBA,EAAiB,aAEpCA,aAA4B,YAC5BN,EAAQM,EAAkBP,CAAQ,EAGlC,QAAQ,KAAK,4CAA6CE,CAAO,CAExE,CAOD,OAAO,WAAWA,EAASF,EAAU,CACjC,IAAIO,EAAmBL,EACnBM,EAAqBD,CAAgB,IACrCA,EAAmBA,EAAiB,aAEpCA,aAA4B,YAC5BJ,EAAUI,EAAkBP,CAAQ,EAGpC,QAAQ,KAAK,8CAA+CE,CAAO,CAE1E,CACL","x_google_ignoreList":[0]}