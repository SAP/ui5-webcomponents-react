import{j as g,k as R,l as I,m as b,n as x,D as o}from"./Boot-DcdhI_RK.js";import{E as D}from"./EventProvider-B3ZIXKWe.js";const M=typeof document>"u",T=()=>{if(M)return g;const e=navigator.languages,t=()=>navigator.language;return e&&e[0]||t()||g},p=new D,A="languageChange",F=e=>{p.attachEvent(A,e)},se=e=>{p.detachEvent(A,e)},V=e=>p.fireEventAsync(A,e);let c,L;const K=()=>(c===void 0&&(c=R()),c),re=async e=>{c!==e&&(c=e,I()&&(await V(e),await b({languageAware:!0})))},W=e=>{L=e},z=()=>(L===void 0&&W(x()),L),G=/^((?:[A-Z]{2,3}(?:-[A-Z]{3}){0,3})|[A-Z]{4}|[A-Z]{5,8})(?:-([A-Z]{4}))?(?:-([A-Z]{2}|[0-9]{3}))?((?:-[0-9A-Z]{5,8}|-[0-9][0-9A-Z]{3})*)((?:-[0-9A-WYZ](?:-[0-9A-Z]{2,8})+)*)(?:-(X(?:-[0-9A-Z]{1,8})+))?$/i;class U{constructor(t){const n=G.exec(t.replace(/_/g,"-"));if(n===null)throw new Error(`The given language ${t} does not adhere to BCP-47.`);this.sLocaleId=t,this.sLanguage=n[1]||g,this.sScript=n[2]||"",this.sRegion=n[3]||"",this.sVariant=n[4]&&n[4].slice(1)||null,this.sExtension=n[5]&&n[5].slice(1)||null,this.sPrivateUse=n[6]||null,this.sLanguage&&(this.sLanguage=this.sLanguage.toLowerCase()),this.sScript&&(this.sScript=this.sScript.toLowerCase().replace(/^[a-z]/,s=>s.toUpperCase())),this.sRegion&&(this.sRegion=this.sRegion.toUpperCase())}getLanguage(){return this.sLanguage}getScript(){return this.sScript}getRegion(){return this.sRegion}getVariant(){return this.sVariant}getVariantSubtags(){return this.sVariant?this.sVariant.split("-"):[]}getExtension(){return this.sExtension}getExtensionSubtags(){return this.sExtension?this.sExtension.slice(2).split("-"):[]}getPrivateUse(){return this.sPrivateUse}getPrivateUseSubtags(){return this.sPrivateUse?this.sPrivateUse.slice(2).split("-"):[]}hasPrivateUseSubtag(t){return this.getPrivateUseSubtags().indexOf(t)>=0}toString(){const t=[this.sLanguage];return this.sScript&&t.push(this.sScript),this.sRegion&&t.push(this.sRegion),this.sVariant&&t.push(this.sVariant),this.sExtension&&t.push(this.sExtension),this.sPrivateUse&&t.push(this.sPrivateUse),t.join("-")}}const h=new Map,$=e=>(h.has(e)||h.set(e,new U(e)),h.get(e)),E=e=>{try{if(e&&typeof e=="string")return $(e)}catch{}return new U(o)},l=e=>{if(e)return E(e);const t=K();return t?$(t):E(T())},X=/^((?:[A-Z]{2,3}(?:-[A-Z]{3}){0,3})|[A-Z]{4}|[A-Z]{5,8})(?:-([A-Z]{4}))?(?:-([A-Z]{2}|[0-9]{3}))?((?:-[0-9A-Z]{5,8}|-[0-9][0-9A-Z]{3})*)((?:-[0-9A-WYZ](?:-[0-9A-Z]{2,8})+)*)(?:-(X(?:-[0-9A-Z]{1,8})+))?$/i,S=/(?:^|-)(saptrc|sappsd)(?:-|$)/i,k={he:"iw",yi:"ji",nb:"no",sr:"sh"},H=e=>{let t;if(!e)return o;if(typeof e=="string"&&(t=X.exec(e.replace(/_/g,"-")))){let n=t[1].toLowerCase(),s=t[3]?t[3].toUpperCase():void 0;const r=t[2]?t[2].toLowerCase():void 0,i=t[4]?t[4].slice(1):void 0,a=t[6];return n=k[n]||n,a&&(t=S.exec(a))||i&&(t=S.exec(i))?`en_US_${t[1].toLowerCase()}`:(n==="zh"&&!s&&(r==="hans"?s="CN":r==="hant"&&(s="TW")),n+(s?"_"+s+(i?"_"+i.replace("-","_"):""):""))}return o},v={zh_HK:"zh_TW",in:"id"},Y=e=>{if(!e)return o;if(v[e])return v[e];const t=e.lastIndexOf("_");return t>=0?e.slice(0,t):e!==o?o:""},_=new Set,Z=new Set,w=new Map,f=new Map,y=new Map,ie=(e,t,n)=>{const s=`${e}/${t}`;y.set(s,n)},P=(e,t)=>{w.set(e,t)},J=e=>w.get(e),m=(e,t)=>{const n=`${e}/${t}`;return y.has(n)},q=(e,t)=>{const n=`${e}/${t}`,s=y.get(n);return s&&!f.get(n)&&f.set(n,s(t)),f.get(n)},O=e=>{_.has(e)||(console.warn(`[${e}]: Message bundle assets are not configured. Falling back to English texts.`,` Add \`import "${e}/dist/Assets.js"\` in your bundle and make sure your build tool supports dynamic imports and JSON imports. See section "Assets" in the documentation for more information.`),_.add(e))},C=(e,t)=>t!==g&&!m(e,t),B=async e=>{const t=l().getLanguage(),n=l().getRegion(),s=l().getVariant();let r=t+(n?`-${n}`:"")+(s?`-${s}`:"");if(C(e,r))for(r=H(r);C(e,r);)r=Y(r);const i=z();if(r===g&&!i){P(e,null);return}if(!m(e,r)){O(e);return}try{const a=await q(e,r);P(e,a)}catch(a){const u=a;Z.has(u.message)||(Z.add(u.message),console.error(u.message))}};F(e=>{const t=[...w.keys()];return Promise.all(t.map(B))});const Q=/('')|'([^']+(?:''[^']*)*)(?:'|$)|\{([0-9]+(?:\s*,[^{}]*)?)\}|[{}]/g,N=(e,t)=>(t=t||[],e.replace(Q,(n,s,r,i,a)=>{if(s)return"'";if(r)return r.replace(/''/g,"'");if(i){const u=typeof i=="string"?parseInt(i):i;return String(t[u])}throw new Error(`[i18n]: pattern syntax error at pos ${a}`)})),d=new Map;class j{constructor(t){this.packageName=t}getText(t,...n){if(typeof t=="string"&&(t={key:t,defaultText:t}),!t||!t.key)return"";const s=J(this.packageName);s&&!s[t.key]&&console.warn(`Key ${t.key} not found in the i18n bundle, the default text will be used`);const r=s&&s[t.key]?s[t.key]:t.defaultText||t.key;return N(r,n)}}const ee=e=>{if(d.has(e))return d.get(e);const t=new j(e);return d.set(e,t),t},ae=async e=>(await B(e),ee(e));export{j as I,F as a,ae as b,K as c,se as d,l as g,ie as r,re as s};
