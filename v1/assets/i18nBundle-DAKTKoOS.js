import{j as g,k as R,l as B,m as I,n as b,D as o}from"./Boot-HIcYreCJ.js";import{E as x}from"./EventProvider-B3ZIXKWe.js";const D=typeof document>"u",T=()=>{if(D)return g;const e=navigator.languages,t=()=>navigator.language;return e&&e[0]||t()||g},L=new x,A="languageChange",M=e=>{L.attachEvent(A,e)},ne=e=>{L.detachEvent(A,e)},F=e=>L.fireEventAsync(A,e);let c,p;const V=()=>(c===void 0&&(c=R()),c),se=async e=>{c!==e&&(c=e,B()&&(await F(e),await I({languageAware:!0})))},W=e=>{p=e},z=()=>(p===void 0&&W(b()),p),K=/^((?:[A-Z]{2,3}(?:-[A-Z]{3}){0,3})|[A-Z]{4}|[A-Z]{5,8})(?:-([A-Z]{4}))?(?:-([A-Z]{2}|[0-9]{3}))?((?:-[0-9A-Z]{5,8}|-[0-9][0-9A-Z]{3})*)((?:-[0-9A-WYZ](?:-[0-9A-Z]{2,8})+)*)(?:-(X(?:-[0-9A-Z]{1,8})+))?$/i;class U{constructor(t){const n=K.exec(t.replace(/_/g,"-"));if(n===null)throw new Error(`The given language ${t} does not adhere to BCP-47.`);this.sLocaleId=t,this.sLanguage=n[1]||g,this.sScript=n[2]||"",this.sRegion=n[3]||"",this.sVariant=n[4]&&n[4].slice(1)||null,this.sExtension=n[5]&&n[5].slice(1)||null,this.sPrivateUse=n[6]||null,this.sLanguage&&(this.sLanguage=this.sLanguage.toLowerCase()),this.sScript&&(this.sScript=this.sScript.toLowerCase().replace(/^[a-z]/,s=>s.toUpperCase())),this.sRegion&&(this.sRegion=this.sRegion.toUpperCase())}getLanguage(){return this.sLanguage}getScript(){return this.sScript}getRegion(){return this.sRegion}getVariant(){return this.sVariant}getVariantSubtags(){return this.sVariant?this.sVariant.split("-"):[]}getExtension(){return this.sExtension}getExtensionSubtags(){return this.sExtension?this.sExtension.slice(2).split("-"):[]}getPrivateUse(){return this.sPrivateUse}getPrivateUseSubtags(){return this.sPrivateUse?this.sPrivateUse.slice(2).split("-"):[]}hasPrivateUseSubtag(t){return this.getPrivateUseSubtags().indexOf(t)>=0}toString(){const t=[this.sLanguage];return this.sScript&&t.push(this.sScript),this.sRegion&&t.push(this.sRegion),this.sVariant&&t.push(this.sVariant),this.sExtension&&t.push(this.sExtension),this.sPrivateUse&&t.push(this.sPrivateUse),t.join("-")}}const h=new Map,$=e=>(h.has(e)||h.set(e,new U(e)),h.get(e)),S=e=>{try{if(e&&typeof e=="string")return $(e)}catch{}return new U(o)},l=e=>{if(e)return S(e);const t=V();return t?$(t):S(T())},G=/^((?:[A-Z]{2,3}(?:-[A-Z]{3}){0,3})|[A-Z]{4}|[A-Z]{5,8})(?:-([A-Z]{4}))?(?:-([A-Z]{2}|[0-9]{3}))?((?:-[0-9A-Z]{5,8}|-[0-9][0-9A-Z]{3})*)((?:-[0-9A-WYZ](?:-[0-9A-Z]{2,8})+)*)(?:-(X(?:-[0-9A-Z]{1,8})+))?$/i,E=/(?:^|-)(saptrc|sappsd)(?:-|$)/i,X={he:"iw",yi:"ji",nb:"no",sr:"sh"},k=e=>{let t;if(!e)return o;if(typeof e=="string"&&(t=G.exec(e.replace(/_/g,"-")))){let n=t[1].toLowerCase(),s=t[3]?t[3].toUpperCase():void 0;const r=t[2]?t[2].toLowerCase():void 0,a=t[4]?t[4].slice(1):void 0,i=t[6];return n=X[n]||n,i&&(t=E.exec(i))||a&&(t=E.exec(a))?`en_US_${t[1].toLowerCase()}`:(n==="zh"&&!s&&(r==="hans"?s="CN":r==="hant"&&(s="TW")),n+(s?"_"+s+(a?"_"+a.replace("-","_"):""):""))}return o},H=e=>{if(!e)return o;if(e==="zh_HK")return"zh_TW";const t=e.lastIndexOf("_");return t>=0?e.slice(0,t):e!==o?o:""},v=new Set,Z=new Set,w=new Map,f=new Map,y=new Map,re=(e,t,n)=>{const s=`${e}/${t}`;y.set(s,n)},_=(e,t)=>{w.set(e,t)},Y=e=>w.get(e),m=(e,t)=>{const n=`${e}/${t}`;return y.has(n)},J=(e,t)=>{const n=`${e}/${t}`,s=y.get(n);return s&&!f.get(n)&&f.set(n,s(t)),f.get(n)},q=e=>{v.has(e)||(console.warn(`[${e}]: Message bundle assets are not configured. Falling back to English texts.`,` Add \`import "${e}/dist/Assets.js"\` in your bundle and make sure your build tool supports dynamic imports and JSON imports. See section "Assets" in the documentation for more information.`),v.add(e))},P=(e,t)=>t!==g&&!m(e,t),C=async e=>{const t=l().getLanguage(),n=l().getRegion(),s=l().getVariant();let r=t+(n?`-${n}`:"")+(s?`-${s}`:"");if(P(e,r))for(r=k(r);P(e,r);)r=H(r);const a=z();if(r===g&&!a){_(e,null);return}if(!m(e,r)){q(e);return}try{const i=await J(e,r);_(e,i)}catch(i){const u=i;Z.has(u.message)||(Z.add(u.message),console.error(u.message))}};M(e=>{const t=[...w.keys()];return Promise.all(t.map(C))});const Q=/('')|'([^']+(?:''[^']*)*)(?:'|$)|\{([0-9]+(?:\s*,[^{}]*)?)\}|[{}]/g,O=(e,t)=>(t=t||[],e.replace(Q,(n,s,r,a,i)=>{if(s)return"'";if(r)return r.replace(/''/g,"'");if(a){const u=typeof a=="string"?parseInt(a):a;return String(t[u])}throw new Error(`[i18n]: pattern syntax error at pos ${i}`)})),d=new Map;class N{constructor(t){this.packageName=t}getText(t,...n){if(typeof t=="string"&&(t={key:t,defaultText:t}),!t||!t.key)return"";const s=Y(this.packageName);s&&!s[t.key]&&console.warn(`Key ${t.key} not found in the i18n bundle, the default text will be used`);const r=s&&s[t.key]?s[t.key]:t.defaultText||t.key;return O(r,n)}}const j=e=>{if(d.has(e))return d.get(e);const t=new N(e);return d.set(e,t),t},ae=async e=>(await C(e),j(e));export{N as I,M as a,ae as b,V as c,ne as d,l as g,re as r,se as s};
