import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';
import { DocsHeader } from '@docs/DocsHeader';
import { Footer } from '@docs/Footer';
import { DonutChart } from './DonutChart.js';
import { simpleDataSet, simpleDataSetWithSmallValues } from '../../resources/DemoProps.js';

<Meta
  title="Charts /  DonutChart"
  component={DonutChart}
  args={{
    dataset: simpleDataSet,
    style: { width: '50%' },
    dimension: {
      accessor: 'name'
    },
    measure: {
      accessor: 'users'
    }
  }}
  argTypes={{
    dataset: {
      control: { disable: true }
    },
    children: {
      control: { disable: true }
    }
  }}
/>

<DocsHeader />

## Example

<Canvas>
  <Story name="Default">{(props) => <DonutChart {...props} />}</Story>
</Canvas>

## Properties

<ArgsTable story="Default" />

<br />
<br />

## More Examples

### With Custom Color

<Canvas>
  <Story
    name="With Custom Color"
    args={{
      measure: {
        accessor: 'users',
        colors: ['#f00', 'green', 'var(--sapNegativeColor)', 'black', 'yellow', 'pink']
      }
    }}
  >
    {(props) => <DonutChart {...props} />}
  </Story>
</Canvas>

### With Padding Angle

<Canvas>
  <Story name="With Padding Angle">{(props) => <DonutChart {...props} chartConfig={{ paddingAngle: 5 }} />}</Story>
</Canvas>

### With Custom Radius

<Canvas>
  <Story
    name="With Custom Radius"
    args={{
      chartConfig: {
        innerRadius: '20%',
        outerRadius: '90%'
      }
    }}
  >
    {(props) => <DonutChart {...props} />}
  </Story>
</Canvas>

### Loading Placeholder

<Canvas>
  <Story name="Loading Placeholder">
    <DonutChart />
  </Story>
</Canvas>

### With Formatter

<Canvas>
  <Story
    name="With Formatter"
    args={{
      dimension: {
        accessor: 'name',
        formatter: (el) => el.slice(0, 3)
      },
      measure: {
        accessor: 'users',
        formatter: (el) => el / 10
      }
    }}
  >
    {(props) => <DonutChart {...props} />}
  </Story>
</Canvas>

### Highlight active segment

<Canvas>
  <Story
    name="Highlight Active Segment"
    args={{
      chartConfig: {
        activeSegment: 9,
        showActiveSegmentDataLabel: true
      }
    }}
  >
    {(props) => <DonutChart {...props} />}
  </Story>
</Canvas>

### Hide labels

<Canvas>
  <Story
    name="Hide Labels"
    args={{
      measure: {
        accessor: 'users',
        hideDataLabel: (chartConfig) => {
          if (chartConfig.percent < 0.01) {
            return true;
          }
        }
      },
      dataset: simpleDataSetWithSmallValues
    }}
  >
    {(props) => <DonutChart {...props} />}
  </Story>
</Canvas>

<Footer />
