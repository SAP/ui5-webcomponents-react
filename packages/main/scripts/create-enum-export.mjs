import fs from 'fs';
import path from 'path';
import PATHS from '../../../config/paths.js';

const ENUMS_DIR = path.resolve(PATHS.packages, 'main', 'src', 'enums');
const INTERNAL_COMPONENTS = ['GrowingMode', 'index'];

const enums = fs
  .readdirSync(ENUMS_DIR)
  .filter((file) => fs.statSync(`${ENUMS_DIR}/${file}`).isFile())
  .map((file) => path.basename(file, '.ts'))
  // filter internal components
  .filter((file) => !INTERNAL_COMPONENTS.includes(file));

let fileContent = `// This is an autogenerated file, please do not modify this file manually.
// In case you added a new file to the /enums folder, please rerun the scripts/create-enum-export.js script.

`;

fileContent += enums.map((file) => `export * from './${file}';`).join('\n');

fs.writeFileSync(path.join(PATHS.packages, 'main', 'src', 'enums', 'index.ts'), fileContent);
