import { ArgsTable, Canvas, Markdown, Meta, Story } from '@storybook/blocks';
import { ViewSettingsDialog as OriginalViewSettingsDialog } from './index';
import { ViewSettingsDialog } from './CodeGen';
import { DocsHeader, DomRefTable, Footer } from '@sb/components';
import Description from './ViewSettingsDialogDescription.md?raw';
import { Button, FilterItem, FilterItemOption, SortItem } from '../../index';
import { useEffect, useRef } from 'react';
import { isChromatic } from '@sb/utils';
import SubcomponentsSection from '@sb/docs/SubcomponentsSection.md?raw';
import SortItemDescription from '../SortItem/SortItemDescription.md?raw';
import FilterItemDescription from '../FilterItem/FilterItemDescription.md?raw';
import FilterItemOptionDescription from '../FilterItemOption/FilterItemOptionDescription.md?raw';
import ViewSettingsDialogDomRef from './ViewSettingsDialogDomRef.json';

<Meta
  title="Modals & Popovers / ViewSettingsDialog"
  component={OriginalViewSettingsDialog}
  subcomponents={{ FilterItem, FilterItemOption, SortItem }}
  argTypes={{
    filterItems: { control: { disable: true } },
    sortItems: { control: { disable: true } }
  }}
  parameters={{
    chromatic: { delay: 999 }
  }}
  args={{
    filterItems: (
      <>
        <FilterItem
          text="Position"
          values={
            <>
              <FilterItemOption text="CEO" />
              <FilterItemOption text="CTO" />
              <FilterItemOption text="CIO" />
            </>
          }
        />
        <FilterItem
          text="Department"
          values={
            <>
              <FilterItemOption text="Legal" />
              <FilterItemOption text="Finance" />
              <FilterItemOption text="Development" />
            </>
          }
        />
      </>
    ),
    sortItems: (
      <>
        <SortItem text="Name" />
        <SortItem text="Position" />
        <SortItem text="Company" />
        <SortItem text="Department" />
      </>
    )
  }}
/>

<DocsHeader since="0.20.0" />

<br />

## Example

<Canvas>
  <Story name="Default">
    {(args) => {
      const ref = useRef(null);
      useEffect(() => {
        if (isChromatic) {
          ref.current.show();
        }
      });
      return (
        <>
          <Button
            onClick={() => {
              ref.current.show();
            }}
          >
            Show ViewSettingsDialog
          </Button>
          <ViewSettingsDialog ref={ref} {...args} />
        </>
      );
    }}
  </Story>
</Canvas>

## Properties

<ArgsTable of="^" />

<Markdown>{Description}</Markdown>

<DomRefTable rows={ViewSettingsDialogDomRef} />

## Opening ViewSettingsDialog

`ViewSettingsDialog`s can be opened by attaching a `ref` to the component and then calling the corresponding **`show`** method.

```jsx
const ViewSettingsDialogComponent = () => {
  const dialogRef = useRef(null);
  const onButtonClick = () => {
    dialogRef.current.show();
  };
  return (
    <>
      <Button onClick={onButtonClick}>Open ViewSettingsDialog</Button>
      <ViewSettingsDialog
        ref={dialogRef}
        sortItems={
          <>
            <SortItem text="Name" />
            <SortItem text="Position" />
            <SortItem text="Company" />
            <SortItem text="Department" />
          </>
        }
      />
    </>
  );
};
```

<Markdown>{SubcomponentsSection}</Markdown>

## SortItem

<Markdown>{SortItemDescription}</Markdown>

## FilterItem

<Markdown>{FilterItemDescription}</Markdown>

## FilterItemOption

<Markdown>{FilterItemOptionDescription}</Markdown>

<Footer />
