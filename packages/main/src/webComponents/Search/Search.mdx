import { ArgTypesWithNote, ControlsWithNote, DocsHeader, Footer } from '@sb/components';
import { Canvas, Description, Meta } from '@storybook/addon-docs/blocks';
import * as ComponentStories from './Search.stories';
import { SearchItem } from '../SearchItem/index.js';
import { SearchItemGroup } from '../SearchItemGroup/index.js';
import { SearchItemShowMore } from '../SearchItemShowMore/index.js';
import { SearchMessageArea } from '../SearchMessageArea/index.js';
import { SearchScope } from '../SearchScope/index.js';

<Meta of={ComponentStories} />

<DocsHeader of={ComponentStories} experimental />

<br />

## Example

<Canvas of={ComponentStories.Default} />

## Properties

<ControlsWithNote of={ComponentStories.Default} />

## More Examples

### Search with Scope and SearchItems

A `Search` component with enabled scope, items and filtering by scope.

<Canvas of={ComponentStories.WithScopeAndItems} />

<details>

    <summary>Show static code</summary>

```tsx
const scopeData = [
  { name: 'Laptop', scope: 'products' },
  { name: 'Leave Requests', scope: 'apps' },
  { name: 'Log work', scope: 'apps' },
  { name: 'Manage Products', scope: 'apps' },
  { name: 'Mobile Phones', scope: 'products' },
  { name: 'Tablet', scope: 'products' },
];

function SearchComponent(props) {
  const [filterData, setFilterData] = useState(scopeData);

  const handleScopeChange: SearchPropTypes['onScopeChange'] = (e) => {
    props.onScopeChange(e);
    const { scope } = e.detail;
    if (scope.text === 'All') {
      setFilterData(scopeData);
    } else {
      setFilterData(
        scopeData.filter((item) => {
          return item.scope === scope.text.toLowerCase();
        }),
      );
    }
  };

  return (
    <Search {...props} onScopeChange={handleScopeChange}>
      {filterData.map((item) => {
        return <SearchItem key={item.name} text={item.name} scopeName={item.scope} />;
      })}
    </Search>
  );
}
```

</details>

### Search with `SearchShowMore` Item

Search with Grouped Suggestions and Show More (N) Item

<Canvas of={ComponentStories.ShowMoreItem} />

<details>
    <summary>Show static code</summary>

```tsx
const allItems = [
  { text: 'Search Item 1', icon: historyIcon },
  { text: 'Search Item 2', icon: searchIcon },
  { text: 'Search Item 3', icon: historyIcon },
  { text: 'Search Item 4', icon: historyIcon },
  { text: 'Search Item 5', icon: searchIcon },
  { text: 'Search Item 6', icon: globeIcon },
];
const visibleItems = allItems.slice(0, 3);
const hiddenItems = allItems.slice(3);

export function ShowMoreItem() {
  const [showHiddenItems, setShowHiddenItems] = useState(false);

  return (
    <Search showClearIcon={true} placeholder="Placeholder">
      <SearchItemGroup headerText="Group Header 1">
        {visibleItems.map((item) => (
          <SearchItem key={item.text} text={item.text} icon={item.icon} />
        ))}
        {!showHiddenItems && (
          <SearchItemShowMore itemsToShowCount={hiddenItems.length} onClick={() => setShowHiddenItems(true)} />
        )}
        {showHiddenItems && hiddenItems.map((item) => <SearchItem key={item.text} text={item.text} icon={item.icon} />)}
      </SearchItemGroup>

      <SearchItemGroup headerText="Group Header 2">
        <SearchItem text="Search Item 1" icon={historyIcon} />
        <SearchItem text="Search Item 2" icon={historyIcon} />
        <SearchItem text="Search Item 3" icon={globeIcon} />
      </SearchItemGroup>
    </Search>
  );
}
```

</details>

## Subcomponents

### SearchItem

<Description of={SearchItem} />
<ArgTypesWithNote metaOf={ComponentStories} of={SearchItem} />

### SearchItemGroup

<Description of={SearchItemGroup} />
<ArgTypesWithNote metaOf={ComponentStories} of={SearchItemGroup} />

### SearchItemShowMore

<Description of={SearchItemShowMore} />
<ArgTypesWithNote metaOf={ComponentStories} of={SearchItemShowMore} />

### SearchMessageArea

<Description of={SearchMessageArea} />
<ArgTypesWithNote metaOf={ComponentStories} of={SearchMessageArea} />

### SearchScope

<Description of={SearchScope} />
<ArgTypesWithNote metaOf={ComponentStories} of={SearchScope} />

<Footer />
