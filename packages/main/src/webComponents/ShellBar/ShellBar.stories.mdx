import { Canvas, Markdown, Meta, Story } from '@storybook/blocks';
import { ArgsTableWithNote } from '@docs/ArgsTableWithNote';
import { Icon, Input, Popover, ShellBar, ShellBarItem, StandardListItem } from '../..';
import { DocsHeader } from '@docs/DocsHeader';
import { Footer } from '@docs/Footer';
import Description from './ShellBarDescription.md?raw';
import addIcon from '@ui5/webcomponents-icons/dist/add.js';
import searchIcon from '@ui5/webcomponents-icons/dist/search.js';
import { useRef } from 'react';
import SubcomponentsSection from '@sb/docs/SubcomponentsSection.md?raw';
import ShellBarItemDescription from '../ShellBarItem/ShellBarItemDescription.md?raw';
import ShellBarMethods from './ShellBarMethods.md?raw';
import { Logo, Profile } from './CodeGen';

<Meta
  title="Layouts & Floorplans / ShellBar"
  component={ShellBar}
  subcomponents={{ ShellBarItem }}
  argTypes={{
    children: { control: { disable: true } },
    logo: { control: { disable: true } },
    menuItems: { control: { disable: true } },
    profile: { control: { disable: true } },
    searchField: { control: { disable: true } },
    startButton: { control: { disable: true } }
  }}
  args={{
    logo: Logo,
    profile: Profile,
    searchField: <Input showClearIcon icon={<Icon name={searchIcon} interactive />} />,
    notificationsCount: '10',
    primaryTitle: 'Shell Bar',
    secondaryTitle: 'Fiori 3 Shell Bar',
    showCoPilot: true,
    showNotifications: true,
    showProductSwitch: true
  }}
/>

<DocsHeader since="0.4.0" />

<br />

## Example

<Canvas>
  <Story name="Default">
    {(args) => {
      return (
        <ShellBar
          {...args}
          menuItems={
            <>
              <StandardListItem data-key="1">Menu Item 1</StandardListItem>
              <StandardListItem data-key="2">Menu Item 2</StandardListItem>
              <StandardListItem data-key="3">Menu Item 3</StandardListItem>
            </>
          }
        />
      );
    }}
  </Story>
</Canvas>

## Properties

<ArgsTableWithNote story="." />

<Markdown>{Description}</Markdown>

<Markdown>{ShellBarMethods}</Markdown>

<br />

# More Examples

<br />

## ShellBar with customizable ShellBarItem

<Canvas>
  <Story
    name="with customizable ShellBarItem"
    args={{
      count: '2',
      icon: addIcon,
      text: 'add'
    }}
    argTypes={{
      count: { description: `Defines the count displayed in the top-right corner.` },
      icon: { description: `Defines the name of the item's icon.` },
      text: {
        description: `Defines the item text.<br /><br />__Note:__ <code>text</code> will only be visible in mobile view.`
      },
      onClick: {
        description: `Fired, when the item is pressed.<br /><br />__Note:__ To get the DOM reference of the clicked \`ShellBarItem\`, use \`event.detail.targetRef\`.`
      },
      notificationsCount: { table: { disable: true } },
      primaryTitle: { table: { disable: true } },
      secondaryTitle: { table: { disable: true } },
      showCoPilot: { table: { disable: true } },
      showNotifications: { table: { disable: true } },
      showProductSwitch: { table: { disable: true } },
      children: { table: { disable: true } },
      logo: { table: { disable: true } },
      menuItems: { table: { disable: true } },
      profile: { table: { disable: true } },
      searchField: { table: { disable: true } },
      startButton: { table: { disable: true } },
      onCoPilotClick: { table: { disable: true } },
      onLogoClick: { table: { disable: true } },
      onMenuItemClick: { table: { disable: true } },
      onNotificationsClick: { table: { disable: true } },
      onProductSwitchClick: { table: { disable: true } },
      onProfileClick: { table: { disable: true } },
      className: { table: { disable: true } },
      style: { table: { disable: true } }
    }}
  >
    {(args) => {
      const popoverRef = useRef(null);
      const handleShellBarItemClick = (e) => {
        args.onClick(e);
        popoverRef.current.showAt(e.detail.targetRef);
      };
      return (
        <>
          <ShellBar>
            <ShellBarItem {...args} onClick={handleShellBarItemClick} />
          </ShellBar>
          <Popover ref={popoverRef}>Hello there!</Popover>
        </>
      );
    }}
  </Story>
</Canvas>

<ArgsTableWithNote
  story="with customizable ShellBarItem"
  noteText={`The props in the table below are part of the "ShellBarItem" component.`}
/>

### Recipe: How to open a popover on ShellBarItem click?

To open a popover with the `ShellBarItem` you can use the `targetRef` property of the `onItemClick` event.

```jsx
const ShellBarComponent = () => {
  const popoverRef = useRef(null);
  const handleShellBarItemClick = (e) => {
    popoverRef.current.showAt(e.detail.targetRef);
  };
  return (
    <>
      <ShellBar>
        <ShellBarItem onItemClick={handleShellBarItemClick} icon="add" text="add" />
      </ShellBar>
      <Popover ref={popoverRef}>Hello there!</Popover>
    </>
  );
};
```

<Markdown>{SubcomponentsSection}</Markdown>

## ShellBarItem

<Markdown>{ShellBarItemDescription}</Markdown>

<Footer />
