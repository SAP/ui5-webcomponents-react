import { ControlsWithNote, DocsHeader, Footer } from '@sb/components';
import SubcomponentsSection from '@sb/docs/SubcomponentsSection.md?raw';
import DesignExamples from '@sb/docs/DesignCompliantExampleSection.md?raw';
import { ArgTypes, Canvas, Description, Markdown, Meta } from '@storybook/addon-docs/blocks';
import { ShellBarItem } from '../ShellBarItem/index';
import { ShellBarSpacer } from '../ShellBarSpacer/index';
import { ShellBarSearch } from '../ShellBarSearch/index';
import * as ComponentStories from './ShellBar.stories';
import { excludePropsForAbstract } from '@sb/utils';

<Meta of={ComponentStories} />

<DocsHeader since="0.4.0" />

<br />

## Example

<Canvas of={ComponentStories.Default} />

## Properties

<ControlsWithNote of={ComponentStories.Default} />

<Markdown>{DesignExamples}</Markdown>

### All Features

A comprehensive ShellBar demonstrating all available features including notifications, search, content items, and profile.

<Canvas of={ComponentStories.AllFeatures} />

### Embedded Back Navigation

ShellBar with embedded back navigation button in the start area.

<Canvas of={ComponentStories.EmbeddedBackNavigation} />

### Trial Example

ShellBar configured for trial environments with trial tags and remaining days indicator.

<Canvas of={ComponentStories.TrialExample} />

### Multiple Productive Instances

ShellBar setup for multiple productive system instances with region indicators.

<Canvas of={ComponentStories.ProductiveInstances} />

### Multiple Non-Productive Instances

ShellBar setup for multiple non-productive system instances with system and region tags.

<Canvas of={ComponentStories.NonProductiveInstances} />

## More examples

### Open a Popover on ShellBarItem click

To open a popover with the `ShellBarItem` you can use the `detail.targetRef` property of the `onClick` event.

```tsx
const ShellBarComponent = () => {
  const popoverRef = useRef<PopoverDomRef>(null);
  const [popoverOpen, setPopoverOpen] = useState(false);
  const handleShellBarItemClick: ShellBarItemPropTypes['onClick'] = (e) => {
    popoverRef.current!.opener = e.detail.targetRef;
    setPopoverOpen(true);
  };
  return (
    <>
      <ShellBar>
        <ShellBarItem onClick={handleShellBarItemClick} icon="add" text="add" />
      </ShellBar>
      <Popover
        ref={popoverRef}
        open={popoverOpen}
        onClose={() => {
          setPopoverOpen(false);
        }}
      >
        Hello there!
      </Popover>
    </>
  );
};
```

<Markdown>{SubcomponentsSection}</Markdown>

## ShellBarItem

<Description of={ShellBarItem} />
<ArgTypes hideHTMLPropsNote exclude={excludePropsForAbstract} of={ShellBarItem} />

## ShellBarSpacer

<Description of={ShellBarSpacer} />
<ArgTypes hideHTMLPropsNote exclude={excludePropsForAbstract} of={ShellBarSpacer} />

## ShellBarSearch (experimental)

<Description of={ShellBarSearch} />
<ArgTypes hideHTMLPropsNote of={ShellBarSearch} />

<Footer />
