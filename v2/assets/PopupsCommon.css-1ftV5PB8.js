import{j as d,h as y,F as E,p as l,d as m,s as n,m as L,y as S,B as k,b as z,e as x,E as R,X as C}from"./jsx-runtime-2NO35c9p.js";import{l as c}from"./event-strict-DgQLNDEV.js";import{d as O}from"./slot-_4yKMUwC.js";import{b as w,H as I}from"./FocusableElements--dusX2Bm.js";import{y as $,T as A,p as N,A as j,L as H}from"./AccessibilityTextsHelper-4hgGqLyb.js";import{m as X,S as G,c as q}from"./CustomElementsScope-BZQ-yqK5.js";import{H as W,m as K,b as U}from"./Keys-CLf_QmYW.js";import{t as Y}from"./getActiveElement-kltGt_DR.js";import{f as P}from"./ResizeHandler-DGDOSiJK.js";import{i as F}from"./MediaRange-Bnzt26Xb.js";import{n as J}from"./toLowercaseEnumValue-C_8o5td_.js";import{d as v}from"./parameters-bundle.css-D0uTR4GL.js";const Fe=(o,e,t)=>Math.min(Math.max(o,e),Math.max(e,t)),D=()=>{const o=Y();return o&&typeof o.focus=="function"?o:null},Q=o=>{const e=D();return e?T(o,e):!1},T=(o,e)=>{let t=o;if(t.shadowRoot&&(t=Array.from(t.shadowRoot.children).find(a=>a.localName!=="style"),!t))return!1;if(t===e)return!0;const r=t.localName==="slot"?t.assignedNodes():t.children;return r?Array.from(r).some(a=>T(a,e)):!1},V=(o,e,t)=>o>=t.left&&o<=t.right&&e>=t.top&&e<=t.bottom,De=(o,e)=>{let t,r;if(o instanceof MouseEvent)t=o.clientX,r=o.clientY;else{const a=o.touches[0];t=a.clientX,r=a.clientY}return V(t,r,e)};function Z(o){return"isUI5Element"in o&&"_show"in o}const ee=o=>{const e=o.parentElement||o.getRootNode&&o.getRootNode().host;return e&&(Z(e)||e===document.documentElement)?e:ee(e)};function oe(){return d("div",{class:"ui5-block-layer",onKeyDown:this._preventBlockLayerFocus,onMouseDown:this._preventBlockLayerFocus})}function te(o){return y(E,{children:[oe.call(this),y("section",{"root-element":!0,style:this.styles.root,class:this.classes.root,role:this._role,"aria-describedby":this.ariaDescribedByIds,"aria-modal":this._ariaModal,"aria-label":this._ariaLabel,"aria-labelledby":this._ariaLabelledBy,onKeyDown:this._onkeydown,onFocusOut:this._onfocusout,onMouseUp:this._onmouseup,onMouseDown:this._onmousedown,children:[d("span",{class:"first-fe","data-ui5-focus-trap":!0,role:"none",tabIndex:0,onFocusIn:this.forwardToLast}),((o==null?void 0:o.beforeContent)||ie).call(this),d("div",{style:this.styles.content,class:this.classes.content,onScroll:this._scroll,part:"content",children:d("slot",{})}),this.ariaDescriptionText&&d("span",{id:"accessibleDescription",class:"ui5-hidden-text",children:this.ariaDescriptionText}),((o==null?void 0:o.afterContent)||se).call(this),d("span",{class:"last-fe","data-ui5-focus-trap":!0,role:"none",tabIndex:0,onFocusIn:this.forwardToFirst})]})]})}function ie(){}function se(){}var g;(function(o){o.None="None",o.Dialog="Dialog",o.AlertDialog="AlertDialog"})(g||(g={}));const p=X("OpenedPopupsRegistry",{openedRegistry:[]}),re=(o,e=[])=>{p.openedRegistry.some(t=>t.instance===o)||p.openedRegistry.push({instance:o,parentPopovers:e}),B(),p.openedRegistry.length===1&&ae()},ne=o=>{p.openedRegistry=p.openedRegistry.filter(e=>e.instance!==o),B(),p.openedRegistry.length||pe()},Te=()=>[...p.openedRegistry],M=o=>{p.openedRegistry.length&&W(o)&&(o.stopPropagation(),p.openedRegistry[p.openedRegistry.length-1].instance.closePopup(!0))},ae=()=>{document.addEventListener("keydown",M)},pe=()=>{document.removeEventListener("keydown",M)},B=()=>{let o,e=!1;for(let t=p.openedRegistry.length-1;t>=0;t--)o=p.openedRegistry[t].instance,!e&&o.isModal?(o.isTopModalPopup=!0,e=!0):o.isTopModalPopup=!1};l("@ui5/webcomponents-theming","sap_horizon",async()=>m);l("@ui5/webcomponents","sap_horizon",async()=>v);const ue=`:host{min-width:1px;overflow:visible;border:none;inset:unset;margin:0;padding:0}
`;l("@ui5/webcomponents-theming","sap_horizon",async()=>m);l("@ui5/webcomponents","sap_horizon",async()=>v);const le=`.ui5-block-layer{position:fixed;z-index:-1;display:none;inset:-500px;outline:none;pointer-events:all}
`;l("@ui5/webcomponents-theming","sap_horizon",async()=>m);l("@ui5/webcomponents","sap_horizon",async()=>v);const de=`.ui5-popup-scroll-blocker{overflow:hidden}
`;var s=function(o,e,t,r){var a=arguments.length,u=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,e,t,r);else for(var b=o.length-1;b>=0;b--)(f=o[b])&&(u=(a<3?f(u):a>3?f(e,t,u):f(e,t))||u);return a>3&&u&&Object.defineProperty(e,t,u),u},h;const ce=()=>{G("data-ui5-popup-scroll-blocker")||q(de,"data-ui5-popup-scroll-blocker")};ce();const _=new Set;let i=h=class extends k{constructor(){super(),this.preventFocusRestore=!1,this.accessibleRole="Dialog",this.preventInitialFocus=!1,this.isTopModalPopup=!1,this.onPhone=!1,this.onDesktop=!1,this._opened=!1,this._open=!1,this._resizeHandler=this._resize.bind(this),this._getRealDomRef=()=>this.shadowRoot.querySelector("[root-element]")}onBeforeRendering(){this.onPhone=z(),this.onDesktop=x()}onAfterRendering(){R().then(()=>{this._updateMediaRange()})}onEnterDOM(){this.setAttribute("popover","manual"),P.register(this,this._resizeHandler),x()&&this.setAttribute("desktop",""),this.tabIndex=-1,this.open&&(this.showPopover(),this.openPopup()),$(this,this._updateAssociatedLabelsTexts.bind(this))}onExitDOM(){this._opened&&(h.unblockPageScrolling(this),this._removeOpenedPopup()),P.deregister(this,this._resizeHandler),A(this)}set open(e){this._open!==e&&(this._open=e,e?this.openPopup():this.closePopup())}get open(){return this._open}async openPopup(){if(this._opened)return;if(!this.fireDecoratorEvent("before-open")){this.open=!1;return}this.isModal&&h.blockPageScrolling(this),this._focusedElementBeforeOpen=D(),this._show(),this._opened=!0,this.getDomRef()&&this._updateMediaRange(),this._addOpenedPopup(),this.open=!0,await this.applyInitialFocus(),await R(),this.isConnected&&this.fireDecoratorEvent("open")}_resize(){this._updateMediaRange()}_preventBlockLayerFocus(e){e.preventDefault()}static blockPageScrolling(e){_.add(e),_.size===1&&document.documentElement.classList.add("ui5-popup-scroll-blocker")}static unblockPageScrolling(e){_.delete(e),_.size===0&&document.documentElement.classList.remove("ui5-popup-scroll-blocker")}_scroll(e){this.fireDecoratorEvent("scroll",{scrollTop:e.target.scrollTop,targetRef:e.target})}_onkeydown(e){const t=e.target===this._root&&K(e),r=U(e)&&!this.open;(t||r)&&e.preventDefault()}_onfocusout(e){e.relatedTarget||(this._shouldFocusRoot=!0)}_onmousedown(e){this.shadowRoot.contains(e.target)?this._shouldFocusRoot=!0:this._shouldFocusRoot=!1}_onmouseup(){this._shouldFocusRoot&&(C()&&this._root.focus(),this._shouldFocusRoot=!1)}async forwardToFirst(){const e=await w(this);e?e.focus():this._root.focus()}async forwardToLast(){const e=await I(this);e?e.focus():this._root.focus()}async applyInitialFocus(){this.preventInitialFocus||await this.applyFocus()}async applyFocus(){if(this.querySelector("[autofocus]")||(await this._waitForDomRef(),this.getRootNode()===this))return;let e;this.initialFocus&&(e=this.getRootNode().getElementById(this.initialFocus)||document.getElementById(this.initialFocus)),e=e||await w(this)||this._root,e&&(e===this._root&&(e.tabIndex=-1),e.focus())}isFocusWithin(){return Q(this._root)}_updateMediaRange(){this.mediaRange=F.getCurrentRange(F.RANGESETS.RANGE_4STEPS,this.getDomRef().offsetWidth)}_updateAssociatedLabelsTexts(){this._associatedDescriptionRefTexts=N(this)}_addOpenedPopup(){re(this)}closePopup(e=!1,t=!1,r=!1){if(!this._opened)return;if(!this.fireDecoratorEvent("before-close",{escPressed:e})){this.open=!0;return}this._opened=!1,this.isModal&&h.unblockPageScrolling(this),this.hide(),this.open=!1,t||this._removeOpenedPopup(),!this.preventFocusRestore&&!r&&this.resetFocus(),this.fireDecoratorEvent("close")}_removeOpenedPopup(){ne(this)}resetFocus(){var e;(e=this._focusedElementBeforeOpen)==null||e.focus(),this._focusedElementBeforeOpen=null}_show(){this.isConnected&&(this.setAttribute("popover","manual"),this.showPopover())}hide(){this.isConnected&&this.hidePopover()}get _ariaLabel(){return j(this)}get _accInfoAriaDescription(){return this.ariaDescriptionText||""}get ariaDescriptionText(){return this._associatedDescriptionRefTexts||H(this)}get ariaDescriptionTextId(){return this.ariaDescriptionText?"accessibleDescription":""}get ariaDescribedByIds(){return[this.ariaDescriptionTextId].filter(Boolean).join(" ")}get _root(){return this.shadowRoot.querySelector(".ui5-popup-root")}get _role(){return this.accessibleRole===g.None?void 0:J(this.accessibleRole)}get _ariaModal(){return this.accessibleRole===g.None?void 0:"true"}get contentDOM(){return this.shadowRoot.querySelector(".ui5-popup-content")}get styles(){return{root:{},content:{}}}get classes(){return{root:{"ui5-popup-root":!0},content:{"ui5-popup-content":!0}}}};s([n()],i.prototype,"initialFocus",void 0);s([n({type:Boolean})],i.prototype,"preventFocusRestore",void 0);s([n()],i.prototype,"accessibleName",void 0);s([n()],i.prototype,"accessibleNameRef",void 0);s([n()],i.prototype,"accessibleRole",void 0);s([n()],i.prototype,"accessibleDescription",void 0);s([n()],i.prototype,"accessibleDescriptionRef",void 0);s([n({noAttribute:!0})],i.prototype,"_associatedDescriptionRefTexts",void 0);s([n()],i.prototype,"mediaRange",void 0);s([n({type:Boolean})],i.prototype,"preventInitialFocus",void 0);s([n({type:Boolean,noAttribute:!0})],i.prototype,"isTopModalPopup",void 0);s([O({type:HTMLElement,default:!0})],i.prototype,"content",void 0);s([n({type:Boolean})],i.prototype,"onPhone",void 0);s([n({type:Boolean})],i.prototype,"onDesktop",void 0);s([n({type:Boolean})],i.prototype,"open",null);i=h=s([L({renderer:S,styles:[ue,le],template:te}),c("before-open",{cancelable:!0}),c("open"),c("before-close",{cancelable:!0}),c("close"),c("scroll",{bubbles:!0})],i);const Be=i;l("@ui5/webcomponents-theming","sap_horizon",async()=>m);l("@ui5/webcomponents","sap_horizon",async()=>v);const Ee=`.ui5-hidden-text{position:absolute;clip:rect(1px,1px,1px,1px);user-select:none;left:-1000px;top:-1000px;pointer-events:none;font-size:0}:host{position:fixed;background:var(--sapGroup_ContentBackground);border-radius:var(--_ui5-v2-12-0_popup_border_radius);min-height:2rem;box-sizing:border-box}:host([open]){display:flex}.ui5-popup-root{background:inherit;border-radius:inherit;width:100%;box-sizing:border-box;display:flex;flex-direction:column;overflow:hidden;flex:1 1 auto;outline:none}.ui5-popup-root .ui5-popup-header-root{box-shadow:var(--_ui5-v2-12-0_popup_header_shadow);border-bottom:var(--_ui5-v2-12-0_popup_header_border)}.ui5-popup-content{color:var(--sapTextColor);flex:auto}.ui5-popup-content:focus{outline:var(--sapContent_FocusWidth) var(--sapContent_FocusStyle) var(--sapContent_FocusColor);outline-offset:calc(-1 * var(--sapContent_FocusWidth));border-radius:var(--_ui5-v2-12-0_popup_border_radius)}.ui5-popup-footer-root{background:var(--sapPageFooter_Background);border-top:1px solid var(--sapPageFooter_BorderColor);color:var(--sapPageFooter_TextColor)}.ui5-popup-header-root,.ui5-popup-footer-root,:host([header-text]) .ui5-popup-header-text{margin:0;display:flex;justify-content:center;align-items:center}.ui5-popup-header-root .ui5-popup-header-text{font-weight:var(--sapFontHeaderFamily);font-size:var(--sapFontHeader5Size);color:var(--sapPageHeader_TextColor)}.ui5-popup-content{overflow:auto;box-sizing:border-box}:host([header-text]) .ui5-popup-header-text{min-height:var(--_ui5-v2-12-0_popup_default_header_height);max-height:var(--_ui5-v2-12-0_popup_default_header_height);line-height:var(--_ui5-v2-12-0_popup_default_header_height);text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:100%;display:inline-flex;justify-content:var(--_ui5-v2-12-0_popup_header_prop_header_text_alignment)}:host([header-text]) .ui5-popup-header-root{justify-content:var(--_ui5-v2-12-0_popup_header_prop_header_text_alignment)}:host(:not([header-text])) .ui5-popup-header-text{display:none}:host([media-range="S"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-12-0_popup_content_padding_s)}:host([media-range="M"]) .ui5-popup-content,:host([media-range="L"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-12-0_popup_content_padding_m_l)}:host([media-range="XL"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-12-0_popup_content_padding_xl)}.ui5-popup-header-root{background:var(--_ui5-v2-12-0_popup_header_background)}:host([media-range="S"]) .ui5-popup-header-root,:host([media-range="S"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-12-0_popup_header_footer_padding_s);padding-right:var(--_ui5-v2-12-0_popup_header_footer_padding_s)}:host([media-range="M"]) .ui5-popup-header-root,:host([media-range="L"]) .ui5-popup-header-root,:host([media-range="M"]) .ui5-popup-footer-root,:host([media-range="L"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-12-0_popup_header_footer_padding_m_l);padding-right:var(--_ui5-v2-12-0_popup_header_footer_padding_m_l)}:host([media-range="XL"]) .ui5-popup-header-root,:host([media-range="XL"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-12-0_popup_header_footer_padding_xl);padding-right:var(--_ui5-v2-12-0_popup_header_footer_padding_xl)}
`;export{g as P,te as a,Be as b,Ee as c,re as d,ne as e,De as f,Te as g,ee as i,Fe as m,D as r};
