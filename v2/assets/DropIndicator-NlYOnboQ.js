import{j as x,p as C,d as j,s as v,m as L,I as M,e as T}from"./withWebComponent-CT6sGXpP.js";import{d as P}from"./parameters-bundle.css-BzaqQttB.js";let g=null,A=!1;const w=new Set,y=new Set,O=e=>{!e.dataTransfer||!(e.target instanceof HTMLElement)||y.has(e.target)||(g=e.target)},_=()=>{g=null},B=()=>{g=null},S=e=>{g=e},N=()=>g,F=()=>{A||(document.body.addEventListener("dragstart",O),document.body.addEventListener("dragend",_),document.body.addEventListener("drop",B))},U=()=>{document.body.removeEventListener("dragstart",O),document.body.removeEventListener("dragend",_),document.body.removeEventListener("drop",B),A=!1},Y=e=>{w.add(e),A||F()},q=e=>{w.delete(e),w.size===0&&A&&U()},G=e=>(y.add(e),S),J=e=>{y.delete(e)},$={subscribe:Y,unsubscribe:q,addSelfManagedArea:G,removeSelfManagedArea:J,getDraggedElement:N};function Z(e,i,a,r,t={}){const n=$.getDraggedElement(),o={targetReference:null,placement:null};if(!n&&!(t!=null&&t.crossDnD))return o;const c=a.placements;return o.targetReference=e.target,c.some(d=>{const p=t.originalEvent?{originalEvent:e}:{};return i.fireDecoratorEvent("move-over",{...p,source:{element:n},destination:{element:r,placement:d}})?!1:(e.preventDefault(),o.targetReference=a.element,o.placement=d,!0)})||(o.targetReference=null),o}function ee(e,i,a,r,t={}){e.preventDefault();const n=$.getDraggedElement();if(!n&&(t!=null&&t.crossDnD))return;const o=t.originalEvent?{originalEvent:e}:{};i.fireDecoratorEvent("move",{...o,source:{element:n},destination:{element:a,placement:r}}),n==null||n.focus()}var u=(e=>(e.Vertical="Vertical",e.Horizontal="Horizontal",e))(u||{}),s=(e=>(e.On="On",e.Before="Before",e.After="After",e))(s||{});const k=(e,i,a,r)=>{const t=Math.abs(e-i),n=Math.abs(e-a),o=Math.abs(e-r),c=Math.min(t,n,o);let d=[];switch(c){case t:d=[s.Before];break;case n:d=[s.On,t<o?s.Before:s.After];break;case o:d=[s.After];break}return d},te=(e,i,a)=>{let r=Number.POSITIVE_INFINITY,t=null;for(let m=0;m<e.length;m++){const E=e[m],{left:z,width:H,top:I,height:V}=E.getBoundingClientRect();let D;a===u.Vertical?D=I+V/2:D=z+H/2;const R=Math.abs(i-D);R<r&&(r=R,t=E)}if(!t)return null;const{width:n,height:o,left:c,right:d,top:p,bottom:l}=t.getBoundingClientRect();let f;return a===u.Vertical?f=k(i,p,p+o/2,l):f=k(i,c,c+n/2,d),{element:t,placements:f}},ne=(e,i,a)=>{let r=e.indexOf(i);const t=[];switch(a.key){case"ArrowLeft":case"ArrowUp":r--,r>=0&&t.push({element:e[r],placement:s.Before});break;case"ArrowRight":case"ArrowDown":r++,r<e.length&&t.push({element:e[r],placement:s.After});break;case"Home":e.forEach(n=>{t.push({element:n,placement:s.Before})});break;case"End":e.reverse().forEach(n=>{t.push({element:n,placement:s.After})});break}return t};function K(){return x("div",{class:{"ui5-di-rect":this.placement===s.On,"ui5-di-needle":this.placement!==s.On}})}C("@ui5/webcomponents-theming","sap_horizon",async()=>j);C("@ui5/webcomponents","sap_horizon",async()=>P);const Q=`:host{position:absolute;pointer-events:none;z-index:99}:host([orientation="Vertical"]) .ui5-di-needle{width:.125rem;height:100%;inset-block:0;background:var(--sapContent_DragAndDropActiveColor)}:host([orientation="Vertical"]){margin-left:-.0625rem}:host([orientation="Horizontal"]) .ui5-di-needle{height:.125rem;width:100%;inset-inline:0;background:var(--sapContent_DragAndDropActiveColor)}:host([orientation="Horizontal"]){margin-top:-.0625rem}:host([orientation="Horizontal"][placement="Before"][first]){margin-top:.3125rem}:host([orientation="Horizontal"][placement="After"][last]){margin-top:-.3125rem}:host([orientation="Vertical"]) .ui5-di-needle:before{left:-.1875rem;content:"";position:absolute;width:.25rem;height:.25rem;border-radius:.25rem;border:.125rem solid var(--sapContent_DragAndDropActiveColor);background-color:#fff;pointer-events:none}:host([orientation="Horizontal"]) .ui5-di-needle:before{top:-.1875rem;content:"";position:absolute;width:.25rem;height:.25rem;border-radius:.25rem;border:.125rem solid var(--sapContent_DragAndDropActiveColor);background-color:#fff;pointer-events:none}:host .ui5-di-rect{border:.125rem solid var(--sapContent_DragAndDropActiveColor);position:absolute;inset:0}:host .ui5-di-rect:before{content:" ";position:absolute;inset:0;background:var(--sapContent_DragAndDropActiveColor);opacity:.05}
`;var b=function(e,i,a,r){var t=arguments.length,n=t<3?i:r===null?r=Object.getOwnPropertyDescriptor(i,a):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,i,a,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(n=(t<3?o(n):t>3?o(i,a,n):o(i,a))||n);return t>3&&n&&Object.defineProperty(i,a,n),n};let h=class extends M{get _positionProperty(){return this.orientation===u.Vertical?"left":"top"}constructor(){super(),this.targetReference=null,this.ownerReference=null,this.placement="Before",this.orientation="Vertical"}onAfterRendering(){if(!this.targetReference||!this.ownerReference){Object.assign(this.style,{display:"none"});return}const{left:i,width:a,right:r,top:t,bottom:n,height:o}=this.targetReference.getBoundingClientRect(),{top:c,height:d}=this.ownerReference.getBoundingClientRect(),p={display:"",[this._positionProperty]:"",width:"",height:""};let l=0,f=!1,m=!1;if(this.orientation===u.Vertical){switch(this.placement){case s.Before:l=i;break;case s.On:p.width=`${a}px`,l=i;break;case s.After:l=r;break}p.height=`${o}px`}if(this.orientation===u.Horizontal){switch(this.placement){case s.Before:l=t;break;case s.On:p.height=`${o}px`,l=t;break;case s.After:l=n;break}p.width=`${a}px`,l-=c,l<=0&&(m=!0),l>=d&&(f=!0)}p[this._positionProperty]=`${l}px`,this.toggleAttribute("first",m),this.toggleAttribute("last",f),Object.assign(this.style,p)}};b([v({type:Object})],h.prototype,"targetReference",void 0);b([v({type:Object})],h.prototype,"ownerReference",void 0);b([v()],h.prototype,"placement",void 0);b([v()],h.prototype,"orientation",void 0);h=b([L({tag:"ui5-drop-indicator",renderer:T,styles:Q,template:K})],h);h.define();const oe=h;export{oe as D,u as a,Z as i,ne as k,ee as m,$ as p,s as r,te as w};
