import{a as E,l as f,s as m,p as n,c as S,d as z}from"./withWebComponent-CWrtEEjV.js";import{r as l,e as $}from"./Boot-DRGCpzpB.js";import{e as u}from"./event-CegLCnR0.js";import{s as O}from"./slot-Df15G--e.js";import{U as B}from"./UI5Element-DC8MZeOy.js";import{g as T,n as D,o as N,b as w,p as I}from"./useIsomorphicLayoutEffect-wJjydpYF.js";import{g as R,a as A}from"./FocusableElements-CrwTZl4-.js";import{g as H}from"./AriaLabelHelper-CzOXVcye.js";import{g as C}from"./getEffectiveScrollbarStyle-DWzHjL-d.js";import{i as j,l as G,m as V}from"./Keys-BgUkNma0.js";import{b as W,g as X,c as q}from"./PopupUtils-C_R40Sx-.js";import{R as k}from"./ResizeHandler-DEdNEOKg.js";import{M as P}from"./MediaRange-CQ-a3KRn.js";import{s as v}from"./style-map-MmmenpP7.js";import{o as F}from"./class-map-B9wLsnvZ.js";import{s as y}from"./parameters-bundle.css-CtgfEhuk.js";var x;(function(o){o.None="None",o.Dialog="Dialog",o.AlertDialog="AlertDialog"})(x||(x={}));const g=x,ve=(o,e,t)=>Math.min(Math.max(o,e),Math.max(e,t));function U(o,e,t){return E`<section style="${v(this.styles.root)}" class="${F(this.classes.root)}" role="${f(this._role)}" aria-modal="${f(this._ariaModal)}" aria-label="${f(this._ariaLabel)}" aria-labelledby="${f(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap tabindex="0" @focusin=${this.forwardToLast}></span><div style="${v(this.styles.content)}" class="${F(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div><span class="last-fe" data-ui5-focus-trap tabindex="0" @focusin=${this.forwardToFirst}></span></section> `}function Z(o,e,t){return E`<div class="ui5-block-layer" ?hidden=${this._blockLayerHidden} tabindex="0" style="${v(this.styles.blockLayer)}" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div>`}const r=T("OpenedPopupsRegistry",{openedRegistry:[]}),J=(o,e=[])=>{r.openedRegistry.some(t=>t.instance===o)||r.openedRegistry.push({instance:o,parentPopovers:e}),M(),r.openedRegistry.length===1&&Q()},K=o=>{r.openedRegistry=r.openedRegistry.filter(e=>e.instance!==o),M(),r.openedRegistry.length||Y()},xe=()=>[...r.openedRegistry],L=o=>{r.openedRegistry.length&&j(o)&&(o.stopPropagation(),r.openedRegistry[r.openedRegistry.length-1].instance.close(!0))},Q=()=>{document.addEventListener("keydown",L)},Y=()=>{document.removeEventListener("keydown",L)},M=()=>{let o,e=!1;for(let t=r.openedRegistry.length-1;t>=0;t--)o=r.openedRegistry[t].instance,!e&&o.isModal?(o.isTopModalPopup=!0,e=!0):o.isTopModalPopup=!1};l("@ui5/webcomponents-theming","sap_horizon",async()=>m);l("@ui5/webcomponents","sap_horizon",async()=>y);const ee={packageName:"@ui5/webcomponents",fileName:"themes/Popup.css.ts",content:`:host{min-width:1px;display:none;position:fixed}
`};l("@ui5/webcomponents-theming","sap_horizon",async()=>m);l("@ui5/webcomponents","sap_horizon",async()=>y);const oe={packageName:"@ui5/webcomponents",fileName:"themes/PopupStaticAreaStyles.css.ts",content:`.ui5-block-layer{display:none;position:fixed;background-color:var(--_ui5-v1-24-3_popup_block_layer_background);inset:-500px;outline:none;pointer-events:all;z-index:-1}.ui5-block-layer:not([hidden]){display:inline-block}
`};l("@ui5/webcomponents-theming","sap_horizon",async()=>m);l("@ui5/webcomponents","sap_horizon",async()=>y);const te={packageName:"@ui5/webcomponents",fileName:"themes/PopupGlobal.css.ts",content:`.ui5-popup-scroll-blocker{overflow:hidden}
`};var s=function(o,e,t,a){var d=arguments.length,p=d<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,t):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(o,e,t,a);else for(var b=o.length-1;b>=0;b--)(h=o[b])&&(p=(d<3?h(p):d>3?h(e,t,p):h(e,t))||p);return d>3&&p&&Object.defineProperty(e,t,p),p},c;const ie=()=>{D("data-ui5-popup-scroll-blocker")||N(te,"data-ui5-popup-scroll-blocker")};ie();const _=new Set;let i=c=class extends B{constructor(){super(),this._resizeHandler=this._resize.bind(this)}onBeforeRendering(){this._blockLayerHidden=!this.isOpen()||!this.isTopModalPopup}onAfterRendering(){this._updateMediaRange()}onEnterDOM(){k.register(this,this._resizeHandler)}onExitDOM(){this.isOpen()&&(c.unblockPageScrolling(this),this._removeOpenedPopup()),k.deregister(this,this._resizeHandler)}get _displayProp(){return"block"}_resize(){this._updateMediaRange()}_preventBlockLayerFocus(e){e.preventDefault()}static blockPageScrolling(e){_.add(e),_.size===1&&document.documentElement.classList.add("ui5-popup-scroll-blocker")}static unblockPageScrolling(e){_.delete(e),_.size===0&&document.documentElement.classList.remove("ui5-popup-scroll-blocker")}_scroll(e){this.fireEvent("scroll",{scrollTop:e.target.scrollTop,targetRef:e.target})}_onkeydown(e){const t=e.target===this._root&&G(e),a=V(e)&&!this.isOpen();(t||a)&&e.preventDefault()}_onfocusout(e){e.relatedTarget||(this._shouldFocusRoot=!0)}_onmousedown(e){w()||this._root.removeAttribute("tabindex"),this.shadowRoot.contains(e.target)?this._shouldFocusRoot=!0:this._shouldFocusRoot=!1}_onmouseup(){w()||(this._root.tabIndex=-1),this._shouldFocusRoot&&(I()&&this._root.focus(),this._shouldFocusRoot=!1)}async forwardToFirst(){const e=await R(this);e?e.focus():this._root.focus()}async forwardToLast(){const e=await A(this);e?e.focus():this._root.focus()}async applyInitialFocus(){await this.applyFocus()}async applyFocus(){if(await this._waitForDomRef(),this.getRootNode()===this)return;let e;this.initialFocus&&(e=this.getRootNode().getElementById(this.initialFocus)||document.getElementById(this.initialFocus)),e=e||await R(this)||this._root,e&&(e===this._root&&(e.tabIndex=-1),e.focus())}isOpen(){return this.opened}isFocusWithin(){return W(this._root)}async _open(e){var a;this.fireEvent("before-open",{},!0,!1)&&(this.isModal&&!this.shouldHideBackdrop&&(this.getStaticAreaItemDomRef(),this._blockLayerHidden=!1,c.blockPageScrolling(this)),this._zIndex=X(),this.style.zIndex=((a=this._zIndex)==null?void 0:a.toString())||"",this._focusedElementBeforeOpen=q(),this._show(),this.getDomRef()&&this._updateMediaRange(),this._addOpenedPopup(),this.opened=!0,this.open=!0,await $(),!this._disableInitialFocus&&!e&&await this.applyInitialFocus(),this.fireEvent("after-open",{},!1,!1))}_updateMediaRange(){this.mediaRange=P.getCurrentRange(P.RANGESETS.RANGE_4STEPS,this.getDomRef().offsetWidth)}_addOpenedPopup(){J(this)}close(e=!1,t=!1,a=!1){!this.opened||!this.fireEvent("before-close",{escPressed:e},!0,!1)||(this.isModal&&(this._blockLayerHidden=!0,c.unblockPageScrolling(this)),this.hide(),this.opened=!1,this.open=!1,t||this._removeOpenedPopup(),!this.preventFocusRestore&&!a&&this.resetFocus(),this.fireEvent("after-close",{},!1,!1))}_removeOpenedPopup(){K(this)}resetFocus(){this._focusedElementBeforeOpen&&(this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null)}_show(){this.style.display=this._displayProp}hide(){this.style.display="none"}get _ariaLabel(){return H(this)}get _root(){return this.shadowRoot.querySelector(".ui5-popup-root")}get _role(){return this.accessibleRole===g.None?void 0:this.accessibleRole.toLowerCase()}get _ariaModal(){return this.accessibleRole===g.None?void 0:"true"}get contentDOM(){return this.shadowRoot.querySelector(".ui5-popup-content")}get styles(){return{root:{},content:{},blockLayer:{zIndex:this._zIndex?this._zIndex-1:""}}}get classes(){return{root:{"ui5-popup-root":!0,"ui5-content-native-scrollbars":C()},content:{"ui5-popup-content":!0}}}};s([n()],i.prototype,"initialFocus",void 0);s([n({type:Boolean})],i.prototype,"preventFocusRestore",void 0);s([n({type:Boolean})],i.prototype,"open",void 0);s([n({type:Boolean,noAttribute:!0})],i.prototype,"opened",void 0);s([n({defaultValue:void 0})],i.prototype,"accessibleName",void 0);s([n({defaultValue:""})],i.prototype,"accessibleNameRef",void 0);s([n({type:g,defaultValue:g.Dialog})],i.prototype,"accessibleRole",void 0);s([n()],i.prototype,"mediaRange",void 0);s([n({type:Boolean})],i.prototype,"_disableInitialFocus",void 0);s([n({type:Boolean})],i.prototype,"_blockLayerHidden",void 0);s([n({type:Boolean,noAttribute:!0})],i.prototype,"isTopModalPopup",void 0);s([O({type:HTMLElement,default:!0})],i.prototype,"content",void 0);i=c=s([S({renderer:z,styles:ee,template:U,staticAreaTemplate:Z,staticAreaStyles:oe}),u("before-open"),u("after-open"),u("before-close",{detail:{escPressed:{type:Boolean}}}),u("after-close"),u("scroll")],i);const Re=i;l("@ui5/webcomponents-theming","sap_horizon",async()=>m);l("@ui5/webcomponents","sap_horizon",async()=>y);const ke={packageName:"@ui5/webcomponents",fileName:"themes/PopupsCommon.css.ts",content:`:host{display:none;position:fixed;background:var(--sapGroup_ContentBackground);border-radius:var(--_ui5-v1-24-3_popup_border_radius);min-height:2rem;box-sizing:border-box}.ui5-popup-root{background:inherit;border-radius:inherit;width:100%;height:100%;box-sizing:border-box;display:flex;flex-direction:column;overflow:hidden;outline:none;justify-content:space-between}.ui5-popup-root .ui5-popup-header-root{color:var(--sapPageHeader_TextColor);box-shadow:var(--_ui5-v1-24-3_popup_header_shadow);border-bottom:var(--_ui5-v1-24-3_popup_header_border)}.ui5-popup-content{color:var(--sapTextColor);flex:auto}.ui5-popup-footer-root{background:var(--sapPageFooter_Background);border-top:1px solid var(--sapPageFooter_BorderColor);color:var(--sapPageFooter_TextColor)}.ui5-popup-header-root,.ui5-popup-footer-root,:host([header-text]) .ui5-popup-header-text{margin:0;font-size:1rem;font-family:"72override",var(--_ui5-v1-24-3_popup_header_font_family);display:flex;justify-content:center;align-items:center}.ui5-popup-header-root .ui5-popup-header-text{font-weight:var(--_ui5-v1-24-3_popup_header_font_weight)}.ui5-popup-content{overflow:auto;box-sizing:border-box}:host([header-text]) .ui5-popup-header-text{text-align:center;min-height:var(--_ui5-v1-24-3_popup_default_header_height);max-height:var(--_ui5-v1-24-3_popup_default_header_height);line-height:var(--_ui5-v1-24-3_popup_default_header_height);text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:100%;display:inline-block}:host([header-text]) .ui5-popup-header-root{justify-content:var(--_ui5-v1-24-3_popup_header_prop_header_text_alignment)}:host(:not([header-text])) .ui5-popup-header-text{display:none}:host([disable-scrolling]) .ui5-popup-content{overflow:hidden}:host([media-range="S"]) .ui5-popup-content{padding:1rem var(--_ui5-v1-24-3_popup_content_padding_s)}:host([media-range="M"]) .ui5-popup-content,:host([media-range="L"]) .ui5-popup-content{padding:1rem var(--_ui5-v1-24-3_popup_content_padding_m_l)}:host([media-range="XL"]) .ui5-popup-content{padding:1rem var(--_ui5-v1-24-3_popup_content_padding_xl)}.ui5-popup-header-root{background:var(--_ui5-v1-24-3_popup_header_background)}:host([media-range="S"]) .ui5-popup-header-root,:host([media-range="S"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v1-24-3_popup_header_footer_padding_s);padding-right:var(--_ui5-v1-24-3_popup_header_footer_padding_s)}:host([media-range="M"]) .ui5-popup-header-root,:host([media-range="L"]) .ui5-popup-header-root,:host([media-range="M"]) .ui5-popup-footer-root,:host([media-range="L"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v1-24-3_popup_header_footer_padding_m_l);padding-right:var(--_ui5-v1-24-3_popup_header_footer_padding_m_l)}:host([media-range="XL"]) .ui5-popup-header-root,:host([media-range="XL"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v1-24-3_popup_header_footer_padding_xl);padding-right:var(--_ui5-v1-24-3_popup_header_footer_padding_xl)}
`};export{g as P,Re as a,J as b,ve as c,xe as g,K as r,ke as s};
