import{C as z,T as K,j as Q,k as X,m as tt,p as et,w as st,R as at,q as it,s as nt,t as ot}from"./Boot-DBJWGo1y.js";import{p as rt,i as L,c as lt}from"./CustomElementsScopeUtils-Di1jckr8.js";import{i as O,n as ct}from"./EventProvider-CVfkyUHo.js";import{m as U}from"./useIsomorphicLayoutEffect-J-vjyzBO.js";const B=()=>U("CustomStyle.eventProvider",new O),H="CustomCSSChange",R=e=>{B().attachEvent(H,e)},ht=e=>B().fireEvent(H,e),W=()=>U("CustomStyle.customCSSFor",{});let E;R(e=>{E||z({tag:e})});const xt=(e,t)=>{const s=W();s[e]||(s[e]=[]),s[e].push(t),E=!0;try{ht(e)}finally{E=!1}return z({tag:e})},dt=e=>{const t=W();return t[e]?t[e].join(""):""},C=new Map,M=new Map,j=e=>{if(!C.has(e)){const t=ut(e.split("-"));C.set(e,t)}return C.get(e)},q=e=>{if(!M.has(e)){const t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();M.set(e,t)}return M.get(e)},ut=e=>e.map((t,s)=>s===0?t.toLowerCase():t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(""),pt=e=>{if(!(e instanceof HTMLElement))return"default";const t=e.getAttribute("slot");if(t){const s=t.match(/^(.+?)-\d+$/);return s?s[1]:t}return"default"},Z=e=>e instanceof HTMLSlotElement?e.assignedNodes({flatten:!0}).filter(t=>t instanceof HTMLElement):[e],T=e=>e.reduce((t,s)=>t.concat(Z(s)),[]);class gt{constructor(t){this.metadata=t}getInitialState(){if(Object.prototype.hasOwnProperty.call(this,"_initialState"))return this._initialState;const t={},s=this.slotsAreManaged(),i=this.getProperties();for(const a in i){const n=i[a].type,o=i[a].defaultValue;n===Boolean?(t[a]=!1,o!==void 0&&console.warn("The 'defaultValue' metadata key is ignored for all booleans properties, they would be initialized with 'false' by default")):i[a].multiple?Object.defineProperty(t,a,{enumerable:!0,get(){return[]}}):n===Object?Object.defineProperty(t,a,{enumerable:!0,get(){return"defaultValue"in i[a]?i[a].defaultValue:{}}}):n===String?t[a]="defaultValue"in i[a]?i[a].defaultValue:"":t[a]=o}if(s){const a=this.getSlots();for(const[n,o]of Object.entries(a)){const r=o.propertyName||n;t[r]=[]}}return this._initialState=t,t}static validatePropertyValue(t,s){return s.multiple&&t?t.map(i=>V(i,s)):V(t,s)}static validateSlotValue(t,s){return ft(t,s)}getPureTag(){return this.metadata.tag||""}getTag(){const t=this.metadata.tag;if(!t)return"";const s=rt(t);return s?`${t}-${s}`:t}hasAttribute(t){const s=this.getProperties()[t];return s.type!==Object&&!s.noAttribute&&!s.multiple}getPropertiesList(){return Object.keys(this.getProperties())}getAttributesList(){return this.getPropertiesList().filter(this.hasAttribute.bind(this)).map(q)}canSlotText(){var t;return((t=this.getSlots().default)==null?void 0:t.type)===Node}hasSlots(){return!!Object.entries(this.getSlots()).length}hasIndividualSlots(){return this.slotsAreManaged()&&Object.values(this.getSlots()).some(t=>t.individualSlots)}slotsAreManaged(){return!!this.metadata.managedSlots}supportsF6FastNavigation(){return!!this.metadata.fastNavigation}getProperties(){return this.metadata.properties||(this.metadata.properties={}),this.metadata.properties}getEvents(){return this.metadata.events||(this.metadata.events={}),this.metadata.events}getSlots(){return this.metadata.slots||(this.metadata.slots={}),this.metadata.slots}isLanguageAware(){return!!this.metadata.languageAware}isThemeAware(){return!!this.metadata.themeAware}getShadowRootOptions(){return this.metadata.shadowRootOptions||{}}isFormAssociated(){return!!this.metadata.formAssociated}shouldInvalidateOnChildChange(t,s,i){const a=this.getSlots()[t].invalidateOnChildChange;if(a===void 0)return!1;if(typeof a=="boolean")return a;if(typeof a=="object"){if(s==="property"){if(a.properties===void 0)return!1;if(typeof a.properties=="boolean")return a.properties;if(Array.isArray(a.properties))return a.properties.includes(i);throw new Error("Wrong format for invalidateOnChildChange.properties: boolean or array is expected")}if(s==="slot"){if(a.slots===void 0)return!1;if(typeof a.slots=="boolean")return a.slots;if(Array.isArray(a.slots))return a.slots.includes(i);throw new Error("Wrong format for invalidateOnChildChange.slots: boolean or array is expected")}}throw new Error("Wrong format for invalidateOnChildChange: boolean or object is expected")}}const V=(e,t)=>{const s=t.type;let i=t.validator;return s&&s.isDataTypeClass&&(i=s),i?i.isValid(e)?e:t.defaultValue:!s||s===String?typeof e=="string"||typeof e>"u"||e===null?e:e.toString():s===Boolean?typeof e=="boolean"?e:!1:s===Object?typeof e=="object"?e:t.defaultValue:e in s?e:t.defaultValue},ft=(e,t)=>(e&&Z(e).forEach(s=>{if(!(s instanceof t.type))throw new Error(`The element is not of type ${t.type.toString()}`)}),e),F=e=>Array.isArray(e)?e.filter(t=>!!t).flat(10).map(t=>typeof t=="string"?t:t.content).join(" "):typeof e=="string"?e:e.content,b=new Map;R(e=>{b.delete(`${e}_normal`)});const mt=e=>{const t=e.getMetadata().getTag(),s=`${t}_normal`,i=ct("OpenUI5Enablement");if(!b.has(s)){let a="";i&&(a=F(i.getBusyIndicatorStyles()));const n=dt(t)||"",o=`${F(e.styles)} ${n} ${a}`;b.set(s,o)}return b.get(s)},w=new Map;R(e=>{w.delete(`${e}_normal`)});const yt=e=>{const t=`${e.getMetadata().getTag()}_normal`;if(!w.has(t)){const s=mt(e),i=new CSSStyleSheet;i.replaceSync(s),w.set(t,[i])}return w.get(t)},_t=e=>{const t=e.constructor,s=e.shadowRoot,i=e.render();if(!s){console.warn("There is no shadow root to update");return}s.adoptedStyleSheets=yt(t),t.renderer(i,s,{host:e})},vt=[],bt=e=>vt.some(t=>e.startsWith(t)),P=new WeakMap,wt=(e,t,s)=>{const i=new MutationObserver(t);P.set(e,i),i.observe(e,s)},St=e=>{const t=P.get(e);t&&(t.disconnect(),P.delete(e))},Ct=["value-changed","click"];let A;const Mt=e=>Ct.includes(e),At=e=>{const t=Y();return!(typeof t!="boolean"&&t.events&&t.events.includes&&t.events.includes(e))},Y=()=>(A===void 0&&(A=K()),A),$t=e=>{const t=Y();return Mt(e)?!1:t===!0?!0:!At(e)},Ot=e=>e.matches(":dir(rtl)")?"rtl":"ltr",Et=["disabled","title","hidden","role","draggable"],I=e=>Et.includes(e)||e.startsWith("aria")?!0:![HTMLElement,Element,Node].some(t=>t.prototype.hasOwnProperty(e)),N=(e,t)=>{if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0},Pt=(e,t)=>{const s=Dt(t),i=lt();return e.call(t,t,s,i)},Dt=e=>{const t=e.constructor,s=t.getMetadata().getPureTag(),i=t.getUniqueDependencies().map(a=>a.getMetadata().getPureTag()).filter(L);return L(s)&&i.push(s),i},Rt=e=>{e._internals=e.attachInternals(),jt(e)&&D(e)},D=e=>{var t,s;if((t=e._internals)!=null&&t.form){if(Lt(e),!e.name){(s=e._internals)==null||s.setFormValue(null);return}e._internals.setFormValue(e.formFormattedValue)}},Lt=async e=>{var t,s;if((t=e._internals)!=null&&t.form)if(e.formValidity&&Object.keys(e.formValidity).some(i=>i)){const i=await((s=e.formElementAnchor)==null?void 0:s.call(e));e._internals.setValidity(e.formValidity,e.formValidityMessage,i)}else e._internals.setValidity({})},zt=e=>{var t,s;(s=(t=e._internals)==null?void 0:t.form)==null||s.requestSubmit()},Ut=e=>{var t,s;(s=(t=e._internals)==null?void 0:t.form)==null||s.reset()},jt=e=>"formFormattedValue"in e&&"name"in e;let Tt=0;const k=new Map,$=new Map;function m(e){this._suppressInvalidation||(this.onInvalidation(e),this._changedState.push(e),ot(this),this._invalidationEventProvider.fireEvent("invalidate",{...e,target:this}))}function Vt(e,t){do{const s=Object.getOwnPropertyDescriptor(e,t);if(s)return s;e=Object.getPrototypeOf(e)}while(e&&e!==HTMLElement.prototype)}const y=class y extends HTMLElement{constructor(){super();const t=this.constructor;this._changedState=[],this._suppressInvalidation=!0,this._inDOM=!1,this._fullyConnected=!1,this._childChangeListeners=new Map,this._slotChangeListeners=new Map,this._invalidationEventProvider=new O,this._componentStateFinalizedEventProvider=new O;let s;if(this._domRefReadyPromise=new Promise(i=>{s=i}),this._domRefReadyPromise._deferredResolve=s,this._doNotSyncAttributes=new Set,this._slotsAssignedNodes=new WeakMap,this._state={...t.getMetadata().getInitialState()},this._upgradeAllProperties(),t._needsShadowDOM()){const i={mode:"open"};this.attachShadow({...i,...t.getMetadata().getShadowRootOptions()})}}get _id(){return this.__id||(this.__id=`ui5wc_${++Tt}`),this.__id}render(){const t=this.constructor.template;return Pt(t,this)}async connectedCallback(){const t=this.constructor;this.setAttribute(t.getMetadata().getPureTag(),""),t.getMetadata().supportsF6FastNavigation()&&this.setAttribute("data-sap-ui-fastnavgroup","true");const s=t.getMetadata().slotsAreManaged();this._inDOM=!0,s&&(this._startObservingDOMChildren(),await this._processChildren()),this._inDOM&&(Q(this),this._domRefReadyPromise._deferredResolve(),this._fullyConnected=!0,this.onEnterDOM())}disconnectedCallback(){const t=this.constructor.getMetadata().slotsAreManaged();this._inDOM=!1,t&&this._stopObservingDOMChildren(),this._fullyConnected&&(this.onExitDOM(),this._fullyConnected=!1),this._domRefReadyPromise._deferredResolve(),X(this)}onBeforeRendering(){}onAfterRendering(){}onEnterDOM(){}onExitDOM(){}_startObservingDOMChildren(){const t=this.constructor.getMetadata();if(!t.hasSlots())return;const s=t.canSlotText(),i=Object.keys(t.getSlots()).some(n=>t.getSlots()[n].cloned),a={childList:!0,subtree:s||i,characterData:s};wt(this,this._processChildren.bind(this),a)}_stopObservingDOMChildren(){St(this)}async _processChildren(){this.constructor.getMetadata().hasSlots()&&await this._updateSlots()}async _updateSlots(){const t=this.constructor,s=t.getMetadata().getSlots(),i=t.getMetadata().canSlotText(),a=Array.from(i?this.childNodes:this.children),n=new Map,o=new Map;for(const[c,p]of Object.entries(s)){const d=p.propertyName||c;o.set(d,c),n.set(d,[...this._state[d]]),this._clearSlot(c,p)}const r=new Map,h=new Map,l=a.map(async(c,p)=>{const d=pt(c),u=s[d];if(u===void 0){if(d!=="default"){const g=Object.keys(s).join(", ");console.warn(`Unknown slotName: ${d}, ignoring`,c,`Valid values are: ${g}`)}return}if(u.individualSlots){const g=(r.get(d)||0)+1;r.set(d,g),c._individualSlot=`${d}-${g}`}if(c instanceof HTMLElement){const g=c.localName;if(g.includes("-")&&!bt(g)){if(!customElements.get(g)){const G=customElements.whenDefined(g);let _=k.get(g);_||(_=new Promise(J=>setTimeout(J,1e3)),k.set(g,_)),await Promise.race([G,_])}customElements.upgrade(c)}}if(c=t.getMetadata().constructor.validateSlotValue(c,u),v(c)&&u.invalidateOnChildChange){const g=this._getChildChangeListener(d);c.attachInvalidate.call(c,g)}c instanceof HTMLSlotElement&&this._attachSlotChange(c,d,!!u.invalidateOnChildChange);const S=u.propertyName||d;h.has(S)?h.get(S).push({child:c,idx:p}):h.set(S,[{child:c,idx:p}])});await Promise.all(l),h.forEach((c,p)=>{this._state[p]=c.sort((d,u)=>d.idx-u.idx).map(d=>d.child)});let f=!1;for(const[c,p]of Object.entries(s)){const d=p.propertyName||c;N(n.get(d),this._state[d])||(m.call(this,{type:"slot",name:o.get(d),reason:"children"}),f=!0,t.getMetadata().isFormAssociated()&&D(this))}f||m.call(this,{type:"slot",name:"default",reason:"textcontent"})}_clearSlot(t,s){const i=s.propertyName||t;this._state[i].forEach(a=>{if(v(a)){const n=this._getChildChangeListener(t);a.detachInvalidate.call(a,n)}a instanceof HTMLSlotElement&&this._detachSlotChange(a,t)}),this._state[i]=[]}attachInvalidate(t){this._invalidationEventProvider.attachEvent("invalidate",t)}detachInvalidate(t){this._invalidationEventProvider.detachEvent("invalidate",t)}_onChildChange(t,s){this.constructor.getMetadata().shouldInvalidateOnChildChange(t,s.type,s.name)&&m.call(this,{type:"slot",name:t,reason:"childchange",child:s.target})}attributeChangedCallback(t,s,i){let a;if(this._doNotSyncAttributes.has(t))return;const n=this.constructor.getMetadata().getProperties(),o=t.replace(/^ui5-/,""),r=j(o);if(n.hasOwnProperty(r)){const h=n[r],l=h.type;let f=h.validator;l&&l.isDataTypeClass&&(f=l),f?a=f.attributeToProperty(i):l===Boolean?a=i!==null:a=i,this[r]=a}}formAssociatedCallback(){this.constructor.getMetadata().isFormAssociated()&&Rt(this)}static get formAssociated(){return this.getMetadata().isFormAssociated()}_updateAttribute(t,s){const i=this.constructor;if(!i.getMetadata().hasAttribute(t))return;const a=i.getMetadata().getProperties()[t],n=a.type;let o=a.validator;const r=q(t),h=this.getAttribute(r);if(n&&n.isDataTypeClass&&(o=n),o){const l=o.propertyToAttribute(s);l===null?(this._doNotSyncAttributes.add(r),this.removeAttribute(r),this._doNotSyncAttributes.delete(r)):this.setAttribute(r,l)}else n===Boolean?s===!0&&h===null?this.setAttribute(r,""):s===!1&&h!==null&&this.removeAttribute(r):typeof s!="object"&&h!==s&&this.setAttribute(r,s)}_upgradeProperty(t){if(this.hasOwnProperty(t)){const s=this[t];delete this[t],this[t]=s}}_upgradeAllProperties(){this.constructor.getMetadata().getPropertiesList().forEach(this._upgradeProperty.bind(this))}_getChildChangeListener(t){return this._childChangeListeners.has(t)||this._childChangeListeners.set(t,this._onChildChange.bind(this,t)),this._childChangeListeners.get(t)}_getSlotChangeListener(t){return this._slotChangeListeners.has(t)||this._slotChangeListeners.set(t,this._onSlotChange.bind(this,t)),this._slotChangeListeners.get(t)}_attachSlotChange(t,s,i){const a=this._getSlotChangeListener(s);t.addEventListener("slotchange",n=>{if(a.call(t,n),i){const o=this._slotsAssignedNodes.get(t);o&&o.forEach(h=>{if(v(h)){const l=this._getChildChangeListener(s);h.detachInvalidate.call(h,l)}});const r=T([t]);this._slotsAssignedNodes.set(t,r),r.forEach(h=>{if(v(h)){const l=this._getChildChangeListener(s);h.attachInvalidate.call(h,l)}})}})}_detachSlotChange(t,s){t.removeEventListener("slotchange",this._getSlotChangeListener(s))}_onSlotChange(t){m.call(this,{type:"slot",name:t,reason:"slotchange"})}onInvalidation(t){}_render(){const t=this.constructor,s=t.getMetadata().hasIndividualSlots();this._suppressInvalidation=!0,this.onBeforeRendering(),this._componentStateFinalizedEventProvider.fireEvent("componentStateFinalized"),this._suppressInvalidation=!1,this._changedState=[],t._needsShadowDOM()&&_t(this),s&&this._assignIndividualSlotsToChildren(),this.onAfterRendering()}_assignIndividualSlotsToChildren(){Array.from(this.children).forEach(t=>{t._individualSlot&&t.setAttribute("slot",t._individualSlot)})}_waitForDomRef(){return this._domRefReadyPromise}getDomRef(){if(typeof this._getRealDomRef=="function")return this._getRealDomRef();if(!(!this.shadowRoot||this.shadowRoot.children.length===0))return this.shadowRoot.children[0]}getFocusDomRef(){const t=this.getDomRef();if(t)return t.querySelector("[data-sap-focus-ref]")||t}async getFocusDomRefAsync(){return await this._waitForDomRef(),this.getFocusDomRef()}async focus(t){await this._waitForDomRef();const s=this.getFocusDomRef();s&&typeof s.focus=="function"&&s.focus(t)}fireEvent(t,s,i=!1,a=!0){const n=this._fireEvent(t,s,i,a),o=j(t);return o!==t?n&&this._fireEvent(o,s,i,a):n}_fireEvent(t,s,i=!1,a=!0){const n=new CustomEvent(`ui5-${t}`,{detail:s,composed:!1,bubbles:a,cancelable:i}),o=this.dispatchEvent(n);if($t(t))return o;const r=new CustomEvent(t,{detail:s,composed:!1,bubbles:a,cancelable:i});return this.dispatchEvent(r)&&o}getSlottedNodes(t){return T(this[t])}attachComponentStateFinalized(t){this._componentStateFinalizedEventProvider.attachEvent("componentStateFinalized",t)}detachComponentStateFinalized(t){this._componentStateFinalizedEventProvider.detachEvent("componentStateFinalized",t)}get effectiveDir(){return tt(this.constructor),Ot(this)}get isUI5Element(){return!0}get classes(){return{}}get accessibilityInfo(){return{}}static get observedAttributes(){return this.getMetadata().getAttributesList()}static _needsShadowDOM(){return!!this.template||Object.prototype.hasOwnProperty.call(this.prototype,"render")}static _generateAccessors(){const t=this.prototype,s=this.getMetadata().slotsAreManaged(),i=this.getMetadata().getProperties();for(const[a,n]of Object.entries(i)){if(I(a)||console.warn(`"${a}" is not a valid property name. Use a name that does not collide with DOM APIs`),n.type===Boolean&&n.defaultValue)throw new Error(`Cannot set a default value for property "${a}". All booleans are false by default.`);if(n.type===Array)throw new Error(`Wrong type for property "${a}". Properties cannot be of type Array - use "multiple: true" and set "type" to the single value type, such as "String", "Object", etc...`);if(n.type===Object&&n.defaultValue)throw new Error(`Cannot set a default value for property "${a}". All properties of type "Object" are empty objects by default.`);if(n.multiple&&n.defaultValue)throw new Error(`Cannot set a default value for property "${a}". All multiple properties are empty arrays by default.`);const o=Vt(t,a);let r;o!=null&&o.set&&(r=o.set);let h;o!=null&&o.get&&(h=o.get),Object.defineProperty(t,a,{get(){if(h)return h.call(this);if(this._state[a]!==void 0)return this._state[a];const l=n.defaultValue;return n.type===Boolean?!1:n.type===String?l:n.multiple?[]:l},set(l){let f;const c=this.constructor;l=c.getMetadata().constructor.validatePropertyValue(l,n);const p=n.type;let d=n.validator;const u=h?h.call(this):this._state[a];p&&p.isDataTypeClass&&(d=p),d?f=!d.valuesAreEqual(u,l):Array.isArray(u)&&Array.isArray(l)&&n.multiple&&n.compareValues?f=!N(u,l):f=u!==l,f&&(r?r.call(this,l):this._state[a]=l,m.call(this,{type:"property",name:a,newValue:l,oldValue:u}),c.getMetadata().isFormAssociated()&&D(this),this._updateAttribute(a,l))}})}if(s){const a=this.getMetadata().getSlots();for(const[n,o]of Object.entries(a)){I(n)||console.warn(`"${n}" is not a valid property name. Use a name that does not collide with DOM APIs`);const r=o.propertyName||n;Object.defineProperty(t,r,{get(){return this._state[r]!==void 0?this._state[r]:[]},set(){throw new Error("Cannot set slot content directly, use the DOM APIs (appendChild, removeChild, etc...)")}})}}}static get dependencies(){return[]}static getUniqueDependencies(){if(!$.has(this)){const t=this.dependencies.filter((s,i,a)=>a.indexOf(s)===i);$.set(this,t)}return $.get(this)||[]}static whenDependenciesDefined(){return Promise.all(this.getUniqueDependencies().map(t=>t.define()))}static async onDefine(){return Promise.resolve()}static async define(){await et(),await Promise.all([this.whenDependenciesDefined(),this.onDefine()]);const t=this.getMetadata().getTag(),s=st(t),i=customElements.get(t);return i&&!s?at(t):i||(this._generateAccessors(),it(t),customElements.define(t,this)),this}static getMetadata(){if(this.hasOwnProperty("_metadata"))return this._metadata;const t=[this.metadata];let s=this;for(;s!==y;)s=Object.getPrototypeOf(s),t.unshift(s.metadata);const i=nt({},...t);return this._metadata=new gt(i),this._metadata}get validity(){var t;return(t=this._internals)==null?void 0:t.validity}get validationMessage(){var t;return(t=this._internals)==null?void 0:t.validationMessage}checkValidity(){var t;return(t=this._internals)==null?void 0:t.checkValidity()}reportValidity(){var t;return(t=this._internals)==null?void 0:t.reportValidity()}};y.metadata={},y.styles="";let x=y;const v=e=>"isUI5Element"in e;export{x as C,xt as g,Ut as i,Pt as l,N as n,zt as o,v};
