import{B as H,g as z,m as et,n as st,I as nt,J as at,K as rt,L as it,i as ot,M as lt,N as ct,O as dt,P as ht,Q as ut,v as ft}from"./Boot-ZMdbUkXu.js";import{g as B,s as N,b as pt}from"./CustomElementsScopeUtils-E-jGiXBT.js";import{E as T,g as gt}from"./VersionInfo-szri6OiK.js";const W=()=>z("CustomStyle.eventProvider",new T),q="CustomCSSChange",I=s=>{W().attachEvent(q,s)},mt=s=>W().fireEvent(q,s),G=()=>z("CustomStyle.customCSSFor",{});let P;I(s=>{P||H({tag:s})});const Wt=(s,t)=>{const e=G();e[s]||(e[s]=[]),e[s].push(t),P=!0;try{mt(s)}finally{P=!1}return H({tag:s})},yt=s=>{const t=G();return t[s]?t[s].join(""):""},E=new Map,w=new Map,j=s=>{if(!E.has(s)){const t=St(s.split("-"));E.set(s,t)}return E.get(s)},K=s=>{if(!w.has(s)){const t=s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();w.set(s,t)}return w.get(s)},St=s=>s.map((t,e)=>e===0?t.toLowerCase():t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(""),_t=s=>{if(!(s instanceof HTMLElement))return"default";const t=s.getAttribute("slot");if(t){const e=t.match(/^(.+?)-\d+$/);return e?e[1]:t}return"default"},J=s=>s instanceof HTMLSlotElement?s.assignedNodes({flatten:!0}).filter(t=>t instanceof HTMLElement):[s],Ct=s=>s.reduce((t,e)=>t.concat(J(e)),[]);class vt{constructor(t){this.metadata=t}getInitialState(){if(Object.prototype.hasOwnProperty.call(this,"_initialState"))return this._initialState;const t={},e=this.slotsAreManaged(),a=this.getProperties();for(const n in a){const r=a[n].type,i=a[n].defaultValue;r===Boolean?(t[n]=!1,i!==void 0&&console.warn("The 'defaultValue' metadata key is ignored for all booleans properties, they would be initialized with 'false' by default")):a[n].multiple?Object.defineProperty(t,n,{enumerable:!0,get(){return[]}}):r===Object?Object.defineProperty(t,n,{enumerable:!0,get(){return"defaultValue"in a[n]?a[n].defaultValue:{}}}):r===String?t[n]="defaultValue"in a[n]?a[n].defaultValue:"":t[n]=i}if(e){const n=this.getSlots();for(const[r,i]of Object.entries(n)){const o=i.propertyName||r;t[o]=[]}}return this._initialState=t,t}static validatePropertyValue(t,e){return e.multiple&&t?t.map(n=>F(n,e)):F(t,e)}static validateSlotValue(t,e){return bt(t,e)}getPureTag(){return this.metadata.tag||""}getTag(){const t=this.metadata.tag;if(!t)return"";const e=B(t);return e?`${t}-${e}`:t}hasAttribute(t){const e=this.getProperties()[t];return e.type!==Object&&!e.noAttribute&&!e.multiple}getPropertiesList(){return Object.keys(this.getProperties())}getAttributesList(){return this.getPropertiesList().filter(this.hasAttribute.bind(this)).map(K)}canSlotText(){var t;return((t=this.getSlots().default)==null?void 0:t.type)===Node}hasSlots(){return!!Object.entries(this.getSlots()).length}hasIndividualSlots(){return this.slotsAreManaged()&&Object.values(this.getSlots()).some(t=>t.individualSlots)}slotsAreManaged(){return!!this.metadata.managedSlots}supportsF6FastNavigation(){return!!this.metadata.fastNavigation}getProperties(){return this.metadata.properties||(this.metadata.properties={}),this.metadata.properties}getEvents(){return this.metadata.events||(this.metadata.events={}),this.metadata.events}getSlots(){return this.metadata.slots||(this.metadata.slots={}),this.metadata.slots}isLanguageAware(){return!!this.metadata.languageAware}isThemeAware(){return!!this.metadata.themeAware}shouldInvalidateOnChildChange(t,e,a){const n=this.getSlots()[t].invalidateOnChildChange;if(n===void 0)return!1;if(typeof n=="boolean")return n;if(typeof n=="object"){if(e==="property"){if(n.properties===void 0)return!1;if(typeof n.properties=="boolean")return n.properties;if(Array.isArray(n.properties))return n.properties.includes(a);throw new Error("Wrong format for invalidateOnChildChange.properties: boolean or array is expected")}if(e==="slot"){if(n.slots===void 0)return!1;if(typeof n.slots=="boolean")return n.slots;if(Array.isArray(n.slots))return n.slots.includes(a);throw new Error("Wrong format for invalidateOnChildChange.slots: boolean or array is expected")}}throw new Error("Wrong format for invalidateOnChildChange: boolean or object is expected")}}const F=(s,t)=>{const e=t.type;let a=t.validator;return e&&e.isDataTypeClass&&(a=e),a?a.isValid(s)?s:t.defaultValue:!e||e===String?typeof s=="string"||typeof s>"u"||s===null?s:s.toString():e===Boolean?typeof s=="boolean"?s:!1:e===Object?typeof s=="object"?s:t.defaultValue:s in e?s:t.defaultValue},bt=(s,t)=>(s&&J(s).forEach(e=>{if(!(e instanceof t.type))throw new Error(`The element is not of type ${t.type.toString()}`)}),s);class Et extends HTMLElement{}customElements.get("ui5-static-area")||customElements.define("ui5-static-area",Et);const wt=10,A=s=>Array.isArray(s)?s.filter(t=>!!t).flat(wt).map(t=>typeof t=="string"?t:t.content).join(" "):typeof s=="string"?s:s.content,C=new Map;I(s=>{C.delete(`${s}_normal`)});const Q=(s,t=!1)=>{const e=s.getMetadata().getTag(),a=`${e}_${t?"static":"normal"}`,n=gt("OpenUI5Enablement");if(!C.has(a)){let r,i="";if(n&&(i=A(n.getBusyIndicatorStyles())),t)r=A(s.staticAreaStyles);else{const o=yt(e)||"";r=`${A(s.styles)} ${o}`}r=`${r} ${i}`,C.set(a,r)}return C.get(a)},v=new Map;I(s=>{v.delete(`${s}_normal`)});const At=(s,t=!1)=>{const a=`${s.getMetadata().getTag()}_${t?"static":"normal"}`;if(!v.has(a)){const n=Q(s,t),r=new CSSStyleSheet;r.replaceSync(n),v.set(a,[r])}return v.get(a)},D=(s,t=!1)=>{let e;const a=s.constructor,n=t?s.staticAreaItem.shadowRoot:s.shadowRoot;let r;if(t?r=s.renderStatic():r=s.render(),!n){console.warn("There is no shadow root to update");return}if(document.adoptedStyleSheets&&!et()?n.adoptedStyleSheets=At(a,t):e=Q(a,t),a.renderer){a.renderer(r,n,e,t,{host:s});return}a.render(r,n,e,t,{host:s})},Mt="--_ui5_content_density",Ot=s=>getComputedStyle(s).getPropertyValue(Mt),X=s=>s.matches(":dir(rtl)")?"rtl":"ltr",_="ui5-static-area-item",Tt="data-sap-ui-integration-popup-content";class y extends HTMLElement{constructor(){super(),this._rendered=!1,this.attachShadow({mode:"open"})}setOwnerElement(t){this.ownerElement=t,this.classList.add(this.ownerElement._id),this.ownerElement.hasAttribute("data-ui5-static-stable")&&this.setAttribute("data-ui5-stable",this.ownerElement.getAttribute("data-ui5-static-stable"))}update(){this._rendered&&(this.updateAdditionalProperties(),D(this.ownerElement,!0))}updateAdditionalProperties(){this._updateAdditionalAttrs(),this._updateContentDensity(),this._updateDirection()}_updateContentDensity(){Ot(this.ownerElement)==="compact"?(this.classList.add("sapUiSizeCompact"),this.classList.add("ui5-content-density-compact")):(this.classList.remove("sapUiSizeCompact"),this.classList.remove("ui5-content-density-compact"))}_updateDirection(){if(this.ownerElement){const t=X(this.ownerElement);t==="rtl"?this.setAttribute("dir",t):this.removeAttribute("dir")}}_updateAdditionalAttrs(){this.setAttribute(_,""),this.setAttribute(Tt,"")}async getDomRef(){return this.updateAdditionalProperties(),this._rendered||(this._rendered=!0,D(this.ownerElement,!0)),await st(),this.shadowRoot}static getTag(){const t=B(_);return t?`${_}-${t}`:_}static createInstance(){return customElements.get(y.getTag())||customElements.define(y.getTag(),y),document.createElement(this.getTag())}}const Pt=[],Dt=s=>Pt.some(t=>s.startsWith(t)),R=new WeakMap,Rt=(s,t,e)=>{const a=new MutationObserver(t);R.set(s,a),a.observe(s,e)},It=s=>{const t=R.get(s);t&&(t.disconnect(),R.delete(s))},Lt=["value-changed","click"];let M;const Nt=s=>Lt.includes(s),jt=s=>{const t=Y();return!(typeof t!="boolean"&&t.events&&t.events.includes&&t.events.includes(s))},Y=()=>(M===void 0&&(M=nt()),M),Ft=s=>{const t=Y();return Nt(s)?!1:t===!0?!0:!jt(s)},$t=["disabled","title","hidden","role","draggable"],$=s=>$t.includes(s)||s.startsWith("aria")?!0:![HTMLElement,Element,Node].some(e=>e.prototype.hasOwnProperty(s)),V=(s,t)=>{if(s.length!==t.length)return!1;for(let e=0;e<s.length;e++)if(s[e]!==t[e])return!1;return!0},x=(s,t)=>{const e=Vt(t),a=pt();return s.call(t,t,e,a)},Vt=s=>{const t=s.constructor,e=t.getMetadata().getPureTag(),a=t.getUniqueDependencies().map(n=>n.getMetadata().getPureTag()).filter(N);return N(e)&&a.push(e),a};let xt=0;const k=new Map,O=new Map;function m(s){this._suppressInvalidation||(this.onInvalidation(s),this._changedState.push(s),ft(this),this._invalidationEventProvider.fireEvent("invalidate",{...s,target:this}))}class L extends HTMLElement{constructor(){super();const t=this.constructor;this._changedState=[],this._suppressInvalidation=!0,this._inDOM=!1,this._fullyConnected=!1,this._childChangeListeners=new Map,this._slotChangeListeners=new Map,this._invalidationEventProvider=new T,this._componentStateFinalizedEventProvider=new T;let e;this._domRefReadyPromise=new Promise(a=>{e=a}),this._domRefReadyPromise._deferredResolve=e,this._doNotSyncAttributes=new Set,this._state={...t.getMetadata().getInitialState()},this._upgradeAllProperties(),t._needsShadowDOM()&&this.attachShadow({mode:"open"})}get _id(){return this.__id||(this.__id=`ui5wc_${++xt}`),this.__id}render(){const t=this.constructor.template;return x(t,this)}renderStatic(){const t=this.constructor.staticAreaTemplate;return x(t,this)}async connectedCallback(){const t=this.constructor;this.setAttribute(t.getMetadata().getPureTag(),""),t.getMetadata().supportsF6FastNavigation()&&this.setAttribute("data-sap-ui-fastnavgroup","true");const e=t.getMetadata().slotsAreManaged();this._inDOM=!0,e&&(this._startObservingDOMChildren(),await this._processChildren()),this._inDOM&&(at(this),this._domRefReadyPromise._deferredResolve(),this._fullyConnected=!0,this.onEnterDOM())}disconnectedCallback(){const e=this.constructor.getMetadata().slotsAreManaged();this._inDOM=!1,e&&this._stopObservingDOMChildren(),this._fullyConnected&&(this.onExitDOM(),this._fullyConnected=!1),this.staticAreaItem&&this.staticAreaItem.parentElement&&this.staticAreaItem.parentElement.removeChild(this.staticAreaItem),rt(this)}onBeforeRendering(){}onAfterRendering(){}onEnterDOM(){}onExitDOM(){}_startObservingDOMChildren(){const e=this.constructor.getMetadata();if(!e.hasSlots())return;const n=e.canSlotText(),r=Object.keys(e.getSlots()).some(o=>e.getSlots()[o].cloned),i={childList:!0,subtree:n||r,characterData:n};Rt(this,this._processChildren.bind(this),i)}_stopObservingDOMChildren(){It(this)}async _processChildren(){this.constructor.getMetadata().hasSlots()&&await this._updateSlots()}async _updateSlots(){const t=this.constructor,e=t.getMetadata().getSlots(),a=t.getMetadata().canSlotText(),n=Array.from(a?this.childNodes:this.children),r=new Map,i=new Map;for(const[l,h]of Object.entries(e)){const c=h.propertyName||l;i.set(c,l),r.set(c,[...this._state[c]]),this._clearSlot(l,h)}const o=new Map,d=new Map,p=n.map(async(l,h)=>{const c=_t(l),g=e[c];if(g===void 0){if(c!=="default"){const u=Object.keys(e).join(", ");console.warn(`Unknown slotName: ${c}, ignoring`,l,`Valid values are: ${u}`)}return}if(g.individualSlots){const u=(o.get(c)||0)+1;o.set(c,u),l._individualSlot=`${c}-${u}`}if(l instanceof HTMLElement){const u=l.localName;if(u.includes("-")&&!Dt(u)){if(!customElements.get(u)){const Z=customElements.whenDefined(u);let S=k.get(u);S||(S=new Promise(tt=>setTimeout(tt,1e3)),k.set(u,S)),await Promise.race([Z,S])}customElements.upgrade(l)}}if(l=t.getMetadata().constructor.validateSlotValue(l,g),U(l)&&g.invalidateOnChildChange){const u=this._getChildChangeListener(c);u&&l.attachInvalidate.call(l,u)}l instanceof HTMLSlotElement&&this._attachSlotChange(l,c);const b=g.propertyName||c;d.has(b)?d.get(b).push({child:l,idx:h}):d.set(b,[{child:l,idx:h}])});await Promise.all(p),d.forEach((l,h)=>{this._state[h]=l.sort((c,g)=>c.idx-g.idx).map(c=>c.child)});let f=!1;for(const[l,h]of Object.entries(e)){const c=h.propertyName||l;V(r.get(c),this._state[c])||(m.call(this,{type:"slot",name:i.get(c),reason:"children"}),f=!0)}f||m.call(this,{type:"slot",name:"default",reason:"textcontent"})}_clearSlot(t,e){const a=e.propertyName||t;this._state[a].forEach(r=>{if(U(r)){const i=this._getChildChangeListener(t);i&&r.detachInvalidate.call(r,i)}r instanceof HTMLSlotElement&&this._detachSlotChange(r,t)}),this._state[a]=[]}attachInvalidate(t){this._invalidationEventProvider.attachEvent("invalidate",t)}detachInvalidate(t){this._invalidationEventProvider.detachEvent("invalidate",t)}_onChildChange(t,e){this.constructor.getMetadata().shouldInvalidateOnChildChange(t,e.type,e.name)&&m.call(this,{type:"slot",name:t,reason:"childchange",child:e.target})}attributeChangedCallback(t,e,a){let n;if(this._doNotSyncAttributes.has(t))return;const r=this.constructor.getMetadata().getProperties(),i=t.replace(/^ui5-/,""),o=j(i);if(r.hasOwnProperty(o)){const d=r[o],p=d.type;let f=d.validator;p&&p.isDataTypeClass&&(f=p),f?n=f.attributeToProperty(a):p===Boolean?n=a!==null:n=a,this[o]=n}}_updateAttribute(t,e){const a=this.constructor;if(!a.getMetadata().hasAttribute(t))return;const r=a.getMetadata().getProperties()[t],i=r.type;let o=r.validator;const d=K(t),p=this.getAttribute(d);if(i&&i.isDataTypeClass&&(o=i),o){const f=o.propertyToAttribute(e);f===null?(this._doNotSyncAttributes.add(d),this.removeAttribute(d),this._doNotSyncAttributes.delete(d)):this.setAttribute(d,f)}else i===Boolean?e===!0&&p===null?this.setAttribute(d,""):e===!1&&p!==null&&this.removeAttribute(d):typeof e!="object"&&p!==e&&this.setAttribute(d,e)}_upgradeProperty(t){if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this[t]=e}}_upgradeAllProperties(){this.constructor.getMetadata().getPropertiesList().forEach(this._upgradeProperty.bind(this))}_getChildChangeListener(t){return this._childChangeListeners.has(t)||this._childChangeListeners.set(t,this._onChildChange.bind(this,t)),this._childChangeListeners.get(t)}_getSlotChangeListener(t){return this._slotChangeListeners.has(t)||this._slotChangeListeners.set(t,this._onSlotChange.bind(this,t)),this._slotChangeListeners.get(t)}_attachSlotChange(t,e){const a=this._getSlotChangeListener(e);a&&t.addEventListener("slotchange",a)}_detachSlotChange(t,e){t.removeEventListener("slotchange",this._getSlotChangeListener(e))}_onSlotChange(t){m.call(this,{type:"slot",name:t,reason:"slotchange"})}onInvalidation(t){}_render(){const t=this.constructor,e=t.getMetadata().hasIndividualSlots();this._suppressInvalidation=!0,this.onBeforeRendering(),this._componentStateFinalizedEventProvider.fireEvent("componentStateFinalized"),this._suppressInvalidation=!1,this._changedState=[],t._needsShadowDOM()&&D(this),this.staticAreaItem&&this.staticAreaItem.update(),e&&this._assignIndividualSlotsToChildren(),this.onAfterRendering()}_assignIndividualSlotsToChildren(){Array.from(this.children).forEach(e=>{e._individualSlot&&e.setAttribute("slot",e._individualSlot)})}_waitForDomRef(){return this._domRefReadyPromise}getDomRef(){if(typeof this._getRealDomRef=="function")return this._getRealDomRef();if(!this.shadowRoot||this.shadowRoot.children.length===0)return;const t=[...this.shadowRoot.children].filter(e=>!["link","style"].includes(e.localName));return t.length!==1&&console.warn(`The shadow DOM for ${this.constructor.getMetadata().getTag()} does not have a top level element, the getDomRef() method might not work as expected`),t[0]}getFocusDomRef(){const t=this.getDomRef();if(t)return t.querySelector("[data-sap-focus-ref]")||t}async getFocusDomRefAsync(){return await this._waitForDomRef(),this.getFocusDomRef()}async focus(t){await this._waitForDomRef();const e=this.getFocusDomRef();e&&typeof e.focus=="function"&&e.focus(t)}fireEvent(t,e,a=!1,n=!0){const r=this._fireEvent(t,e,a,n),i=j(t);return i!==t?r&&this._fireEvent(i,e,a,n):r}_fireEvent(t,e,a=!1,n=!0){const r=new CustomEvent(`ui5-${t}`,{detail:e,composed:!1,bubbles:n,cancelable:a}),i=this.dispatchEvent(r);if(Ft(t))return i;const o=new CustomEvent(t,{detail:e,composed:!1,bubbles:n,cancelable:a});return this.dispatchEvent(o)&&i}getSlottedNodes(t){return Ct(this[t])}attachComponentStateFinalized(t){this._componentStateFinalizedEventProvider.attachEvent("componentStateFinalized",t)}detachComponentStateFinalized(t){this._componentStateFinalizedEventProvider.detachEvent("componentStateFinalized",t)}get effectiveDir(){return it(this.constructor),X(this)}get isUI5Element(){return!0}get classes(){return{}}static get observedAttributes(){return this.getMetadata().getAttributesList()}static _needsShadowDOM(){return!!this.template||Object.prototype.hasOwnProperty.call(this.prototype,"render")}static _needsStaticArea(){return!!this.staticAreaTemplate||Object.prototype.hasOwnProperty.call(this.prototype,"renderStatic")}getStaticAreaItemDomRef(){if(!this.constructor._needsStaticArea())throw new Error("This component does not use the static area");return this.staticAreaItem||(this.staticAreaItem=y.createInstance(),this.staticAreaItem.setOwnerElement(this)),this.staticAreaItem.parentElement||ot("ui5-static-area").appendChild(this.staticAreaItem),this.staticAreaItem.getDomRef()}static _generateAccessors(){const t=this.prototype,e=this.getMetadata().slotsAreManaged(),a=this.getMetadata().getProperties();for(const[n,r]of Object.entries(a)){if($(n)||console.warn(`"${n}" is not a valid property name. Use a name that does not collide with DOM APIs`),r.type===Boolean&&r.defaultValue)throw new Error(`Cannot set a default value for property "${n}". All booleans are false by default.`);if(r.type===Array)throw new Error(`Wrong type for property "${n}". Properties cannot be of type Array - use "multiple: true" and set "type" to the single value type, such as "String", "Object", etc...`);if(r.type===Object&&r.defaultValue)throw new Error(`Cannot set a default value for property "${n}". All properties of type "Object" are empty objects by default.`);if(r.multiple&&r.defaultValue)throw new Error(`Cannot set a default value for property "${n}". All multiple properties are empty arrays by default.`);Object.defineProperty(t,n,{get(){if(this._state[n]!==void 0)return this._state[n];const i=r.defaultValue;return r.type===Boolean?!1:r.type===String?i:r.multiple?[]:i},set(i){let o;i=this.constructor.getMetadata().constructor.validatePropertyValue(i,r);const f=r.type;let l=r.validator;const h=this._state[n];f&&f.isDataTypeClass&&(l=f),l?o=!l.valuesAreEqual(h,i):Array.isArray(h)&&Array.isArray(i)&&r.multiple&&r.compareValues?o=!V(h,i):o=h!==i,o&&(this._state[n]=i,m.call(this,{type:"property",name:n,newValue:i,oldValue:h}),this._updateAttribute(n,i))}})}if(e){const n=this.getMetadata().getSlots();for(const[r,i]of Object.entries(n)){$(r)||console.warn(`"${r}" is not a valid property name. Use a name that does not collide with DOM APIs`);const o=i.propertyName||r;Object.defineProperty(t,o,{get(){return this._state[o]!==void 0?this._state[o]:[]},set(){throw new Error("Cannot set slot content directly, use the DOM APIs (appendChild, removeChild, etc...)")}})}}}static get styles(){return""}static get staticAreaStyles(){return""}static get dependencies(){return[]}static getUniqueDependencies(){if(!O.has(this)){const t=this.dependencies.filter((e,a,n)=>n.indexOf(e)===a);O.set(this,t)}return O.get(this)||[]}static whenDependenciesDefined(){return Promise.all(this.getUniqueDependencies().map(t=>t.define()))}static async onDefine(){return Promise.resolve()}static async define(){await lt(),await Promise.all([this.whenDependenciesDefined(),this.onDefine()]);const t=this.getMetadata().getTag(),e=ct(t),a=customElements.get(t);return a&&!e?dt(t):a||(this._generateAccessors(),ht(t),customElements.define(t,this)),this}static getMetadata(){if(this.hasOwnProperty("_metadata"))return this._metadata;const t=[this.metadata];let e=this;for(;e!==L;)e=Object.getPrototypeOf(e),t.unshift(e.metadata);const a=ut({},...t);return this._metadata=new vt(a),this._metadata}}L.metadata={};const U=s=>"isUI5Element"in s;export{L as U,Wt as a,V as b,x as e,U as i};
