import{b as D,l as f,s as g,a as p,m as N,c as O}from"./withWebComponent-BqYi3caL.js";import{f as l,d as w}from"./Boot-CUKJMqeB.js";import{s as d}from"./event-Dq0fpeHi.js";import{f as z}from"./slot--DoKcWSY.js";import{C as S}from"./UI5Element-D1gTBhJw.js";import{d as T,f as R,g as C}from"./Device-RcFucVeJ.js";import{c as x,d as A}from"./FocusableElements-BqtokFct.js";import{v as I}from"./AriaLabelHelper-LMIEtYQL.js";import{c as G}from"./getEffectiveScrollbarStyle-BwuZEAK6.js";import{m as j,y as H,b as X}from"./useIsomorphicLayoutEffect-CJg151Ok.js";import{n as q,B as V,b as W}from"./Keys-B00bFMgT.js";import{t as Y}from"./getActiveElement-kltGt_DR.js";import{f as P}from"./ResizeHandler-Cj9P7VXu.js";import{i as $}from"./MediaRange-Bnzt26Xb.js";import{s as k}from"./style-map-Blizc8Vd.js";import{o as F}from"./class-map-CsNukgzr.js";import{s as v}from"./parameters-bundle.css-B_nLitlw.js";const $e=(o,e,t)=>Math.min(Math.max(o,e),Math.max(e,t)),E=()=>{const o=Y();return o&&typeof o.focus=="function"?o:null},U=o=>{const e=E();return e?M(o,e):!1},M=(o,e)=>{let t=o;if(t.shadowRoot&&(t=Array.from(t.shadowRoot.children).find(n=>n.localName!=="style"),!t))return!1;if(t===e)return!0;const i=t.localName==="slot"?t.assignedNodes():t.children;return i?Array.from(i).some(n=>M(n,e)):!1},J=(o,e,t)=>o>=t.left&&o<=t.right&&e>=t.top&&e<=t.bottom,ke=(o,e)=>{let t,i;if(o instanceof MouseEvent)t=o.clientX,i=o.clientY;else{const n=o.touches[0];t=n.clientX,i=n.clientY}return J(t,i,e)};function K(o){return"isUI5Element"in o&&"_show"in o}const Q=o=>{const e=o.parentElement||o.getRootNode&&o.getRootNode().host;return e&&(K(e)||e===document.documentElement)?e:Q(e)};function Z(o,e,t){return D`<div class="ui5-block-layer" @keydown="${this._preventBlockLayerFocus}" @mousedown="${this._preventBlockLayerFocus}"></div><section root-element style="${k(this.styles.root)}" class="${F(this.classes.root)}" role="${f(this._role)}" tabindex="-1" aria-modal="${f(this._ariaModal)}" aria-label="${f(this._ariaLabel)}" aria-labelledby="${f(this._ariaLabelledBy)}" @keydown=${this._onkeydown} @focusout=${this._onfocusout} @mouseup=${this._onmouseup} @mousedown=${this._onmousedown}><span class="first-fe" data-ui5-focus-trap tabindex="0" @focusin=${this.forwardToLast}></span><div style="${k(this.styles.content)}" class="${F(this.classes.content)}"  @scroll="${this._scroll}" part="content"><slot></slot></div><span class="last-fe" data-ui5-focus-trap tabindex="0" @focusin=${this.forwardToFirst}></span></section>`}var b;(function(o){o.None="None",o.Dialog="Dialog",o.AlertDialog="AlertDialog"})(b||(b={}));const m=b,a=j("OpenedPopupsRegistry",{openedRegistry:[]}),ee=(o,e=[])=>{a.openedRegistry.some(t=>t.instance===o)||a.openedRegistry.push({instance:o,parentPopovers:e}),L(),a.openedRegistry.length===1&&te()},oe=o=>{a.openedRegistry=a.openedRegistry.filter(e=>e.instance!==o),L(),a.openedRegistry.length||ie()},Fe=()=>[...a.openedRegistry],B=o=>{a.openedRegistry.length&&q(o)&&(o.stopPropagation(),a.openedRegistry[a.openedRegistry.length-1].instance.closePopup(!0))},te=()=>{document.addEventListener("keydown",B)},ie=()=>{document.removeEventListener("keydown",B)},L=()=>{let o,e=!1;for(let t=a.openedRegistry.length-1;t>=0;t--)o=a.openedRegistry[t].instance,!e&&o.isModal?(o.isTopModalPopup=!0,e=!0):o.isTopModalPopup=!1};l("@ui5/webcomponents-theming","sap_horizon",async()=>g);l("@ui5/webcomponents","sap_horizon",async()=>v);const se={packageName:"@ui5/webcomponents",fileName:"themes/Popup.css.ts",content:`:host{min-width:1px;overflow:visible;border:none;inset:unset;margin:0;padding:0}
`};l("@ui5/webcomponents-theming","sap_horizon",async()=>g);l("@ui5/webcomponents","sap_horizon",async()=>v);const re={packageName:"@ui5/webcomponents",fileName:"themes/PopupBlockLayer.css.ts",content:`.ui5-block-layer{position:fixed;z-index:-1;display:none;inset:-500px;outline:none;pointer-events:all}
`};l("@ui5/webcomponents-theming","sap_horizon",async()=>g);l("@ui5/webcomponents","sap_horizon",async()=>v);const ne={packageName:"@ui5/webcomponents",fileName:"themes/PopupGlobal.css.ts",content:`.ui5-popup-scroll-blocker{overflow:hidden}
`};var r=function(o,e,t,i){var n=arguments.length,u=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,e,t,i);else for(var y=o.length-1;y>=0;y--)(h=o[y])&&(u=(n<3?h(u):n>3?h(e,t,u):h(e,t))||u);return n>3&&u&&Object.defineProperty(e,t,u),u},c;const ae=()=>{H("data-ui5-popup-scroll-blocker")||X(ne,"data-ui5-popup-scroll-blocker")};ae();const _=new Set;let s=c=class extends S{constructor(){super(),this._resizeHandler=this._resize.bind(this),this._getRealDomRef=()=>this.shadowRoot.querySelector("[root-element]")}onBeforeRendering(){this.onPhone=T(),this.onDesktop=R()}onAfterRendering(){w().then(()=>{this._updateMediaRange()})}onEnterDOM(){this.setAttribute("popover","manual"),P.register(this,this._resizeHandler),R()&&this.setAttribute("desktop",""),this.tabIndex=-1}onExitDOM(){this._opened&&(c.unblockPageScrolling(this),this._removeOpenedPopup()),P.deregister(this,this._resizeHandler)}set open(e){this._open!==e&&(this._open=e,e?this.openPopup():this.closePopup())}get open(){return this._open}async openPopup(){this._opened||!this.fireEvent("before-open",{},!0,!1)||this._opened||(this._opened=!0,this.isModal&&c.blockPageScrolling(this),this._focusedElementBeforeOpen=E(),this._show(),this.getDomRef()&&this._updateMediaRange(),this._addOpenedPopup(),this.open=!0,await this.applyInitialFocus(),await w(),await this.applyInitialFocus(),this.fireEvent("open",{},!1,!1))}_resize(){this._updateMediaRange()}_preventBlockLayerFocus(e){e.preventDefault()}static blockPageScrolling(e){_.add(e),_.size===1&&document.documentElement.classList.add("ui5-popup-scroll-blocker")}static unblockPageScrolling(e){_.delete(e),_.size===0&&document.documentElement.classList.remove("ui5-popup-scroll-blocker")}_scroll(e){this.fireEvent("scroll",{scrollTop:e.target.scrollTop,targetRef:e.target})}_onkeydown(e){const t=e.target===this._root&&V(e),i=W(e)&&!this.open;(t||i)&&e.preventDefault()}_onfocusout(e){e.relatedTarget||(this._shouldFocusRoot=!0)}_onmousedown(e){this.shadowRoot.contains(e.target)?this._shouldFocusRoot=!0:this._shouldFocusRoot=!1}_onmouseup(){this._shouldFocusRoot&&(C()&&this._root.focus(),this._shouldFocusRoot=!1)}async forwardToFirst(){const e=await x(this);e?e.focus():this._root.focus()}async forwardToLast(){const e=await A(this);e?e.focus():this._root.focus()}async applyInitialFocus(){this.preventInitialFocus||await this.applyFocus()}async applyFocus(){if(this.querySelector("[autofocus]")||(await this._waitForDomRef(),this.getRootNode()===this))return;let e;this.initialFocus&&(e=this.getRootNode().getElementById(this.initialFocus)||document.getElementById(this.initialFocus)),e=e||await x(this)||this._root,e&&e.focus()}isFocusWithin(){return U(this._root)}_updateMediaRange(){this.mediaRange=$.getCurrentRange($.RANGESETS.RANGE_4STEPS,this.getDomRef().offsetWidth)}_addOpenedPopup(){ee(this)}closePopup(e=!1,t=!1,i=!1){!this._opened||!this.fireEvent("before-close",{escPressed:e},!0,!1)||(this._opened=!1,this.isModal&&c.unblockPageScrolling(this),this.hide(),this.open=!1,t||this._removeOpenedPopup(),!this.preventFocusRestore&&!i&&this.resetFocus(),this.fireEvent("close",{},!1,!1))}_removeOpenedPopup(){oe(this)}resetFocus(){this._focusedElementBeforeOpen&&(this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null)}_show(){this.isConnected&&(this.setAttribute("popover","manual"),this.showPopover())}hide(){this.isConnected&&this.hidePopover()}get _ariaLabel(){return I(this)}get _root(){return this.shadowRoot.querySelector(".ui5-popup-root")}get _role(){return this.accessibleRole===m.None?void 0:this.accessibleRole.toLowerCase()}get _ariaModal(){return this.accessibleRole===m.None?void 0:"true"}get contentDOM(){return this.shadowRoot.querySelector(".ui5-popup-content")}get styles(){return{root:{},content:{}}}get classes(){return{root:{"ui5-popup-root":!0,"ui5-content-native-scrollbars":G()},content:{"ui5-popup-content":!0}}}};r([p()],s.prototype,"initialFocus",void 0);r([p({type:Boolean})],s.prototype,"preventFocusRestore",void 0);r([p({defaultValue:void 0})],s.prototype,"accessibleName",void 0);r([p({defaultValue:""})],s.prototype,"accessibleNameRef",void 0);r([p({type:m,defaultValue:m.Dialog})],s.prototype,"accessibleRole",void 0);r([p()],s.prototype,"mediaRange",void 0);r([p({type:Boolean})],s.prototype,"preventInitialFocus",void 0);r([p({type:Boolean,noAttribute:!0})],s.prototype,"isTopModalPopup",void 0);r([z({type:HTMLElement,default:!0})],s.prototype,"content",void 0);r([p({type:Boolean})],s.prototype,"onPhone",void 0);r([p({type:Boolean})],s.prototype,"onDesktop",void 0);r([p({type:Boolean})],s.prototype,"open",null);s=c=r([N({renderer:O,styles:[se,re],template:Z}),d("before-open"),d("open"),d("before-close",{detail:{escPressed:{type:Boolean}}}),d("close"),d("scroll")],s);const Me=s;l("@ui5/webcomponents-theming","sap_horizon",async()=>g);l("@ui5/webcomponents","sap_horizon",async()=>v);const Be={packageName:"@ui5/webcomponents",fileName:"themes/PopupsCommon.css.ts",content:`:host{position:fixed;background:var(--sapGroup_ContentBackground);border-radius:var(--_ui5-v2-0-0-rc-5_popup_border_radius);min-height:2rem;box-sizing:border-box}:host([open]){display:flex}.ui5-popup-root{background:inherit;border-radius:inherit;width:100%;box-sizing:border-box;display:flex;flex-direction:column;overflow:hidden;flex:1 1 auto;outline:none}.ui5-popup-root .ui5-popup-header-root{color:var(--sapPageHeader_TextColor);box-shadow:var(--_ui5-v2-0-0-rc-5_popup_header_shadow);border-bottom:var(--_ui5-v2-0-0-rc-5_popup_header_border)}.ui5-popup-content{color:var(--sapTextColor);flex:auto}.ui5-popup-footer-root{background:var(--sapPageFooter_Background);border-top:1px solid var(--sapPageFooter_BorderColor);color:var(--sapPageFooter_TextColor)}.ui5-popup-header-root,.ui5-popup-footer-root,:host([header-text]) .ui5-popup-header-text{margin:0;font-size:1rem;font-family:"72override",var(--_ui5-v2-0-0-rc-5_popup_header_font_family);display:flex;justify-content:center;align-items:center}.ui5-popup-header-root .ui5-popup-header-text{font-weight:var(--_ui5-v2-0-0-rc-5_popup_header_font_weight)}.ui5-popup-content{overflow:auto;box-sizing:border-box}:host([header-text]) .ui5-popup-header-text{text-align:center;min-height:var(--_ui5-v2-0-0-rc-5_popup_default_header_height);max-height:var(--_ui5-v2-0-0-rc-5_popup_default_header_height);line-height:var(--_ui5-v2-0-0-rc-5_popup_default_header_height);text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:100%;display:inline-block}:host([header-text]) .ui5-popup-header-root{justify-content:var(--_ui5-v2-0-0-rc-5_popup_header_prop_header_text_alignment)}:host(:not([header-text])) .ui5-popup-header-text{display:none}:host([no-scrolling]) .ui5-popup-content{overflow:hidden}:host([media-range="S"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-0-0-rc-5_popup_content_padding_s)}:host([media-range="M"]) .ui5-popup-content,:host([media-range="L"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-0-0-rc-5_popup_content_padding_m_l)}:host([media-range="XL"]) .ui5-popup-content{padding:1rem var(--_ui5-v2-0-0-rc-5_popup_content_padding_xl)}.ui5-popup-header-root{background:var(--_ui5-v2-0-0-rc-5_popup_header_background)}:host([media-range="S"]) .ui5-popup-header-root,:host([media-range="S"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-0-0-rc-5_popup_header_footer_padding_s);padding-right:var(--_ui5-v2-0-0-rc-5_popup_header_footer_padding_s)}:host([media-range="M"]) .ui5-popup-header-root,:host([media-range="L"]) .ui5-popup-header-root,:host([media-range="M"]) .ui5-popup-footer-root,:host([media-range="L"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-0-0-rc-5_popup_header_footer_padding_m_l);padding-right:var(--_ui5-v2-0-0-rc-5_popup_header_footer_padding_m_l)}:host([media-range="XL"]) .ui5-popup-header-root,:host([media-range="XL"]) .ui5-popup-footer-root{padding-left:var(--_ui5-v2-0-0-rc-5_popup_header_footer_padding_xl);padding-right:var(--_ui5-v2-0-0-rc-5_popup_header_footer_padding_xl)}
`};export{Me as P,m as a,ee as b,oe as c,ke as f,Fe as g,Q as i,$e as m,E as r,Be as s};
