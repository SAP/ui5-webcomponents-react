{"version":3,"file":"InputElementsFormSupport-za48ZVxZ.js","sources":["../../node_modules/@ui5/webcomponents/dist/features/InputElementsFormSupport.js"],"sourcesContent":["import { registerFeature } from \"@ui5/webcomponents-base/dist/FeaturesRegistry.js\";\nconst findNearestFormElement = (element) => {\n    let currentElement = element.parentElement;\n    while (currentElement && currentElement.tagName.toLowerCase() !== \"form\") {\n        currentElement = currentElement.parentElement;\n    }\n    if (currentElement instanceof HTMLFormElement) {\n        return currentElement;\n    }\n};\nclass FormSupport {\n    /**\n     * Syncs the native input element, rendered into the component's light DOM,\n     * with the component's state.\n     * @param { IFormElement} element - the component with form support\n     * @param { NativeInputUpdateCallback } nativeInputUpdateCallback - callback to calculate the native input's \"disabled\" and \"value\" properties\n     */\n    static syncNativeHiddenInput(element, nativeInputUpdateCallback) {\n        const needsNativeInput = !!element.name || element.required;\n        const nativeInput = element.querySelector(\"input[data-ui5-form-support]\");\n        if (needsNativeInput) {\n            this.syncNativeElement(element, nativeInput, nativeInputUpdateCallback);\n        }\n        else if (nativeInput) {\n            element.removeChild(nativeInput);\n        }\n    }\n    /**\n     * Syncs the native textarea element, rendered into the component's light DOM,\n     * with the component's state.\n     * @param { IFormElement} element - the component with form support\n     * @param { NativeInputUpdateCallback } nativeInputUpdateCallback - callback to calculate the native input's \"disabled\" and \"value\" properties\n     */\n    static syncNativeHiddenTextArea(element, nativeInputUpdateCallback) {\n        const needsNativeTextArea = !!element.name || element.required;\n        const nativeTextarea = element.querySelector(\"textarea[data-ui5-form-support]\");\n        if (needsNativeTextArea) {\n            this.syncNativeElement(element, nativeTextarea, nativeInputUpdateCallback, \"textarea\");\n        }\n        else if (nativeTextarea) {\n            element.removeChild(nativeTextarea);\n        }\n    }\n    static syncNativeElement(element, nativeElement, nativeInputUpdateCallback, nativeElementTagName = \"input\") {\n        if (!nativeElement) {\n            nativeElement = document.createElement(nativeElementTagName);\n            nativeElement.style.clip = \"rect(0 0 0 0)\";\n            nativeElement.style.clipPath = \"inset(50%)\";\n            nativeElement.style.height = \"1px\";\n            nativeElement.style.overflow = \"hidden\";\n            nativeElement.style.position = \"absolute\";\n            nativeElement.style.whiteSpace = \"nowrap\";\n            nativeElement.style.width = \"1px\";\n            nativeElement.style.bottom = \"0\";\n            nativeElement.setAttribute(\"tabindex\", \"-1\");\n            nativeElement.required = element.required;\n            nativeElement.setAttribute(\"data-ui5-form-support\", \"\");\n            nativeElement.setAttribute(\"aria-hidden\", \"true\");\n            nativeElement.addEventListener(\"focusin\", () => element.getFocusDomRef()?.focus());\n            nativeElement.slot = \"formSupport\"; // Needed for IE - otherwise input elements are not part of the real DOM tree and are not detected by forms\n            element.appendChild(nativeElement);\n        }\n        nativeElement.name = element.name;\n        (nativeInputUpdateCallback || copyDefaultProperties)(element, nativeElement);\n    }\n    /**\n     * Syncs the native file input element, rendered into the <code>ui5-file-uploader</code> component's light DOM,\n     * with the <code>ui5-file-uploader</code> component's state.\n     * @param { IFormFileElement} element - the component with form support\n     * @param { NativeInputUpdateCallback } nativeInputUpdateCallback - callback to calculate the native input's \"disabled\" and \"value\" properties\n     * @param { NativeInputChangeCallback } nativeInputChangeCallback - callback, added to native input's \"change\" event\n     */\n    static syncNativeFileInput(element, nativeInputUpdateCallback, nativeInputChangeCallback) {\n        const needsNativeInput = !!element.name;\n        let nativeInput = element.querySelector(`input[type=\"file\"][data-ui5-form-support]`);\n        if (needsNativeInput && !nativeInput) {\n            nativeInput = document.createElement(\"input\");\n            nativeInput.type = \"file\";\n            nativeInput.setAttribute(\"data-ui5-form-support\", \"\");\n            nativeInput.slot = \"formSupport\"; // Needed to visualize the input in the light dom\n            nativeInput.style.position = \"absolute\";\n            nativeInput.style.top = \"0\";\n            nativeInput.style.left = \"0\";\n            nativeInput.style.width = \"100%\";\n            nativeInput.style.height = \"100%\";\n            nativeInput.style.opacity = \"0\";\n            if (element.multiple) {\n                nativeInput.multiple = true;\n            }\n            nativeInput.addEventListener(\"change\", nativeInputChangeCallback);\n            element.appendChild(nativeInput);\n        }\n        if (!needsNativeInput && nativeInput) {\n            element.removeChild(nativeInput);\n        }\n        if (needsNativeInput) {\n            nativeInput.name = element.name;\n            (nativeInputUpdateCallback || copyDefaultProperties)(element, nativeInput);\n        }\n    }\n    static triggerFormSubmit(element) {\n        const formElement = findNearestFormElement(element);\n        if (formElement) {\n            if (!formElement.checkValidity()) {\n                formElement.reportValidity();\n                return;\n            }\n            // eslint-disable-next-line no-undef\n            const submitPrevented = !formElement.dispatchEvent(new SubmitEvent(\"submit\", {\n                bubbles: true,\n                cancelable: true,\n                submitter: element,\n            }));\n            if (submitPrevented) {\n                return;\n            }\n            formElement.submit();\n        }\n    }\n    static triggerFormReset(element) {\n        const formElement = findNearestFormElement(element);\n        if (formElement) {\n            formElement.reset();\n        }\n    }\n}\nconst copyDefaultProperties = (element, nativeInput) => {\n    nativeInput.disabled = element.disabled;\n    nativeInput.value = element.value; // We do not explicitly convert to string to retain the current browser behavior\n};\n// Add form support to the global features registry so that Web Components can find and use it\nregisterFeature(\"FormSupport\", FormSupport);\nexport default FormSupport;\n//# sourceMappingURL=InputElementsFormSupport.js.map"],"names":["findNearestFormElement","element","currentElement","FormSupport","nativeInputUpdateCallback","needsNativeInput","nativeInput","needsNativeTextArea","nativeTextarea","nativeElement","nativeElementTagName","_a","copyDefaultProperties","nativeInputChangeCallback","formElement","registerFeature"],"mappings":"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","x_google_ignoreList":[0]}