{"version":3,"file":"Popover-661594f1.js","sources":["../../node_modules/@ui5/webcomponents/dist/types/PopoverHorizontalAlign.js","../../node_modules/@ui5/webcomponents/dist/types/PopoverPlacementType.js","../../node_modules/@ui5/webcomponents/dist/types/PopoverVerticalAlign.js","../../node_modules/@ui5/webcomponents-base/dist/types/DOMReference.js","../../node_modules/@ui5/webcomponents/dist/popup-utils/PopoverRegistry.js","../../node_modules/@ui5/webcomponents/dist/generated/templates/PopoverTemplate.lit.js","../../node_modules/@ui5/webcomponents/dist/generated/themes/Popover.css.js","../../node_modules/@ui5/webcomponents/dist/Popover.js"],"sourcesContent":["/**\n * Popover horizontal align types.\n *\n * @class\n * @enum {string}\n * @public\n * @author SAP SE\n * @alias sap.ui.webc.main.types.PopoverHorizontalAlign\n */\nvar PopoverHorizontalAlign;\n(function (PopoverHorizontalAlign) {\n    /**\n     * Popover is centered\n     * @public\n     * @type {Center}\n     */\n    PopoverHorizontalAlign[\"Center\"] = \"Center\";\n    /**\n     * Popover opens on the left side of the target\n     * @public\n     * @type {Left}\n     */\n    PopoverHorizontalAlign[\"Left\"] = \"Left\";\n    /**\n     * Popover opens on the right side of the target\n     * @public\n     * @type {Right}\n     */\n    PopoverHorizontalAlign[\"Right\"] = \"Right\";\n    /**\n     * Popover is stretched\n     * @public\n     * @type {Stretch}\n     */\n    PopoverHorizontalAlign[\"Stretch\"] = \"Stretch\";\n})(PopoverHorizontalAlign || (PopoverHorizontalAlign = {}));\nexport default PopoverHorizontalAlign;\n//# sourceMappingURL=PopoverHorizontalAlign.js.map","/**\n * Popover placement types.\n *\n * @class\n * @enum {string}\n * @public\n * @author SAP SE\n * @alias sap.ui.webc.main.types.PopoverPlacementType\n */\nvar PopoverPlacementType;\n(function (PopoverPlacementType) {\n    /**\n     * Popover will be placed at the left side of the reference element.\n     * @public\n     * @type {Left}\n     */\n    PopoverPlacementType[\"Left\"] = \"Left\";\n    /**\n     * Popover will be placed at the right side of the reference element.\n     * @public\n     * @type {Right}\n     */\n    PopoverPlacementType[\"Right\"] = \"Right\";\n    /**\n     * Popover will be placed at the top of the reference element.\n     * @public\n     * @type {Top}\n     */\n    PopoverPlacementType[\"Top\"] = \"Top\";\n    /**\n     * Popover will be placed at the bottom of the reference element.\n     * @public\n     * @type {Bottom}\n     */\n    PopoverPlacementType[\"Bottom\"] = \"Bottom\";\n})(PopoverPlacementType || (PopoverPlacementType = {}));\nexport default PopoverPlacementType;\n//# sourceMappingURL=PopoverPlacementType.js.map","/**\n * Popover vertical align types.\n *\n * @class\n * @enum {string}\n * @public\n * @author SAP SE\n * @alias sap.ui.webc.main.types.PopoverVerticalAlign\n */\nvar PopoverVerticalAlign;\n(function (PopoverVerticalAlign) {\n    /**\n     *\n     * @public\n     * @type {Center}\n     */\n    PopoverVerticalAlign[\"Center\"] = \"Center\";\n    /**\n     * Popover will be placed at the top of the reference control.\n     * @public\n     * @type {Top}\n     */\n    PopoverVerticalAlign[\"Top\"] = \"Top\";\n    /**\n     * Popover will be placed at the bottom of the reference control.\n     * @public\n     * @type {Bottom}\n     */\n    PopoverVerticalAlign[\"Bottom\"] = \"Bottom\";\n    /**\n     * Popover will be streched\n     * @public\n     * @type {Stretch}\n     */\n    PopoverVerticalAlign[\"Stretch\"] = \"Stretch\";\n})(PopoverVerticalAlign || (PopoverVerticalAlign = {}));\nexport default PopoverVerticalAlign;\n//# sourceMappingURL=PopoverVerticalAlign.js.map","import DataType from \"./DataType.js\";\n/**\n * @class\n * DOM Element reference or ID.\n * <b>Note:</b> If an ID is passed, it is expected to be part of the same <code>document</code> element as the consuming component.\n *\n * @constructor\n * @extends sap.ui.webc.base.types.DataType\n * @author SAP SE\n * @alias sap.ui.webc.base.types.DOMReference\n * @public\n */\nclass DOMReference extends DataType {\n    static isValid(value) {\n        return (typeof value === \"string\" || value instanceof HTMLElement);\n    }\n    static propertyToAttribute(propertyValue) {\n        if (propertyValue instanceof HTMLElement) {\n            return null;\n        }\n        return propertyValue;\n    }\n}\nexport default DOMReference;\n//# sourceMappingURL=DOMReference.js.map","import { isClickInRect } from \"@ui5/webcomponents-base/dist/util/PopupUtils.js\";\nimport { instanceOfPopover } from \"../Popover.js\";\nimport { getOpenedPopups, addOpenedPopup, removeOpenedPopup } from \"./OpenedPopupsRegistry.js\";\nlet updateInterval;\nconst intervalTimeout = 300;\nconst openedRegistry = [];\nconst repositionPopovers = () => {\n    openedRegistry.forEach(popover => {\n        popover.instance.reposition();\n    });\n};\nconst closePopoversIfLostFocus = () => {\n    if (document.activeElement.tagName === \"IFRAME\") {\n        getRegistry().reverse().forEach(popup => popup.instance.close(false, false, true));\n    }\n};\nconst runUpdateInterval = () => {\n    updateInterval = setInterval(() => {\n        repositionPopovers();\n        closePopoversIfLostFocus();\n    }, intervalTimeout);\n};\nconst stopUpdateInterval = () => {\n    clearInterval(updateInterval);\n};\nconst attachGlobalScrollHandler = () => {\n    document.body.addEventListener(\"scroll\", repositionPopovers, { capture: true });\n};\nconst detachGlobalScrollHandler = () => {\n    document.body.removeEventListener(\"scroll\", repositionPopovers, { capture: true });\n};\nconst attachScrollHandler = (popover) => {\n    popover && popover.shadowRoot.addEventListener(\"scroll\", repositionPopovers, { capture: true });\n};\nconst detachScrollHandler = (popover) => {\n    popover && popover.shadowRoot.removeEventListener(\"scroll\", repositionPopovers, { capture: true });\n};\nconst attachGlobalClickHandler = () => {\n    document.addEventListener(\"mousedown\", clickHandler);\n};\nconst detachGlobalClickHandler = () => {\n    document.removeEventListener(\"mousedown\", clickHandler);\n};\nconst clickHandler = (event) => {\n    const openedPopups = getOpenedPopups();\n    if (openedPopups.length === 0) {\n        return;\n    }\n    const isTopPopupPopover = instanceOfPopover(openedPopups[openedPopups.length - 1].instance);\n    if (!isTopPopupPopover) {\n        return;\n    }\n    // loop all open popovers\n    for (let i = (openedPopups.length - 1); i !== -1; i--) {\n        const popup = openedPopups[i].instance;\n        // if popup is modal, opener is clicked, popup is dialog skip closing\n        if (popup.isModal || popup.isOpenerClicked(event)) {\n            return;\n        }\n        if (isClickInRect(event, popup.getBoundingClientRect())) {\n            break;\n        }\n        popup.close();\n    }\n};\nconst addOpenedPopover = (instance) => {\n    const parentPopovers = getParentPopoversIfNested(instance);\n    addOpenedPopup(instance, parentPopovers);\n    openedRegistry.push({\n        instance,\n        parentPopovers,\n    });\n    attachScrollHandler(instance);\n    if (openedRegistry.length === 1) {\n        attachGlobalScrollHandler();\n        attachGlobalClickHandler();\n        runUpdateInterval();\n    }\n};\nconst removeOpenedPopover = (instance) => {\n    const popoversToClose = [instance];\n    for (let i = 0; i < openedRegistry.length; i++) {\n        const indexOfCurrentInstance = openedRegistry[i].parentPopovers.indexOf(instance);\n        if (openedRegistry[i].parentPopovers.length > 0 && indexOfCurrentInstance > -1) {\n            popoversToClose.push(openedRegistry[i].instance);\n        }\n    }\n    for (let i = popoversToClose.length - 1; i >= 0; i--) {\n        for (let j = 0; j < openedRegistry.length; j++) {\n            let indexOfItemToRemove = -1;\n            if (popoversToClose[i] === openedRegistry[j].instance) {\n                indexOfItemToRemove = j;\n            }\n            if (indexOfItemToRemove >= 0) {\n                removeOpenedPopup(openedRegistry[indexOfItemToRemove].instance);\n                detachScrollHandler(openedRegistry[indexOfItemToRemove].instance);\n                const itemToClose = openedRegistry.splice(indexOfItemToRemove, 1);\n                itemToClose[0].instance.close(false, true);\n            }\n        }\n    }\n    if (!openedRegistry.length) {\n        detachGlobalScrollHandler();\n        detachGlobalClickHandler();\n        stopUpdateInterval();\n    }\n};\nconst getRegistry = () => {\n    return openedRegistry;\n};\nconst getParentPopoversIfNested = (instance) => {\n    let currentElement = instance.parentNode;\n    const parentPopovers = [];\n    while (currentElement && currentElement.parentNode) {\n        for (let i = 0; i < openedRegistry.length; i++) {\n            if (currentElement === openedRegistry[i].instance) {\n                parentPopovers.push(currentElement);\n            }\n        }\n        currentElement = currentElement.parentNode;\n    }\n    return parentPopovers;\n};\nexport { addOpenedPopover, removeOpenedPopover, getRegistry };\n//# sourceMappingURL=PopoverRegistry.js.map","/* eslint no-unused-vars: 0 */\nimport { html, svg, repeat, classMap, styleMap, ifDefined, unsafeHTML, scopeTag } from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\n\nconst block0 = (context, tags, suffix) => html`<section style=\"${styleMap(context.styles.root)}\" class=\"${classMap(context.classes.root)}\" role=\"${ifDefined(context._role)}\" aria-modal=\"${ifDefined(context._ariaModal)}\" aria-label=\"${ifDefined(context._ariaLabel)}\" aria-labelledby=\"${ifDefined(context._ariaLabelledBy)}\" @keydown=${context._onkeydown} @focusout=${context._onfocusout} @mouseup=${context._onmouseup} @mousedown=${context._onmousedown}><span class=\"first-fe\" data-ui5-focus-trap tabindex=\"0\" @focusin=${context.forwardToLast}></span><span class=\"ui5-popover-arrow\" style=\"${styleMap(context.styles.arrow)}\"></span>${ context._displayHeader ? block1(context, tags, suffix) : undefined }<div style=\"${styleMap(context.styles.content)}\" class=\"${classMap(context.classes.content)}\"  @scroll=\"${context._scroll}\" part=\"content\"><slot></slot></div>${ context._displayFooter ? block4(context, tags, suffix) : undefined }<span class=\"last-fe\" data-ui5-focus-trap tabindex=\"0\" @focusin=${context.forwardToFirst}></span></section> `;\nconst block1 = (context, tags, suffix) => html`<header class=\"ui5-popup-header-root\" id=\"ui5-popup-header\" part=\"header\">${ context.header.length ? block2(context, tags, suffix) : block3(context, tags, suffix) }</header>`;\nconst block2 = (context, tags, suffix) => html`<slot name=\"header\"></slot>`;\nconst block3 = (context, tags, suffix) => html`<h1 class=\"ui5-popup-header-text\">${ifDefined(context.headerText)}</h1>`;\nconst block4 = (context, tags, suffix) => html`${ context.footer.length ? block5(context, tags, suffix) : undefined }`;\nconst block5 = (context, tags, suffix) => html`<footer class=\"ui5-popup-footer-root\" part=\"footer\"><slot name=\"footer\"></slot></footer>`;\n\n\nexport default block0;","import { registerThemePropertiesLoader } from \"@ui5/webcomponents-base/dist/asset-registries/Themes.js\";\nimport defaultThemeBase from \"@ui5/webcomponents-theming/dist/generated/themes/sap_fiori_3/parameters-bundle.css.js\";\nimport defaultTheme from \"./sap_fiori_3/parameters-bundle.css.js\";\nregisterThemePropertiesLoader(\"@ui5/webcomponents-theming\", \"sap_fiori_3\", async () => defaultThemeBase);\nregisterThemePropertiesLoader(\"@ui5/webcomponents\", \"sap_fiori_3\", async () => defaultTheme);\nconst styleData = { packageName: \"@ui5/webcomponents\", fileName: \"themes/Popover.css.ts\", content: \".ui5-popover-arrow{pointer-events:none;display:block;width:1rem;height:1rem;position:absolute;overflow:hidden}.ui5-popover-arrow:after{content:\\\"\\\";display:block;width:.7rem;height:.7rem;background-color:var(--sapGroup_ContentBackground);box-shadow:var(--sapContent_Shadow3);transform:rotate(-45deg)}:host{max-width:calc(100% - var(--_ui5_popup_viewport_margin)*2)}:host([opened][actual-placement-type=Top]){margin-top:var(--_ui5-popover-margin-bottom)}:host([opened][actual-placement-type=Bottom]){margin-top:var(--_ui5-popover-margin-top)}:host([actual-placement-type=Bottom]) .ui5-popover-arrow{left:calc(50% - .5625rem);top:-.5rem;height:.5625rem}:host([actual-placement-type=Bottom]) .ui5-popover-arrow:after{margin:var(--_ui5_popover_upward_arrow_margin)}:host([actual-placement-type=Left]) .ui5-popover-arrow{top:calc(50% - .5625rem);right:-.5625rem;width:.5625rem}:host([actual-placement-type=Left]) .ui5-popover-arrow:after{margin:var(--_ui5_popover_right_arrow_margin)}:host([actual-placement-type=Top]) .ui5-popover-arrow{left:calc(50% - .5625rem);height:.5625rem;top:100%}:host([actual-placement-type=Top]) .ui5-popover-arrow:after{margin:var(--_ui5_popover_downward_arrow_margin)}:host(:not([actual-placement-type])) .ui5-popover-arrow,:host([actual-placement-type=Right]) .ui5-popover-arrow{left:-.5625rem;top:calc(50% - .5625rem);width:.5625rem;height:1rem}:host(:not([actual-placement-type])) .ui5-popover-arrow:after,:host([actual-placement-type=Right]) .ui5-popover-arrow:after{margin:var(--_ui5_popover_left_arrow_margin)}:host([hide-arrow]) .ui5-popover-arrow{display:none}.ui5-popover-root{min-width:6.25rem}\" };\nexport default styleData;\n//# sourceMappingURL=Popover.css.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar Popover_1;\nimport customElement from \"@ui5/webcomponents-base/dist/decorators/customElement.js\";\nimport property from \"@ui5/webcomponents-base/dist/decorators/property.js\";\nimport slot from \"@ui5/webcomponents-base/dist/decorators/slot.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport { isIOS } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport DOMReference from \"@ui5/webcomponents-base/dist/types/DOMReference.js\";\nimport { getClosedPopupParent } from \"@ui5/webcomponents-base/dist/util/PopupUtils.js\";\nimport clamp from \"@ui5/webcomponents-base/dist/util/clamp.js\";\nimport Popup from \"./Popup.js\";\nimport PopoverPlacementType from \"./types/PopoverPlacementType.js\";\nimport PopoverVerticalAlign from \"./types/PopoverVerticalAlign.js\";\nimport PopoverHorizontalAlign from \"./types/PopoverHorizontalAlign.js\";\nimport { addOpenedPopover, removeOpenedPopover } from \"./popup-utils/PopoverRegistry.js\";\n// Template\nimport PopoverTemplate from \"./generated/templates/PopoverTemplate.lit.js\";\n// Styles\nimport browserScrollbarCSS from \"./generated/themes/BrowserScrollbar.css.js\";\nimport PopupsCommonCss from \"./generated/themes/PopupsCommon.css.js\";\nimport PopoverCss from \"./generated/themes/Popover.css.js\";\nconst ARROW_SIZE = 8;\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * The <code>ui5-popover</code> component displays additional information for an object\n * in a compact way and without leaving the page.\n * The Popover can contain various UI elements, such as fields, tables, images, and charts.\n * It can also include actions in the footer.\n *\n * <h3>Structure</h3>\n *\n * The popover has three main areas:\n * <ul>\n * <li>Header (optional)</li>\n * <li>Content</li>\n * <li>Footer (optional)</li>\n * </ul>\n *\n * <b>Note:</b> The <code>ui5-popover</code> is closed when the user clicks\n * or taps outside the popover\n * or selects an action within the popover. You can prevent this with the\n * <code>modal</code> property.\n *\n * <h3>CSS Shadow Parts</h3>\n *\n * <ui5-link target=\"_blank\" href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/::part\">CSS Shadow Parts</ui5-link> allow developers to style elements inside the Shadow DOM.\n * <br>\n * The <code>ui5-popover</code> exposes the following CSS Shadow Parts:\n * <ul>\n * <li>header - Used to style the header of the component</li>\n * <li>content - Used to style the content of the component</li>\n * <li>footer - Used to style the footer of the component</li>\n * </ul>\n *\n * <h3>ES6 Module Import</h3>\n *\n * <code>import \"@ui5/webcomponents/dist/Popover.js\";</code>\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webc.main.Popover\n * @extends sap.ui.webc.main.Popup\n * @tagname ui5-popover\n * @since 1.0.0-rc.6\n * @public\n */\nlet Popover = Popover_1 = class Popover extends Popup {\n    static get VIEWPORT_MARGIN() {\n        return 10; // px\n    }\n    constructor() {\n        super();\n    }\n    onAfterRendering() {\n        if (!this.isOpen() && this.open) {\n            let opener;\n            if (this.opener instanceof HTMLElement) {\n                opener = this.opener;\n            }\n            else if (typeof this.opener === \"string\") {\n                opener = this.getRootNode().getElementById(this.opener);\n            }\n            if (!opener) {\n                console.warn(\"Valid opener id is required.\"); // eslint-disable-line\n                return;\n            }\n            this.showAt(opener);\n        }\n        else if (this.isOpen() && !this.open) {\n            this.close();\n        }\n    }\n    isOpenerClicked(e) {\n        const target = e.target;\n        if (target === this._opener) {\n            return true;\n        }\n        const ui5ElementTarget = target;\n        if (ui5ElementTarget.getFocusDomRef && ui5ElementTarget.getFocusDomRef() === this._opener) {\n            return true;\n        }\n        return e.composedPath().indexOf(this._opener) > -1;\n    }\n    /**\n     * Shows the popover.\n     * @param {HTMLElement} opener the element that the popover is shown at\n     * @param {boolean} [preventInitialFocus=false] prevents applying the focus inside the popover\n     * @public\n     * @async\n     * @method\n     * @name sap.ui.webc.main.Popover#showAt\n     * @async\n     * @returns {Promise} Resolved when the popover is open\n     */\n    async showAt(opener, preventInitialFocus = false) {\n        if (!opener || this.opened) {\n            return;\n        }\n        this._opener = opener;\n        this._openerRect = opener.getBoundingClientRect();\n        await super._open(preventInitialFocus);\n    }\n    /**\n     * Override for the _addOpenedPopup hook, which would otherwise just call addOpenedPopup(this)\n     * @private\n     */\n    _addOpenedPopup() {\n        addOpenedPopover(this);\n    }\n    /**\n     * Override for the _removeOpenedPopup hook, which would otherwise just call removeOpenedPopup(this)\n     * @private\n     */\n    _removeOpenedPopup() {\n        removeOpenedPopover(this);\n    }\n    shouldCloseDueToOverflow(placement, openerRect) {\n        const threshold = 32;\n        const limits = {\n            \"Right\": openerRect.right,\n            \"Left\": openerRect.left,\n            \"Top\": openerRect.top,\n            \"Bottom\": openerRect.bottom,\n        };\n        const closedPopupParent = getClosedPopupParent(this._opener);\n        let overflowsBottom = false;\n        let overflowsTop = false;\n        if (closedPopupParent.showAt) {\n            const contentRect = closedPopupParent.contentDOM.getBoundingClientRect();\n            overflowsBottom = openerRect.top > (contentRect.top + contentRect.height);\n            overflowsTop = (openerRect.top + openerRect.height) < contentRect.top;\n        }\n        return (limits[placement] < 0 || (limits[placement] + threshold > closedPopupParent.innerHeight)) || overflowsBottom || overflowsTop;\n    }\n    shouldCloseDueToNoOpener(openerRect) {\n        return openerRect.top === 0\n            && openerRect.bottom === 0\n            && openerRect.left === 0\n            && openerRect.right === 0;\n    }\n    isOpenerOutsideViewport(openerRect) {\n        return openerRect.bottom < 0\n            || openerRect.top > window.innerHeight\n            || openerRect.right < 0\n            || openerRect.left > window.innerWidth;\n    }\n    /**\n     * @override\n     */\n    _resize() {\n        super._resize();\n        if (this.opened) {\n            this.reposition();\n        }\n    }\n    reposition() {\n        this._show();\n    }\n    _show() {\n        let placement;\n        const popoverSize = this.getPopoverSize();\n        if (popoverSize.width === 0 || popoverSize.height === 0) {\n            // size can not be determined properly at this point, popover will be shown with the next reposition\n            return;\n        }\n        if (this.isOpen()) {\n            // update opener rect if it was changed during the popover being opened\n            this._openerRect = this._opener.getBoundingClientRect();\n        }\n        if (this.shouldCloseDueToNoOpener(this._openerRect) && this.isFocusWithin()) {\n            // reuse the old placement as the opener is not available,\n            // but keep the popover open as the focus is within\n            placement = this._oldPlacement;\n        }\n        else {\n            placement = this.calcPlacement(this._openerRect, popoverSize);\n        }\n        const stretching = this.horizontalAlign === PopoverHorizontalAlign.Stretch;\n        if (this._preventRepositionAndClose || this.isOpenerOutsideViewport(this._openerRect)) {\n            return this.close();\n        }\n        this._oldPlacement = placement;\n        this.actualPlacementType = placement.placementType;\n        let left = clamp(this._left, Popover_1.VIEWPORT_MARGIN, document.documentElement.clientWidth - popoverSize.width - Popover_1.VIEWPORT_MARGIN);\n        if (this.actualPlacementType === PopoverPlacementType.Right) {\n            left = Math.max(left, this._left);\n        }\n        let top = clamp(this._top, Popover_1.VIEWPORT_MARGIN, document.documentElement.clientHeight - popoverSize.height - Popover_1.VIEWPORT_MARGIN);\n        if (this.actualPlacementType === PopoverPlacementType.Bottom) {\n            top = Math.max(top, this._top);\n        }\n        this.arrowTranslateX = placement.arrow.x;\n        this.arrowTranslateY = placement.arrow.y;\n        top = this._adjustForIOSKeyboard(top);\n        Object.assign(this.style, {\n            top: `${top}px`,\n            left: `${left}px`,\n        });\n        super._show();\n        if (stretching && this._width) {\n            this.style.width = this._width;\n        }\n    }\n    /**\n     * Adjust the desired top position to compensate for shift of the screen\n     * caused by opened keyboard on iOS which affects all elements with position:fixed.\n     * @private\n     * @param {int} top The target top in px.\n     * @returns {int} The adjusted top in px.\n     */\n    _adjustForIOSKeyboard(top) {\n        if (!isIOS()) {\n            return top;\n        }\n        const actualTop = Math.ceil(this.getBoundingClientRect().top);\n        return top + (Number.parseInt(this.style.top || \"0\") - actualTop);\n    }\n    getPopoverSize() {\n        if (!this.opened) {\n            Object.assign(this.style, {\n                display: \"block\",\n                top: \"-10000px\",\n                left: \"-10000px\",\n            });\n        }\n        const rect = this.getBoundingClientRect(), width = rect.width, height = rect.height;\n        return { width, height };\n    }\n    get arrowDOM() {\n        return this.shadowRoot.querySelector(\".ui5-popover-arrow\");\n    }\n    /**\n     * @private\n     */\n    calcPlacement(targetRect, popoverSize) {\n        let left = 0;\n        let top = 0;\n        const allowTargetOverlap = this.allowTargetOverlap;\n        const clientWidth = document.documentElement.clientWidth;\n        const clientHeight = document.documentElement.clientHeight;\n        let maxHeight = clientHeight;\n        let maxWidth = clientWidth;\n        const placementType = this.getActualPlacementType(targetRect, popoverSize);\n        this._preventRepositionAndClose = this.shouldCloseDueToNoOpener(targetRect) || this.shouldCloseDueToOverflow(placementType, targetRect);\n        const isVertical = placementType === PopoverPlacementType.Top\n            || placementType === PopoverPlacementType.Bottom;\n        if (this.horizontalAlign === PopoverHorizontalAlign.Stretch && isVertical) {\n            popoverSize.width = targetRect.width;\n            this._width = `${targetRect.width}px`;\n        }\n        else if (this.verticalAlign === PopoverVerticalAlign.Stretch && !isVertical) {\n            popoverSize.height = targetRect.height;\n        }\n        const arrowOffset = this.hideArrow ? 0 : ARROW_SIZE;\n        // calc popover positions\n        switch (placementType) {\n            case PopoverPlacementType.Top:\n                left = this.getVerticalLeft(targetRect, popoverSize);\n                top = Math.max(targetRect.top - popoverSize.height - arrowOffset, 0);\n                if (!allowTargetOverlap) {\n                    maxHeight = targetRect.top - arrowOffset;\n                }\n                break;\n            case PopoverPlacementType.Bottom:\n                left = this.getVerticalLeft(targetRect, popoverSize);\n                top = targetRect.bottom + arrowOffset;\n                if (allowTargetOverlap) {\n                    top = Math.max(Math.min(top, clientHeight - popoverSize.height), 0);\n                }\n                else {\n                    maxHeight = clientHeight - targetRect.bottom - arrowOffset;\n                }\n                break;\n            case PopoverPlacementType.Left:\n                left = Math.max(targetRect.left - popoverSize.width - arrowOffset, 0);\n                top = this.getHorizontalTop(targetRect, popoverSize);\n                if (!allowTargetOverlap) {\n                    maxWidth = targetRect.left - arrowOffset;\n                }\n                break;\n            case PopoverPlacementType.Right:\n                left = targetRect.left + targetRect.width + arrowOffset;\n                top = this.getHorizontalTop(targetRect, popoverSize);\n                if (allowTargetOverlap) {\n                    left = Math.max(Math.min(left, clientWidth - popoverSize.width), 0);\n                }\n                else {\n                    maxWidth = clientWidth - targetRect.right - arrowOffset;\n                }\n                break;\n        }\n        // correct popover positions\n        if (isVertical) {\n            if (popoverSize.width > clientWidth || left < 0) {\n                left = 0;\n            }\n            else if (left + popoverSize.width > clientWidth) {\n                left -= left + popoverSize.width - clientWidth;\n            }\n        }\n        else {\n            if (popoverSize.height > clientHeight || top < 0) { // eslint-disable-line\n                top = 0;\n            }\n            else if (top + popoverSize.height > clientHeight) {\n                top -= top + popoverSize.height - clientHeight;\n            }\n        }\n        this._maxHeight = Math.round(maxHeight - Popover_1.VIEWPORT_MARGIN);\n        this._maxWidth = Math.round(maxWidth - Popover_1.VIEWPORT_MARGIN);\n        if (this._left === undefined || Math.abs(this._left - left) > 1.5) {\n            this._left = Math.round(left);\n        }\n        if (this._top === undefined || Math.abs(this._top - top) > 1.5) {\n            this._top = Math.round(top);\n        }\n        const borderRadius = Number.parseInt(window.getComputedStyle(this).getPropertyValue(\"border-radius\"));\n        const arrowPos = this.getArrowPosition(targetRect, popoverSize, left, top, isVertical, borderRadius);\n        return {\n            arrow: arrowPos,\n            top: this._top,\n            left: this._left,\n            placementType,\n        };\n    }\n    /**\n     * Calculates the position for the arrow.\n     * @private\n     * @param targetRect BoundingClientRect of the target element\n     * @param {{width: number, height: number}} popoverSize Width and height of the popover\n     * @param left Left offset of the popover\n     * @param top Top offset of the popover\n     * @param isVertical If the popover is positioned vertically to the target element\n     * @param {number} borderRadius Value of the border-radius property\n     * @returns {{x: number, y: number}} Arrow's coordinates\n     */\n    getArrowPosition(targetRect, popoverSize, left, top, isVertical, borderRadius) {\n        let arrowXCentered = this.horizontalAlign === PopoverHorizontalAlign.Center || this.horizontalAlign === PopoverHorizontalAlign.Stretch;\n        if (this.horizontalAlign === PopoverHorizontalAlign.Right && left <= targetRect.left) {\n            arrowXCentered = true;\n        }\n        if (this.horizontalAlign === PopoverHorizontalAlign.Left && left + popoverSize.width >= targetRect.left + targetRect.width) {\n            arrowXCentered = true;\n        }\n        let arrowTranslateX = 0;\n        if (isVertical && arrowXCentered) {\n            arrowTranslateX = targetRect.left + targetRect.width / 2 - left - popoverSize.width / 2;\n        }\n        let arrowTranslateY = 0;\n        if (!isVertical) {\n            arrowTranslateY = targetRect.top + targetRect.height / 2 - top - popoverSize.height / 2;\n        }\n        // Restricts the arrow's translate value along each dimension,\n        // so that the arrow does not clip over the popover's rounded borders.\n        const safeRangeForArrowY = popoverSize.height / 2 - borderRadius - ARROW_SIZE / 2;\n        arrowTranslateY = clamp(arrowTranslateY, -safeRangeForArrowY, safeRangeForArrowY);\n        const safeRangeForArrowX = popoverSize.width / 2 - borderRadius - ARROW_SIZE / 2;\n        arrowTranslateX = clamp(arrowTranslateX, -safeRangeForArrowX, safeRangeForArrowX);\n        return {\n            x: Math.round(arrowTranslateX),\n            y: Math.round(arrowTranslateY),\n        };\n    }\n    /**\n     * Fallbacks to new placement, prioritizing <code>Left</code> and <code>Right</code> placements.\n     * @private\n     */\n    fallbackPlacement(clientWidth, clientHeight, targetRect, popoverSize) {\n        if (targetRect.left > popoverSize.width) {\n            return PopoverPlacementType.Left;\n        }\n        if (clientWidth - targetRect.right > targetRect.left) {\n            return PopoverPlacementType.Right;\n        }\n        if (clientHeight - targetRect.bottom > popoverSize.height) {\n            return PopoverPlacementType.Bottom;\n        }\n        if (clientHeight - targetRect.bottom < targetRect.top) {\n            return PopoverPlacementType.Top;\n        }\n    }\n    getActualPlacementType(targetRect, popoverSize) {\n        const placementType = this.placementType;\n        let actualPlacementType = placementType;\n        const clientWidth = document.documentElement.clientWidth;\n        const clientHeight = document.documentElement.clientHeight;\n        switch (placementType) {\n            case PopoverPlacementType.Top:\n                if (targetRect.top < popoverSize.height\n                    && targetRect.top < clientHeight - targetRect.bottom) {\n                    actualPlacementType = PopoverPlacementType.Bottom;\n                }\n                break;\n            case PopoverPlacementType.Bottom:\n                if (clientHeight - targetRect.bottom < popoverSize.height\n                    && clientHeight - targetRect.bottom < targetRect.top) {\n                    actualPlacementType = PopoverPlacementType.Top;\n                }\n                break;\n            case PopoverPlacementType.Left:\n                if (targetRect.left < popoverSize.width) {\n                    actualPlacementType = this.fallbackPlacement(clientWidth, clientHeight, targetRect, popoverSize) || placementType;\n                }\n                break;\n            case PopoverPlacementType.Right:\n                if (clientWidth - targetRect.right < popoverSize.width) {\n                    actualPlacementType = this.fallbackPlacement(clientWidth, clientHeight, targetRect, popoverSize) || placementType;\n                }\n                break;\n        }\n        return actualPlacementType;\n    }\n    getVerticalLeft(targetRect, popoverSize) {\n        let left;\n        switch (this.horizontalAlign) {\n            case PopoverHorizontalAlign.Center:\n            case PopoverHorizontalAlign.Stretch:\n                left = targetRect.left - (popoverSize.width - targetRect.width) / 2;\n                break;\n            case PopoverHorizontalAlign.Left:\n                left = targetRect.left;\n                break;\n            case PopoverHorizontalAlign.Right:\n                left = targetRect.right - popoverSize.width;\n                break;\n        }\n        return left;\n    }\n    getHorizontalTop(targetRect, popoverSize) {\n        let top;\n        switch (this.verticalAlign) {\n            case PopoverVerticalAlign.Center:\n            case PopoverVerticalAlign.Stretch:\n                top = targetRect.top - (popoverSize.height - targetRect.height) / 2;\n                break;\n            case PopoverVerticalAlign.Top:\n                top = targetRect.top;\n                break;\n            case PopoverVerticalAlign.Bottom:\n                top = targetRect.bottom - popoverSize.height;\n                break;\n        }\n        return top;\n    }\n    get isModal() {\n        return this.modal;\n    }\n    get shouldHideBackdrop() {\n        return this.hideBackdrop;\n    }\n    get _ariaLabelledBy() {\n        if (!this._ariaLabel && this._displayHeader) {\n            return \"ui5-popup-header\";\n        }\n        return undefined;\n    }\n    get styles() {\n        return {\n            ...super.styles,\n            root: {\n                \"max-height\": this._maxHeight ? `${this._maxHeight}px` : \"\",\n                \"max-width\": this._maxWidth ? `${this._maxWidth}px` : \"\",\n            },\n            arrow: {\n                transform: `translate(${this.arrowTranslateX}px, ${this.arrowTranslateY}px)`,\n            },\n        };\n    }\n    get classes() {\n        const allClasses = super.classes;\n        allClasses.root[\"ui5-popover-root\"] = true;\n        return allClasses;\n    }\n    /**\n     * Hook for descendants to hide header.\n     */\n    get _displayHeader() {\n        return !!(this.header.length || this.headerText);\n    }\n    /**\n     * Hook for descendants to hide footer.\n     */\n    get _displayFooter() {\n        return true;\n    }\n};\n__decorate([\n    property()\n], Popover.prototype, \"headerText\", void 0);\n__decorate([\n    property({ type: PopoverPlacementType, defaultValue: PopoverPlacementType.Right })\n], Popover.prototype, \"placementType\", void 0);\n__decorate([\n    property({ type: PopoverHorizontalAlign, defaultValue: PopoverHorizontalAlign.Center })\n], Popover.prototype, \"horizontalAlign\", void 0);\n__decorate([\n    property({ type: PopoverVerticalAlign, defaultValue: PopoverVerticalAlign.Center })\n], Popover.prototype, \"verticalAlign\", void 0);\n__decorate([\n    property({ type: Boolean })\n], Popover.prototype, \"modal\", void 0);\n__decorate([\n    property({ type: Boolean })\n], Popover.prototype, \"hideBackdrop\", void 0);\n__decorate([\n    property({ type: Boolean })\n], Popover.prototype, \"hideArrow\", void 0);\n__decorate([\n    property({ type: Boolean })\n], Popover.prototype, \"allowTargetOverlap\", void 0);\n__decorate([\n    property({ validator: DOMReference })\n], Popover.prototype, \"opener\", void 0);\n__decorate([\n    property({ type: Boolean })\n], Popover.prototype, \"disableScrolling\", void 0);\n__decorate([\n    property({ validator: Integer, defaultValue: 0, noAttribute: true })\n], Popover.prototype, \"arrowTranslateX\", void 0);\n__decorate([\n    property({ validator: Integer, defaultValue: 0, noAttribute: true })\n], Popover.prototype, \"arrowTranslateY\", void 0);\n__decorate([\n    property({ type: PopoverPlacementType, defaultValue: PopoverPlacementType.Right })\n], Popover.prototype, \"actualPlacementType\", void 0);\n__decorate([\n    property({ validator: Integer, noAttribute: true })\n], Popover.prototype, \"_maxHeight\", void 0);\n__decorate([\n    property({ validator: Integer, noAttribute: true })\n], Popover.prototype, \"_maxWidth\", void 0);\n__decorate([\n    slot({ type: HTMLElement })\n], Popover.prototype, \"header\", void 0);\n__decorate([\n    slot({ type: HTMLElement })\n], Popover.prototype, \"footer\", void 0);\nPopover = Popover_1 = __decorate([\n    customElement({\n        tag: \"ui5-popover\",\n        styles: [\n            browserScrollbarCSS,\n            PopupsCommonCss,\n            PopoverCss,\n        ],\n        template: PopoverTemplate,\n    })\n], Popover);\nconst instanceOfPopover = (object) => {\n    return \"showAt\" in object;\n};\nPopover.define();\nexport default Popover;\nexport { instanceOfPopover };\n//# sourceMappingURL=Popover.js.map"],"names":["PopoverHorizontalAlign","PopoverHorizontalAlign$1","PopoverPlacementType","PopoverPlacementType$1","PopoverVerticalAlign","PopoverVerticalAlign$1","DOMReference","DataType","value","propertyValue","updateInterval","intervalTimeout","openedRegistry","repositionPopovers","popover","closePopoversIfLostFocus","getRegistry","popup","runUpdateInterval","stopUpdateInterval","attachGlobalScrollHandler","detachGlobalScrollHandler","attachScrollHandler","detachScrollHandler","attachGlobalClickHandler","clickHandler","detachGlobalClickHandler","event","openedPopups","getOpenedPopups","instanceOfPopover","isClickInRect","addOpenedPopover","instance","parentPopovers","getParentPopoversIfNested","addOpenedPopup","removeOpenedPopover","popoversToClose","i","indexOfCurrentInstance","j","indexOfItemToRemove","removeOpenedPopup","currentElement","block0","context","tags","suffix","html","styleMap","classMap","ifDefined","block1","block4","block2","block3","block5","registerThemePropertiesLoader","defaultThemeBase","defaultTheme","styleData","__decorate","this","decorators","target","key","desc","c","r","d","Popover_1","ARROW_SIZE","Popover","Popup","opener","e","ui5ElementTarget","preventInitialFocus","placement","openerRect","limits","closedPopupParent","getClosedPopupParent","overflowsBottom","overflowsTop","contentRect","popoverSize","stretching","left","clamp","top","isIOS","actualTop","rect","width","height","targetRect","allowTargetOverlap","clientWidth","clientHeight","maxHeight","maxWidth","placementType","isVertical","arrowOffset","borderRadius","arrowXCentered","arrowTranslateX","arrowTranslateY","safeRangeForArrowY","safeRangeForArrowX","actualPlacementType","allClasses","property","Integer","slot","customElement","browserScrollbarCSS","PopupsCommonCss","PopoverCss","PopoverTemplate","object","Popover$1"],"mappings":"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"}