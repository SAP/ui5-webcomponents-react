import{l as H,e as et,n as st,o as nt,p as at,q as rt,t as it,u as ot,v as lt,w as ct,x as dt,f as ht}from"./Boot-Cnne3s27.js";import{g as z,s as N,b as ut}from"./CustomElementsScopeUtils-B75AoQkl.js";import{E as D,g as ft}from"./EventProvider-B3ZIXKWe.js";import{g as B,b as pt,a as gt}from"./ManagedStyles-CGOl3myG.js";const W=()=>B("CustomStyle.eventProvider",new D),q="CustomCSSChange",L=s=>{W().attachEvent(q,s)},mt=s=>W().fireEvent(q,s),G=()=>B("CustomStyle.customCSSFor",{});let P;L(s=>{P||H({tag:s})});const qt=(s,t)=>{const e=G();e[s]||(e[s]=[]),e[s].push(t),P=!0;try{mt(s)}finally{P=!1}return H({tag:s})},yt=s=>{const t=G();return t[s]?t[s].join(""):""},w=new Map,A=new Map,j=s=>{if(!w.has(s)){const t=St(s.split("-"));w.set(s,t)}return w.get(s)},K=s=>{if(!A.has(s)){const t=s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();A.set(s,t)}return A.get(s)},St=s=>s.map((t,e)=>e===0?t.toLowerCase():t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(""),_t=s=>{if(!(s instanceof HTMLElement))return"default";const t=s.getAttribute("slot");if(t){const e=t.match(/^(.+?)-\d+$/);return e?e[1]:t}return"default"},X=s=>s instanceof HTMLSlotElement?s.assignedNodes({flatten:!0}).filter(t=>t instanceof HTMLElement):[s],Ct=s=>s.reduce((t,e)=>t.concat(X(e)),[]);class vt{constructor(t){this.metadata=t}getInitialState(){if(Object.prototype.hasOwnProperty.call(this,"_initialState"))return this._initialState;const t={},e=this.slotsAreManaged(),a=this.getProperties();for(const n in a){const r=a[n].type,i=a[n].defaultValue;r===Boolean?(t[n]=!1,i!==void 0&&console.warn("The 'defaultValue' metadata key is ignored for all booleans properties, they would be initialized with 'false' by default")):a[n].multiple?Object.defineProperty(t,n,{enumerable:!0,get(){return[]}}):r===Object?Object.defineProperty(t,n,{enumerable:!0,get(){return"defaultValue"in a[n]?a[n].defaultValue:{}}}):r===String?t[n]="defaultValue"in a[n]?a[n].defaultValue:"":t[n]=i}if(e){const n=this.getSlots();for(const[r,i]of Object.entries(n)){const o=i.propertyName||r;t[o]=[]}}return this._initialState=t,t}static validatePropertyValue(t,e){return e.multiple&&t?t.map(n=>F(n,e)):F(t,e)}static validateSlotValue(t,e){return bt(t,e)}getPureTag(){return this.metadata.tag||""}getTag(){const t=this.metadata.tag;if(!t)return"";const e=z(t);return e?`${t}-${e}`:t}hasAttribute(t){const e=this.getProperties()[t];return e.type!==Object&&!e.noAttribute&&!e.multiple}getPropertiesList(){return Object.keys(this.getProperties())}getAttributesList(){return this.getPropertiesList().filter(this.hasAttribute.bind(this)).map(K)}canSlotText(){var t;return((t=this.getSlots().default)==null?void 0:t.type)===Node}hasSlots(){return!!Object.entries(this.getSlots()).length}hasIndividualSlots(){return this.slotsAreManaged()&&Object.values(this.getSlots()).some(t=>t.individualSlots)}slotsAreManaged(){return!!this.metadata.managedSlots}supportsF6FastNavigation(){return!!this.metadata.fastNavigation}getProperties(){return this.metadata.properties||(this.metadata.properties={}),this.metadata.properties}getEvents(){return this.metadata.events||(this.metadata.events={}),this.metadata.events}getSlots(){return this.metadata.slots||(this.metadata.slots={}),this.metadata.slots}isLanguageAware(){return!!this.metadata.languageAware}isThemeAware(){return!!this.metadata.themeAware}shouldInvalidateOnChildChange(t,e,a){const n=this.getSlots()[t].invalidateOnChildChange;if(n===void 0)return!1;if(typeof n=="boolean")return n;if(typeof n=="object"){if(e==="property"){if(n.properties===void 0)return!1;if(typeof n.properties=="boolean")return n.properties;if(Array.isArray(n.properties))return n.properties.includes(a);throw new Error("Wrong format for invalidateOnChildChange.properties: boolean or array is expected")}if(e==="slot"){if(n.slots===void 0)return!1;if(typeof n.slots=="boolean")return n.slots;if(Array.isArray(n.slots))return n.slots.includes(a);throw new Error("Wrong format for invalidateOnChildChange.slots: boolean or array is expected")}}throw new Error("Wrong format for invalidateOnChildChange: boolean or object is expected")}}const F=(s,t)=>{const e=t.type;let a=t.validator;return e&&e.isDataTypeClass&&(a=e),a?a.isValid(s)?s:t.defaultValue:!e||e===String?typeof s=="string"||typeof s>"u"||s===null?s:s.toString():e===Boolean?typeof s=="boolean"?s:!1:e===Object?typeof s=="object"?s:t.defaultValue:s in e?s:t.defaultValue},bt=(s,t)=>(s&&X(s).forEach(e=>{if(!(e instanceof t.type))throw new Error(`The element is not of type ${t.type.toString()}`)}),s);class Et extends HTMLElement{}customElements.get("ui5-static-area")||customElements.define("ui5-static-area",Et);const wt=10,M=s=>Array.isArray(s)?s.filter(t=>!!t).flat(wt).map(t=>typeof t=="string"?t:t.content).join(" "):typeof s=="string"?s:s.content,v=new Map;L(s=>{v.delete(`${s}_normal`)});const Y=(s,t=!1)=>{const e=s.getMetadata().getTag(),a=`${e}_${t?"static":"normal"}`,n=ft("OpenUI5Enablement");if(!v.has(a)){let r,i="";if(n&&(i=M(n.getBusyIndicatorStyles())),t)r=M(s.staticAreaStyles);else{const o=yt(e)||"";r=`${M(s.styles)} ${o}`}r=`${r} ${i}`,v.set(a,r)}return v.get(a)},b=new Map;L(s=>{b.delete(`${s}_normal`)});const At=(s,t=!1)=>{const a=`${s.getMetadata().getTag()}_${t?"static":"normal"}`;if(!b.has(a)){const n=Y(s,t),r=new CSSStyleSheet;r.replaceSync(n),b.set(a,[r])}return b.get(a)},R=(s,t=!1)=>{let e;const a=s.constructor,n=t?s.staticAreaItem.shadowRoot:s.shadowRoot;let r;if(t?r=s.renderStatic():r=s.render(),!n){console.warn("There is no shadow root to update");return}if(document.adoptedStyleSheets&&!pt()?n.adoptedStyleSheets=At(a,t):e=Y(a,t),a.renderer){a.renderer(r,n,e,t,{host:s});return}a.render(r,n,e,t,{host:s})},Mt="--_ui5_content_density",Ot=s=>getComputedStyle(s).getPropertyValue(Mt),Z=s=>s.matches(":dir(rtl)")?"rtl":"ltr",C="ui5-static-area-item",Tt="data-sap-ui-integration-popup-content";class S extends HTMLElement{constructor(){super(),this._rendered=!1,this.attachShadow({mode:"open"})}setOwnerElement(t){this.ownerElement=t,this.classList.add(this.ownerElement._id),this.ownerElement.hasAttribute("data-ui5-static-stable")&&this.setAttribute("data-ui5-stable",this.ownerElement.getAttribute("data-ui5-static-stable"))}update(){this._rendered&&(this.updateAdditionalProperties(),R(this.ownerElement,!0))}updateAdditionalProperties(){this._updateAdditionalAttrs(),this._updateContentDensity(),this._updateDirection()}_updateContentDensity(){Ot(this.ownerElement)==="compact"?(this.classList.add("sapUiSizeCompact"),this.classList.add("ui5-content-density-compact")):(this.classList.remove("sapUiSizeCompact"),this.classList.remove("ui5-content-density-compact"))}_updateDirection(){if(this.ownerElement){const t=Z(this.ownerElement);t==="rtl"?this.setAttribute("dir",t):this.removeAttribute("dir")}}_updateAdditionalAttrs(){this.setAttribute(C,""),this.setAttribute(Tt,"")}async getDomRef(){return this.updateAdditionalProperties(),this._rendered||(this._rendered=!0,R(this.ownerElement,!0)),await et(),this.shadowRoot}static getTag(){const t=z(C);return t?`${C}-${t}`:C}static createInstance(){return customElements.get(S.getTag())||customElements.define(S.getTag(),S),document.createElement(this.getTag())}}const Dt=[],Pt=s=>Dt.some(t=>s.startsWith(t)),I=new WeakMap,Rt=(s,t,e)=>{const a=new MutationObserver(t);I.set(s,a),a.observe(s,e)},It=s=>{const t=I.get(s);t&&(t.disconnect(),I.delete(s))},Lt=["value-changed","click"];let O;const Nt=s=>Lt.includes(s),jt=s=>{const t=J();return!(typeof t!="boolean"&&t.events&&t.events.includes&&t.events.includes(s))},J=()=>(O===void 0&&(O=st()),O),Ft=s=>{const t=J();return Nt(s)?!1:t===!0?!0:!jt(s)},$t=["disabled","title","hidden","role","draggable"],$=s=>$t.includes(s)||s.startsWith("aria")?!0:![HTMLElement,Element,Node].some(e=>e.prototype.hasOwnProperty(s)),V=(s,t)=>{if(s.length!==t.length)return!1;for(let e=0;e<s.length;e++)if(s[e]!==t[e])return!1;return!0},x=(s,t)=>{const e=Vt(t),a=ut();return s.call(t,t,e,a)},Vt=s=>{const t=s.constructor,e=t.getMetadata().getPureTag(),a=t.getUniqueDependencies().map(n=>n.getMetadata().getPureTag()).filter(N);return N(e)&&a.push(e),a};let xt=0;const k=new Map,T=new Map;function y(s){this._suppressInvalidation||(this.onInvalidation(s),this._changedState.push(s),ht(this),this._invalidationEventProvider.fireEvent("invalidate",{...s,target:this}))}class E extends HTMLElement{constructor(){super();const t=this.constructor;this._changedState=[],this._suppressInvalidation=!0,this._inDOM=!1,this._fullyConnected=!1,this._childChangeListeners=new Map,this._slotChangeListeners=new Map,this._invalidationEventProvider=new D,this._componentStateFinalizedEventProvider=new D;let e;this._domRefReadyPromise=new Promise(a=>{e=a}),this._domRefReadyPromise._deferredResolve=e,this._doNotSyncAttributes=new Set,this._state={...t.getMetadata().getInitialState()},this._upgradeAllProperties(),t._needsShadowDOM()&&this.attachShadow({mode:"open"})}get _id(){return this.__id||(this.__id=`ui5wc_${++xt}`),this.__id}render(){const t=this.constructor.template;return x(t,this)}renderStatic(){const t=this.constructor.staticAreaTemplate;return x(t,this)}async connectedCallback(){const t=this.constructor;this.setAttribute(t.getMetadata().getPureTag(),""),t.getMetadata().supportsF6FastNavigation()&&this.setAttribute("data-sap-ui-fastnavgroup","true");const e=t.getMetadata().slotsAreManaged();this._inDOM=!0,e&&(this._startObservingDOMChildren(),await this._processChildren()),this._inDOM&&(nt(this),this._domRefReadyPromise._deferredResolve(),this._fullyConnected=!0,this.onEnterDOM())}disconnectedCallback(){const e=this.constructor.getMetadata().slotsAreManaged();this._inDOM=!1,e&&this._stopObservingDOMChildren(),this._fullyConnected&&(this.onExitDOM(),this._fullyConnected=!1),this.staticAreaItem&&this.staticAreaItem.parentElement&&this.staticAreaItem.parentElement.removeChild(this.staticAreaItem),at(this)}onBeforeRendering(){}onAfterRendering(){}onEnterDOM(){}onExitDOM(){}_startObservingDOMChildren(){const e=this.constructor.getMetadata();if(!e.hasSlots())return;const n=e.canSlotText(),r=Object.keys(e.getSlots()).some(o=>e.getSlots()[o].cloned),i={childList:!0,subtree:n||r,characterData:n};Rt(this,this._processChildren.bind(this),i)}_stopObservingDOMChildren(){It(this)}async _processChildren(){this.constructor.getMetadata().hasSlots()&&await this._updateSlots()}async _updateSlots(){const t=this.constructor,e=t.getMetadata().getSlots(),a=t.getMetadata().canSlotText(),n=Array.from(a?this.childNodes:this.children),r=new Map,i=new Map;for(const[h,g]of Object.entries(e)){const l=g.propertyName||h;i.set(l,h),r.set(l,[...this._state[l]]),this._clearSlot(h,g)}const o=new Map,c=new Map,d=n.map(async(h,g)=>{const l=_t(h),p=e[l];if(p===void 0){if(l!=="default"){const f=Object.keys(e).join(", ");console.warn(`Unknown slotName: ${l}, ignoring`,h,`Valid values are: ${f}`)}return}if(p.individualSlots){const f=(o.get(l)||0)+1;o.set(l,f),h._individualSlot=`${l}-${f}`}if(h instanceof HTMLElement){const f=h.localName;if(f.includes("-")&&!Pt(f)){if(!customElements.get(f)){const Q=customElements.whenDefined(f);let _=k.get(f);_||(_=new Promise(tt=>setTimeout(tt,1e3)),k.set(f,_)),await Promise.race([Q,_])}customElements.upgrade(h)}}if(h=t.getMetadata().constructor.validateSlotValue(h,p),U(h)&&p.invalidateOnChildChange){const f=this._getChildChangeListener(l);f&&h.attachInvalidate.call(h,f)}h instanceof HTMLSlotElement&&this._attachSlotChange(h,l);const m=p.propertyName||l;c.has(m)?c.get(m).push({child:h,idx:g}):c.set(m,[{child:h,idx:g}])});await Promise.all(d),c.forEach((h,g)=>{this._state[g]=h.sort((l,p)=>l.idx-p.idx).map(l=>l.child)});let u=!1;for(const[h,g]of Object.entries(e)){const l=g.propertyName||h;V(r.get(l),this._state[l])||(y.call(this,{type:"slot",name:i.get(l),reason:"children"}),u=!0)}u||y.call(this,{type:"slot",name:"default",reason:"textcontent"})}_clearSlot(t,e){const a=e.propertyName||t;this._state[a].forEach(r=>{if(U(r)){const i=this._getChildChangeListener(t);i&&r.detachInvalidate.call(r,i)}r instanceof HTMLSlotElement&&this._detachSlotChange(r,t)}),this._state[a]=[]}attachInvalidate(t){this._invalidationEventProvider.attachEvent("invalidate",t)}detachInvalidate(t){this._invalidationEventProvider.detachEvent("invalidate",t)}_onChildChange(t,e){this.constructor.getMetadata().shouldInvalidateOnChildChange(t,e.type,e.name)&&y.call(this,{type:"slot",name:t,reason:"childchange",child:e.target})}attributeChangedCallback(t,e,a){let n;if(this._doNotSyncAttributes.has(t))return;const r=this.constructor.getMetadata().getProperties(),i=t.replace(/^ui5-/,""),o=j(i);if(r.hasOwnProperty(o)){const c=r[o],d=c.type;let u=c.validator;d&&d.isDataTypeClass&&(u=d),u?n=u.attributeToProperty(a):d===Boolean?n=a!==null:n=a,this[o]=n}}_updateAttribute(t,e){const a=this.constructor;if(!a.getMetadata().hasAttribute(t))return;const r=a.getMetadata().getProperties()[t],i=r.type;let o=r.validator;const c=K(t),d=this.getAttribute(c);if(i&&i.isDataTypeClass&&(o=i),o){const u=o.propertyToAttribute(e);u===null?(this._doNotSyncAttributes.add(c),this.removeAttribute(c),this._doNotSyncAttributes.delete(c)):this.setAttribute(c,u)}else i===Boolean?e===!0&&d===null?this.setAttribute(c,""):e===!1&&d!==null&&this.removeAttribute(c):typeof e!="object"&&d!==e&&this.setAttribute(c,e)}_upgradeProperty(t){if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this[t]=e}}_upgradeAllProperties(){this.constructor.getMetadata().getPropertiesList().forEach(this._upgradeProperty.bind(this))}_getChildChangeListener(t){return this._childChangeListeners.has(t)||this._childChangeListeners.set(t,this._onChildChange.bind(this,t)),this._childChangeListeners.get(t)}_getSlotChangeListener(t){return this._slotChangeListeners.has(t)||this._slotChangeListeners.set(t,this._onSlotChange.bind(this,t)),this._slotChangeListeners.get(t)}_attachSlotChange(t,e){const a=this._getSlotChangeListener(e);a&&t.addEventListener("slotchange",a)}_detachSlotChange(t,e){t.removeEventListener("slotchange",this._getSlotChangeListener(e))}_onSlotChange(t){y.call(this,{type:"slot",name:t,reason:"slotchange"})}onInvalidation(t){}_render(){const t=this.constructor,e=t.getMetadata().hasIndividualSlots();this._suppressInvalidation=!0,this.onBeforeRendering(),this._componentStateFinalizedEventProvider.fireEvent("componentStateFinalized"),this._suppressInvalidation=!1,this._changedState=[],t._needsShadowDOM()&&R(this),this.staticAreaItem&&this.staticAreaItem.update(),e&&this._assignIndividualSlotsToChildren(),this.onAfterRendering()}_assignIndividualSlotsToChildren(){Array.from(this.children).forEach(e=>{e._individualSlot&&e.setAttribute("slot",e._individualSlot)})}_waitForDomRef(){return this._domRefReadyPromise}getDomRef(){if(typeof this._getRealDomRef=="function")return this._getRealDomRef();if(!this.shadowRoot||this.shadowRoot.children.length===0)return;const t=[...this.shadowRoot.children].filter(e=>!["link","style"].includes(e.localName));return t.length!==1&&console.warn(`The shadow DOM for ${this.constructor.getMetadata().getTag()} does not have a top level element, the getDomRef() method might not work as expected`),t[0]}getFocusDomRef(){const t=this.getDomRef();if(t)return t.querySelector("[data-sap-focus-ref]")||t}async getFocusDomRefAsync(){return await this._waitForDomRef(),this.getFocusDomRef()}async focus(t){await this._waitForDomRef();const e=this.getFocusDomRef();e&&typeof e.focus=="function"&&e.focus(t)}fireEvent(t,e,a=!1,n=!0){const r=this._fireEvent(t,e,a,n),i=j(t);return i!==t?r&&this._fireEvent(i,e,a,n):r}_fireEvent(t,e,a=!1,n=!0){const r=new CustomEvent(`ui5-${t}`,{detail:e,composed:!1,bubbles:n,cancelable:a}),i=this.dispatchEvent(r);if(Ft(t))return i;const o=new CustomEvent(t,{detail:e,composed:!1,bubbles:n,cancelable:a});return this.dispatchEvent(o)&&i}getSlottedNodes(t){return Ct(this[t])}attachComponentStateFinalized(t){this._componentStateFinalizedEventProvider.attachEvent("componentStateFinalized",t)}detachComponentStateFinalized(t){this._componentStateFinalizedEventProvider.detachEvent("componentStateFinalized",t)}get effectiveDir(){return rt(this.constructor),Z(this)}get isUI5Element(){return!0}get classes(){return{}}get accessibilityInfo(){return{}}static get observedAttributes(){return this.getMetadata().getAttributesList()}static _needsShadowDOM(){return!!this.template||Object.prototype.hasOwnProperty.call(this.prototype,"render")}static _needsStaticArea(){return!!this.staticAreaTemplate||Object.prototype.hasOwnProperty.call(this.prototype,"renderStatic")}getStaticAreaItemDomRef(){if(!this.constructor._needsStaticArea())throw new Error("This component does not use the static area");return this.staticAreaItem||(this.staticAreaItem=S.createInstance(),this.staticAreaItem.setOwnerElement(this)),this.staticAreaItem.parentElement||gt("ui5-static-area").appendChild(this.staticAreaItem),this.staticAreaItem.getDomRef()}static _generateAccessors(){const t=this.prototype,e=this.getMetadata().slotsAreManaged(),a=this.getMetadata().getProperties();for(const[n,r]of Object.entries(a)){if($(n)||console.warn(`"${n}" is not a valid property name. Use a name that does not collide with DOM APIs`),r.type===Boolean&&r.defaultValue)throw new Error(`Cannot set a default value for property "${n}". All booleans are false by default.`);if(r.type===Array)throw new Error(`Wrong type for property "${n}". Properties cannot be of type Array - use "multiple: true" and set "type" to the single value type, such as "String", "Object", etc...`);if(r.type===Object&&r.defaultValue)throw new Error(`Cannot set a default value for property "${n}". All properties of type "Object" are empty objects by default.`);if(r.multiple&&r.defaultValue)throw new Error(`Cannot set a default value for property "${n}". All multiple properties are empty arrays by default.`);const i=Object.getOwnPropertyDescriptor(t,n);let o;i!=null&&i.set&&(o=i.set);let c;i!=null&&i.get&&(c=i.get),Object.defineProperty(t,n,{get(){if(c)return c.call(this);if(this._state[n]!==void 0)return this._state[n];const d=r.defaultValue;return r.type===Boolean?!1:r.type===String?d:r.multiple?[]:d},set(d){let u;d=this.constructor.getMetadata().constructor.validatePropertyValue(d,r);const l=r.type;let p=r.validator;const m=c?c.call(this):this._state[n];l&&l.isDataTypeClass&&(p=l),p?u=!p.valuesAreEqual(m,d):Array.isArray(m)&&Array.isArray(d)&&r.multiple&&r.compareValues?u=!V(m,d):u=m!==d,u&&(o?o.call(this,d):this._state[n]=d,y.call(this,{type:"property",name:n,newValue:d,oldValue:m}),this._updateAttribute(n,d))}})}if(e){const n=this.getMetadata().getSlots();for(const[r,i]of Object.entries(n)){$(r)||console.warn(`"${r}" is not a valid property name. Use a name that does not collide with DOM APIs`);const o=i.propertyName||r;Object.defineProperty(t,o,{get(){return this._state[o]!==void 0?this._state[o]:[]},set(){throw new Error("Cannot set slot content directly, use the DOM APIs (appendChild, removeChild, etc...)")}})}}}static get staticAreaStyles(){return""}static get dependencies(){return[]}static getUniqueDependencies(){if(!T.has(this)){const t=this.dependencies.filter((e,a,n)=>n.indexOf(e)===a);T.set(this,t)}return T.get(this)||[]}static whenDependenciesDefined(){return Promise.all(this.getUniqueDependencies().map(t=>t.define()))}static async onDefine(){return Promise.resolve()}static async define(){await it(),await Promise.all([this.whenDependenciesDefined(),this.onDefine()]);const t=this.getMetadata().getTag(),e=ot(t),a=customElements.get(t);return a&&!e?lt(t):a||(this._generateAccessors(),ct(t),customElements.define(t,this)),this}static getMetadata(){if(this.hasOwnProperty("_metadata"))return this._metadata;const t=[this.metadata];let e=this;for(;e!==E;)e=Object.getPrototypeOf(e),t.unshift(e.metadata);const a=dt({},...t);return this._metadata=new vt(a),this._metadata}}E.metadata={};E.styles="";const U=s=>"isUI5Element"in s;export{E as U,qt as a,V as b,x as e,U as i};
