{"version":3,"file":"debounce-5c77766a.js","sources":["../../packages/base/src/utils/debounce.ts"],"sourcesContent":["// Copied from https://github.com/jashkenas/underscore/blob/master/modules/debounce.js (31th May 2021)\n\nconst now = Date.now || (() => new Date().getTime());\n\ninterface Cancelable {\n  cancel(): void;\n}\n\n/**\n * When a sequence of calls of the returned function ends, the argument\n * function is triggered. The end of a sequence is defined by the `wait`\n * parameter.\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nconst debounce = <T extends Function>(func: T, wait: number): T & Cancelable => {\n  let timeout;\n  let previous;\n  let args;\n  let result;\n  let context;\n\n  const later = () => {\n    const passed = now() - previous;\n    if (wait > passed) {\n      timeout = setTimeout(later, wait - passed);\n    } else {\n      timeout = null;\n      result = func.apply(context, args);\n      // This check is needed because `func` can recursively invoke `debounced`.\n      if (!timeout) args = context = null;\n    }\n  };\n\n  const debounced = function (..._args: unknown[]) {\n    // @ts-expect-error: copied - no need to infer types here\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    context = this;\n    args = _args;\n    previous = now();\n    if (!timeout) {\n      timeout = setTimeout(later, wait);\n    }\n    return result;\n  };\n\n  debounced.cancel = () => {\n    clearTimeout(timeout);\n    timeout = args = context = null;\n  };\n\n  // @ts-expect-error: copied - no need to infer types here\n  return debounced;\n};\n\nexport { debounce };\n"],"names":["now","debounce","func","wait","timeout","previous","args","result","context","later","passed","debounced","_args"],"mappings":"AAEA,MAAMA,EAAM,KAAK,MAAQ,IAAU,IAAA,OAAO,QAAQ,GAY5CC,EAAW,CAAqBC,EAASC,IAAiC,CAC1E,IAAAC,EACAC,EACAC,EACAC,EACAC,EAEJ,MAAMC,EAAQ,IAAM,CACZ,MAAAC,EAASV,EAAQ,EAAAK,EACnBF,EAAOO,EACCN,EAAA,WAAWK,EAAON,EAAOO,CAAM,GAE/BN,EAAA,KACDG,EAAAL,EAAK,MAAMM,EAASF,CAAI,EAE5BF,IAASE,EAAOE,EAAU,MACjC,EAGIG,EAAY,YAAaC,EAAkB,CAGrC,OAAAJ,EAAA,KACHF,EAAAM,EACPP,EAAWL,EAAI,EACVI,IACOA,EAAA,WAAWK,EAAON,CAAI,GAE3BI,CAAA,EAGT,OAAAI,EAAU,OAAS,IAAM,CACvB,aAAaP,CAAO,EACpBA,EAAUE,EAAOE,EAAU,IAAA,EAItBG,CACT"}