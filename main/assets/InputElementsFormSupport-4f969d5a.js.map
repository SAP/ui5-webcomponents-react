{"version":3,"file":"InputElementsFormSupport-4f969d5a.js","sources":["../../node_modules/@ui5/webcomponents/dist/features/InputElementsFormSupport.js"],"sourcesContent":["import { registerFeature } from \"@ui5/webcomponents-base/dist/FeaturesRegistry.js\";\nconst findNearestFormElement = (element) => {\n    let currentElement = element.parentElement;\n    while (currentElement && currentElement.tagName.toLowerCase() !== \"form\") {\n        currentElement = currentElement.parentElement;\n    }\n    if (currentElement instanceof HTMLFormElement) {\n        return currentElement;\n    }\n};\nclass FormSupport {\n    /**\n     * Syncs the native input element, rendered into the component's light DOM,\n     * with the component's state.\n     * @param { IFormElement} element - the component with form support\n     * @param { NativeInputUpdateCallback } nativeInputUpdateCallback - callback to calculate the native input's \"disabled\" and \"value\" properties\n     */\n    static syncNativeHiddenInput(element, nativeInputUpdateCallback) {\n        const needsNativeInput = !!element.name || element.required;\n        let nativeInput = element.querySelector(\"input[data-ui5-form-support]\");\n        if (needsNativeInput && !nativeInput) {\n            nativeInput = document.createElement(\"input\");\n            nativeInput.style.clip = \"rect(0 0 0 0)\";\n            nativeInput.style.clipPath = \"inset(50%)\";\n            nativeInput.style.height = \"1px\";\n            nativeInput.style.overflow = \"hidden\";\n            nativeInput.style.position = \"absolute\";\n            nativeInput.style.whiteSpace = \"nowrap\";\n            nativeInput.style.width = \"1px\";\n            nativeInput.style.bottom = \"0\";\n            nativeInput.setAttribute(\"tabindex\", \"-1\");\n            nativeInput.required = element.required;\n            nativeInput.setAttribute(\"data-ui5-form-support\", \"\");\n            nativeInput.setAttribute(\"aria-hidden\", \"true\");\n            nativeInput.addEventListener(\"focusin\", () => element.getFocusDomRef()?.focus());\n            nativeInput.slot = \"formSupport\"; // Needed for IE - otherwise input elements are not part of the real DOM tree and are not detected by forms\n            element.appendChild(nativeInput);\n        }\n        if (!needsNativeInput && nativeInput) {\n            element.removeChild(nativeInput);\n        }\n        if (needsNativeInput) {\n            nativeInput.name = element.name;\n            (nativeInputUpdateCallback || copyDefaultProperties)(element, nativeInput);\n        }\n    }\n    /**\n     * Syncs the native file input element, rendered into the <code>ui5-file-uploader</code> component's light DOM,\n     * with the <code>ui5-file-uploader</code> component's state.\n     * @param { IFormFileElement} element - the component with form support\n     * @param { NativeInputUpdateCallback } nativeInputUpdateCallback - callback to calculate the native input's \"disabled\" and \"value\" properties\n     * @param { NativeInputChangeCallback } nativeInputChangeCallback - callback, added to native input's \"change\" event\n     */\n    static syncNativeFileInput(element, nativeInputUpdateCallback, nativeInputChangeCallback) {\n        const needsNativeInput = !!element.name;\n        let nativeInput = element.querySelector(`input[type=\"file\"][data-ui5-form-support]`);\n        if (needsNativeInput && !nativeInput) {\n            nativeInput = document.createElement(\"input\");\n            nativeInput.type = \"file\";\n            nativeInput.setAttribute(\"data-ui5-form-support\", \"\");\n            nativeInput.slot = \"formSupport\"; // Needed to visualize the input in the light dom\n            nativeInput.style.position = \"absolute\";\n            nativeInput.style.top = \"0\";\n            nativeInput.style.left = \"0\";\n            nativeInput.style.width = \"100%\";\n            nativeInput.style.height = \"100%\";\n            nativeInput.style.opacity = \"0\";\n            if (element.multiple) {\n                nativeInput.multiple = true;\n            }\n            nativeInput.addEventListener(\"change\", nativeInputChangeCallback);\n            element.appendChild(nativeInput);\n        }\n        if (!needsNativeInput && nativeInput) {\n            element.removeChild(nativeInput);\n        }\n        if (needsNativeInput) {\n            nativeInput.name = element.name;\n            (nativeInputUpdateCallback || copyDefaultProperties)(element, nativeInput);\n        }\n    }\n    static triggerFormSubmit(element) {\n        const formElement = findNearestFormElement(element);\n        if (formElement) {\n            if (!formElement.checkValidity()) {\n                formElement.reportValidity();\n                return;\n            }\n            // eslint-disable-next-line no-undef\n            const submitPrevented = !formElement.dispatchEvent(new SubmitEvent(\"submit\", {\n                bubbles: true,\n                cancelable: true,\n                submitter: element,\n            }));\n            if (submitPrevented) {\n                return;\n            }\n            formElement.submit();\n        }\n    }\n    static triggerFormReset(element) {\n        const formElement = findNearestFormElement(element);\n        if (formElement) {\n            formElement.reset();\n        }\n    }\n}\nconst copyDefaultProperties = (element, nativeInput) => {\n    nativeInput.disabled = element.disabled;\n    nativeInput.value = element.value; // We do not explicitly convert to string to retain the current browser behavior\n};\n// Add form support to the global features registry so that Web Components can find and use it\nregisterFeature(\"FormSupport\", FormSupport);\nexport default FormSupport;\n//# sourceMappingURL=InputElementsFormSupport.js.map"],"names":["findNearestFormElement","element","currentElement","FormSupport","nativeInputUpdateCallback","needsNativeInput","nativeInput","_a","copyDefaultProperties","nativeInputChangeCallback","formElement","registerFeature"],"mappings":"2DACA,MAAMA,EAA0BC,GAAY,CACxC,IAAIC,EAAiBD,EAAQ,cAC7B,KAAOC,GAAkBA,EAAe,QAAQ,YAAW,IAAO,QAC9DA,EAAiBA,EAAe,cAEpC,GAAIA,aAA0B,gBAC1B,OAAOA,CAEf,EACA,MAAMC,CAAY,CAOd,OAAO,sBAAsBF,EAASG,EAA2B,CAC7D,MAAMC,EAAmB,CAAC,CAACJ,EAAQ,MAAQA,EAAQ,SACnD,IAAIK,EAAcL,EAAQ,cAAc,8BAA8B,EAClEI,GAAoB,CAACC,IACrBA,EAAc,SAAS,cAAc,OAAO,EAC5CA,EAAY,MAAM,KAAO,gBACzBA,EAAY,MAAM,SAAW,aAC7BA,EAAY,MAAM,OAAS,MAC3BA,EAAY,MAAM,SAAW,SAC7BA,EAAY,MAAM,SAAW,WAC7BA,EAAY,MAAM,WAAa,SAC/BA,EAAY,MAAM,MAAQ,MAC1BA,EAAY,MAAM,OAAS,IAC3BA,EAAY,aAAa,WAAY,IAAI,EACzCA,EAAY,SAAWL,EAAQ,SAC/BK,EAAY,aAAa,wBAAyB,EAAE,EACpDA,EAAY,aAAa,cAAe,MAAM,EAC9CA,EAAY,iBAAiB,UAAW,IAAA,OAAM,OAAAC,EAAAN,EAAQ,eAAgB,IAAxB,YAAAM,EAA0B,QAAO,EAC/ED,EAAY,KAAO,cACnBL,EAAQ,YAAYK,CAAW,GAE/B,CAACD,GAAoBC,GACrBL,EAAQ,YAAYK,CAAW,EAE/BD,IACAC,EAAY,KAAOL,EAAQ,MAC1BG,GAA6BI,GAAuBP,EAASK,CAAW,EAEhF,CAQD,OAAO,oBAAoBL,EAASG,EAA2BK,EAA2B,CACtF,MAAMJ,EAAmB,CAAC,CAACJ,EAAQ,KACnC,IAAIK,EAAcL,EAAQ,cAAc,2CAA2C,EAC/EI,GAAoB,CAACC,IACrBA,EAAc,SAAS,cAAc,OAAO,EAC5CA,EAAY,KAAO,OACnBA,EAAY,aAAa,wBAAyB,EAAE,EACpDA,EAAY,KAAO,cACnBA,EAAY,MAAM,SAAW,WAC7BA,EAAY,MAAM,IAAM,IACxBA,EAAY,MAAM,KAAO,IACzBA,EAAY,MAAM,MAAQ,OAC1BA,EAAY,MAAM,OAAS,OAC3BA,EAAY,MAAM,QAAU,IACxBL,EAAQ,WACRK,EAAY,SAAW,IAE3BA,EAAY,iBAAiB,SAAUG,CAAyB,EAChER,EAAQ,YAAYK,CAAW,GAE/B,CAACD,GAAoBC,GACrBL,EAAQ,YAAYK,CAAW,EAE/BD,IACAC,EAAY,KAAOL,EAAQ,MAC1BG,GAA6BI,GAAuBP,EAASK,CAAW,EAEhF,CACD,OAAO,kBAAkBL,EAAS,CAC9B,MAAMS,EAAcV,EAAuBC,CAAO,EAClD,GAAIS,EAAa,CACb,GAAI,CAACA,EAAY,gBAAiB,CAC9BA,EAAY,eAAc,EAC1B,MACH,CAOD,GALwB,CAACA,EAAY,cAAc,IAAI,YAAY,SAAU,CACzE,QAAS,GACT,WAAY,GACZ,UAAWT,CACd,CAAA,CAAC,EAEE,OAEJS,EAAY,OAAM,CACrB,CACJ,CACD,OAAO,iBAAiBT,EAAS,CAC7B,MAAMS,EAAcV,EAAuBC,CAAO,EAC9CS,GACAA,EAAY,MAAK,CAExB,CACL,CACA,MAAMF,EAAwB,CAACP,EAASK,IAAgB,CACpDA,EAAY,SAAWL,EAAQ,SAC/BK,EAAY,MAAQL,EAAQ,KAChC,EAEAU,EAAgB,cAAeR,CAAW","x_google_ignoreList":[0]}