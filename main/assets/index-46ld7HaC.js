import{j as I}from"./jsx-runtime-DtaoT6pD.js";import{T as U}from"./ThemingParameters-UghqSl-x.js";import{c as C}from"./clsx-Zbgk8kpT.js";import{r as n}from"./index-OjgoNOWw.js";import{c as ie}from"./react-jss.esm-tmBtHfec.js";import{u as ce,b as de,s as ue,c as he}from"./index-YQZo7A-f.js";import{F as me}from"./index-ndaVN1fR.js";import{u as V}from"./withWebComponent-22JjwLkL.js";import{G as pe}from"./GlobalStyleClasses-kWTEndz_.js";import{P as fe}from"./PageBackgroundDesign-CpulD27W.js";import{d as ge}from"./debounce-F9irgL9Y.js";const ye=ie(ue,{name:"DynamicPage"}),b=n.forwardRef((h,J)=>{var q,F,O,A,j,M;const{headerTitle:i,headerContent:r,style:X,backgroundDesign:z,showHideHeaderButton:B,headerContentPinnable:S,alwaysShowContentHeader:f,children:P,className:G,footer:H,a11yConfig:s,onToggleHeaderContent:T,onPinnedStateChange:Y,headerCollapsed:g,preserveHeaderStateOnScroll:d,...W}=h,{onScroll:Ee,...$}=W,x=n.useRef(null),[K,y]=V(J),_=n.useRef(null),[Q,a]=V(i==null?void 0:i.ref),[Z,m]=V(r==null?void 0:r.ref),N=n.useRef(0),[t,l]=n.useState(f?"VISIBLE_PINNED":"AUTO"),E=n.useRef(!1),[ee,te]=n.useState(!1),[ne,D]=n.useState(g),{topHeaderHeight:v,headerCollapsed:u}=ce(y,a,m,x,[ne,D],{noHeader:!1,fixedHeader:t==="VISIBLE_PINNED"||t==="HIDDEN_PINNED",scrollTimeout:N,preserveHeaderStateOnScroll:d});n.useEffect(()=>{d&&t==="AUTO"&&(y.current.scrollTop<=((a==null?void 0:a.current.offsetHeight)??0)+Math.max(0,m.current.offsetHeight??0-(a==null?void 0:a.current.offsetHeight)??0)?l("VISIBLE"):l("HIDDEN"))},[d,t]),n.useEffect(()=>{g!=null&&(D(g),w(void 0,g))},[g]);const c=ye(),ae=C(c.dynamicPage,pe.sapScrollBar,c[`background${z}`],G,["HIDDEN","HIDDEN_PINNED"].includes(t)&&c.headerCollapsed);n.useEffect(()=>{const e=ge(([p])=>{te(!p.isIntersecting)},250),o=new IntersectionObserver(e,{root:y.current,threshold:.98,rootMargin:"0px 0px -60px 0px"});return _.current&&o.observe(_.current),()=>{o.disconnect(),e.cancel()}},[]);const L=n.useRef(void 0);n.useEffect(()=>{const e=y.current,o=p=>{l("AUTO"),p.target.scrollTop>((a==null?void 0:a.current.offsetHeight)??0)+Math.max(0,m.current.offsetHeight??0-(a==null?void 0:a.current.offsetHeight)??0)&&D(!0)};if(!d&&(t==="VISIBLE"||t==="HIDDEN")){const p=N.current-performance.now();clearTimeout(L.current),p>0?L.current=setTimeout(()=>{e==null||e.addEventListener("scroll",o,{once:!0})},p+50):e==null||e.addEventListener("scroll",o,{once:!0})}return()=>{e==null||e.removeEventListener("scroll",o)}},[y,t,d]);const w=(e,o)=>{e==null||e.stopPropagation(),E.current||(E.current=!0),re(o??!u)},re=e=>{N.current=performance.now()+500,l(o=>o==="VISIBLE_PINNED"||o==="HIDDEN_PINNED"?e?"HIDDEN_PINNED":"VISIBLE_PINNED":e?"HIDDEN":"VISIBLE")};n.useEffect(()=>{t==="VISIBLE_PINNED"||t==="VISIBLE"?D(!1):(t==="HIDDEN_PINNED"||t==="HIDDEN")&&D(!0)},[t]);const oe=e=>{a.current&&(a.current.style.backgroundColor=(e==null?void 0:e.type)==="mouseover"?U.sapObjectHeader_Hover_Background:null)},se=e=>{l(e?"VISIBLE_PINNED":"VISIBLE")};n.useEffect(()=>{f!==void 0&&l(f?"VISIBLE_PINNED":"VISIBLE")},[f]);const le=e=>{d||(E.current||(E.current=!0),typeof(h==null?void 0:h.onScroll)=="function"&&h.onScroll(e),t==="HIDDEN_PINNED"&&e.target.scrollTop===0&&l("VISIBLE_PINNED"))},k={...X};u===!0&&r&&(N.current=performance.now()+200,k[he.titleFontSize]=U.sapObjectHeader_Title_SnappedFontSize),n.useEffect(()=>{typeof T=="function"&&E.current&&T(u!==!0)},[u]);const R=t==="VISIBLE_PINNED"||t==="VISIBLE"?(((q=m==null?void 0:m.current)==null?void 0:q.offsetHeight)??0)+v:v;return I.jsxs("div",{ref:K,className:ae,style:k,onScroll:le,...$,children:[i&&n.cloneElement(i,{"data-not-clickable":f&&!S||!r||!B&&!S,ref:Q,className:C(c.title,(F=i==null?void 0:i.props)==null?void 0:F.className),onToggleHeaderContentVisibility:w,"data-header-content-visible":r&&u!==!0}),r&&n.cloneElement(r,{ref:Z,style:u===!0?{...r.props.style,position:"relative",visibility:"hidden"}:r.props.style,className:C(c.header,(O=r==null?void 0:r.props)==null?void 0:O.className),headerPinned:d||t==="VISIBLE_PINNED"||t==="VISIBLE",topHeaderHeight:v}),I.jsx(me,{"data-component-name":"DynamicPageAnchorBarContainer",className:c.anchorBar,ref:x,style:{top:R},children:I.jsx(de,{headerContentPinnable:S,showHideHeaderButton:B,headerContentVisible:r&&u!==!0,headerPinned:t==="VISIBLE_PINNED"||t==="HIDDEN_PINNED",a11yConfig:s,onHoverToggleButton:oe,onToggleHeaderContentVisibility:w,onPinnedStateChange:Y,setHeaderPinned:se})}),I.jsx("div",{ref:_,"data-component-name":"DynamicPageContent",className:c.contentContainer,style:{paddingBlockEnd:H?"1rem":0},children:typeof P=="function"?P({stickyHeaderHeight:R+1}):P}),H&&I.jsx("div",{className:c.footer,style:{position:ee?"sticky":"absolute"},"data-component-name":"DynamicPageFooter",role:((A=s==null?void 0:s.dynamicPageFooter)==null?void 0:A.role)??"contentinfo","aria-label":(j=s==null?void 0:s.dynamicPageFooter)==null?void 0:j["aria-label"],"aria-labelledby":(M=s==null?void 0:s.dynamicPageFooter)==null?void 0:M["aria-labelledby"],children:H})]})});b.displayName="DynamicPage";b.defaultProps={backgroundDesign:fe.Solid,showHideHeaderButton:!0,headerContentPinnable:!0};try{b.displayName="DynamicPage",b.__docgenInfo={description:`The dynamic page is a generic layout control designed to support various floorplans and use cases.
The content of both the header and the page can differ from floorplan to floorplan.

The header of the dynamic page is collapsible, which helps users to focus on the actual page content, but still ensures that important header information
and actions are readily available.`,displayName:"DynamicPage",props:{backgroundDesign:{defaultValue:{value:"PageBackgroundDesign.Solid"},description:"Determines the background color of DynamicPage.",name:"backgroundDesign",required:!1,type:{name:"enum",value:[{value:'"List"'},{value:'"Solid"'},{value:'"Transparent"'},{value:'"List"'},{value:'"Solid"'},{value:'"Transparent"'}]}},alwaysShowContentHeader:{defaultValue:null,description:"Defines whether the `headerContent` can be hidden by scrolling down.",name:"alwaysShowContentHeader",required:!1,type:{name:"boolean"}},showHideHeaderButton:{defaultValue:{value:"true"},description:"Determines whether the expand/collapse `headerContent` button is shown.",name:"showHideHeaderButton",required:!1,type:{name:"boolean"}},headerContentPinnable:{defaultValue:{value:"true"},description:"Determines whether the pin button is shown.",name:"headerContentPinnable",required:!1,type:{name:"boolean"}},headerTitle:{defaultValue:null,description:"Defines the upper, always static, title section of the `DynamicPage`.\n\n__Note:__ Although this prop accepts all HTML Elements, it is strongly recommended that you only use `DynamicPageTitle` in order to preserve the intended design.",name:"headerTitle",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},headerContent:{defaultValue:null,description:"Defines the dynamic header section of the `DynamicPage`.\n\n__Note:__ Although this prop accepts all HTML Elements, it is strongly recommended that you only use `DynamicPageHeader` in order to preserve the intended design.",name:"headerContent",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},footer:{defaultValue:null,description:"React element which defines the footer content.\n\n__Note:__ To preserve the intended design, please use only non-content based `height` values (`px`, `rem`, `vh`, etc.) as height of the `DynamicPage`.\n__Note:__ Although this prop accepts all HTML Elements, it is strongly recommended that you only use `Bar` with `design={BarDesign.FloatingFooter}` in order to preserve the intended design.",name:"footer",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},children:{defaultValue:null,description:"React element or node array which defines the content.\n\n__Note:__ Assigning `children` as function is recommended when implementing sticky sub-headers. You can find out more about this [here](https://sap.github.io/ui5-webcomponents-react/?path=/story/layouts-floorplans-dynamicpage--sticky-sub-headers).",name:"children",required:!1,type:{name:"ReactNode | ReactNode[] | ((payload: { stickyHeaderHeight: number; }) => ReactElement<any, string | JSXElementConstructor<any>>)"}},headerCollapsed:{defaultValue:null,description:`Determines whether the header is expanded. You can use this to initialize the component with a collapsed header.

__Note:__ Changes through user interaction (scrolling, manually expanding/collapsing the header, etc.) are still applied.
@since 1.23.0`,name:"headerCollapsed",required:!1,type:{name:"boolean"}},preserveHeaderStateOnScroll:{defaultValue:null,description:`Preserves the current header state when scrolling. For example, if the user expands the header by clicking on the title and then scrolls down the page, the header will remain expanded.
@since 1.23.0`,name:"preserveHeaderStateOnScroll",required:!1,type:{name:"boolean"}},a11yConfig:{defaultValue:null,description:"Defines internally used a11y properties.",name:"a11yConfig",required:!1,type:{name:"{ dynamicPageAnchorBar?: { role?: string; }; dynamicPageFooter?: { role?: string; 'aria-label'?: string; 'aria-labelledby'?: string; }; }"}},onToggleHeaderContent:{defaultValue:null,description:"Fired when the `headerContent` is expanded or collapsed.",name:"onToggleHeaderContent",required:!1,type:{name:"(visible: boolean) => void"}},onPinnedStateChange:{defaultValue:null,description:"Fired when the `headerContent` changes its `pinned` state.",name:"onPinnedStateChange",required:!1,type:{name:"(pinned: boolean) => void"}},style:{defaultValue:null,description:`Element style which will be appended to the most outer element of a component.
Use this prop carefully, some css properties might break the component.`,name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:`CSS Class Name which will be appended to the most outer element of a component.
Use this prop carefully, overwriting CSS rules might break the component.`,name:"className",required:!1,type:{name:"string"}}}}}catch{}export{b as D};
