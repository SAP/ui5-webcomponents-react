{"version":3,"file":"animate-1a16ba20.js","sources":["../../node_modules/@ui5/webcomponents-base/dist/animations/AnimationQueue.js","../../node_modules/@ui5/webcomponents-base/dist/animations/animate.js"],"sourcesContent":["const tasks = new WeakMap();\nclass AnimationQueue {\n    static get tasks() {\n        return tasks;\n    }\n    static enqueue(element, task) {\n        if (!tasks.has(element)) {\n            tasks.set(element, []);\n        }\n        tasks.get(element).push(task);\n    }\n    static run(element, task) {\n        if (!tasks.has(element)) {\n            tasks.set(element, []);\n        }\n        return task().then(() => {\n            const elementTasks = tasks.get(element);\n            if (elementTasks.length > 0) {\n                return AnimationQueue.run(element, elementTasks.shift());\n            }\n            tasks.delete(element);\n        });\n    }\n    static push(element, task) {\n        const elementTasks = tasks.get(element);\n        if (elementTasks) {\n            AnimationQueue.enqueue(element, task);\n        }\n        else {\n            AnimationQueue.run(element, task);\n        }\n    }\n}\nexport default AnimationQueue;\n//# sourceMappingURL=AnimationQueue.js.map","import AnimationQueue from \"./AnimationQueue.js\";\nconst animate = (options) => {\n    let start = null;\n    let stopped = false;\n    let animationFrame;\n    let stop;\n    let advanceAnimation;\n    const promise = new Promise((resolve, reject) => {\n        advanceAnimation = timestamp => {\n            start = start || timestamp;\n            const timeElapsed = timestamp - start;\n            const remaining = options.duration - timeElapsed;\n            if (timeElapsed <= options.duration) {\n                const currentAdvance = 1 - remaining / options.duration; // easing formula (currently linear)\n                options.advance(currentAdvance);\n                if (!stopped) {\n                    animationFrame = requestAnimationFrame(advanceAnimation);\n                }\n            }\n            else {\n                options.advance(1);\n                resolve();\n            }\n        };\n        stop = () => {\n            stopped = true;\n            cancelAnimationFrame(animationFrame);\n            reject(new Error(\"animation stopped\"));\n        };\n    }).catch((reason) => reason);\n    AnimationQueue.push(options.element, () => {\n        if (typeof options.beforeStart === \"function\") {\n            options.beforeStart();\n        }\n        requestAnimationFrame(advanceAnimation);\n        return new Promise(resolve => {\n            promise.then(() => resolve());\n        });\n    });\n    return {\n        promise: () => promise,\n        stop: () => stop,\n    };\n};\nconst duration = 400;\nexport { duration };\nexport default animate;\n//# sourceMappingURL=animate.js.map"],"names":["tasks","AnimationQueue","element","task","elementTasks","animate","options","start","stopped","animationFrame","stop","advanceAnimation","promise","resolve","reject","timestamp","timeElapsed","remaining","currentAdvance","reason","duration"],"mappings":"AAAA,MAAMA,EAAQ,IAAI,QAClB,MAAMC,CAAe,CACjB,WAAW,OAAQ,CACf,OAAOD,CACV,CACD,OAAO,QAAQE,EAASC,EAAM,CACrBH,EAAM,IAAIE,CAAO,GAClBF,EAAM,IAAIE,EAAS,CAAA,CAAE,EAEzBF,EAAM,IAAIE,CAAO,EAAE,KAAKC,CAAI,CAC/B,CACD,OAAO,IAAID,EAASC,EAAM,CACtB,OAAKH,EAAM,IAAIE,CAAO,GAClBF,EAAM,IAAIE,EAAS,CAAA,CAAE,EAElBC,EAAI,EAAG,KAAK,IAAM,CACrB,MAAMC,EAAeJ,EAAM,IAAIE,CAAO,EACtC,GAAIE,EAAa,OAAS,EACtB,OAAOH,EAAe,IAAIC,EAASE,EAAa,MAAO,CAAA,EAE3DJ,EAAM,OAAOE,CAAO,CAChC,CAAS,CACJ,CACD,OAAO,KAAKA,EAASC,EAAM,CACFH,EAAM,IAAIE,CAAO,EAElCD,EAAe,QAAQC,EAASC,CAAI,EAGpCF,EAAe,IAAIC,EAASC,CAAI,CAEvC,CACL,CC/BK,MAACE,EAAWC,GAAY,CACzB,IAAIC,EAAQ,KACRC,EAAU,GACVC,EACAC,EACAC,EACJ,MAAMC,EAAU,IAAI,QAAQ,CAACC,EAASC,IAAW,CAC7CH,EAAmBI,GAAa,CAC5BR,EAAQA,GAASQ,EACjB,MAAMC,EAAcD,EAAYR,EAC1BU,EAAYX,EAAQ,SAAWU,EACrC,GAAIA,GAAeV,EAAQ,SAAU,CACjC,MAAMY,EAAiB,EAAID,EAAYX,EAAQ,SAC/CA,EAAQ,QAAQY,CAAc,EACzBV,IACDC,EAAiB,sBAAsBE,CAAgB,QAI3DL,EAAQ,QAAQ,CAAC,EACjBO,GAEhB,EACQH,EAAO,IAAM,CACTF,EAAU,GACV,qBAAqBC,CAAc,EACnCK,EAAO,IAAI,MAAM,mBAAmB,CAAC,CACjD,CACK,CAAA,EAAE,MAAOK,GAAWA,CAAM,EAC3B,OAAAlB,EAAe,KAAKK,EAAQ,QAAS,KAC7B,OAAOA,EAAQ,aAAgB,YAC/BA,EAAQ,YAAW,EAEvB,sBAAsBK,CAAgB,EAC/B,IAAI,QAAQE,GAAW,CAC1BD,EAAQ,KAAK,IAAMC,EAAO,CAAE,CACxC,CAAS,EACJ,EACM,CACH,QAAS,IAAMD,EACf,KAAM,IAAMF,CACpB,CACA,EACMU,EAAW","x_google_ignoreList":[0,1]}