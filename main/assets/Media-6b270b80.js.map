{"version":3,"file":"Media-6b270b80.js","sources":["../../packages/base/src/Device/EventProvider.ts","../../packages/base/src/Device/Media.ts"],"sourcesContent":["import EventProviderWC from '@ui5/webcomponents-base/dist/EventProvider.js';\n\nexport type RANGE_LEGACY_4_STEPS = 'Phone' | 'Tablet' | 'Desktop' | 'LargeDesktop';\n\nexport interface RangeInfo {\n  from: number;\n  to?: number;\n  name: RANGE_LEGACY_4_STEPS;\n  unit: string;\n}\n\nexport interface IOrientation {\n  landscape: boolean;\n  portrait: boolean;\n}\n\nexport interface IWindowSize {\n  height: number;\n  width: number;\n}\n\nexport const MediaEventProvider = new EventProviderWC<RangeInfo, void>();\nexport const OrientationEventProvider = new EventProviderWC<IOrientation, void>();\nexport const ResizeEventProvider = new EventProviderWC<IWindowSize, void>();\n","import UI5MediaRange from '@ui5/webcomponents-base/dist/MediaRange.js';\nimport type { RANGE_LEGACY_4_STEPS, RangeInfo } from './EventProvider.js';\nimport { MediaEventProvider } from './EventProvider.js';\n\ntype RANGE_4_STEPS = 'S' | 'M' | 'L' | 'XL';\n\nconst DEFAULT_RANGE_SET = UI5MediaRange.RANGESETS.RANGE_4STEPS;\n\nconst RANGE_DEFINITIONS: Record<RANGE_4_STEPS, [number, number]> = {\n  S: [0, 599],\n  M: [600, 1023],\n  L: [1024, 1439],\n  XL: [1440, -1]\n};\n\nconst newRangeToLegacyRangeMap: Record<RANGE_4_STEPS, RANGE_LEGACY_4_STEPS> = {\n  S: 'Phone',\n  M: 'Tablet',\n  L: 'Desktop',\n  XL: 'LargeDesktop'\n};\n\nfunction getQuery(from: number, to: number) {\n  let q = 'all';\n  if (from > 0) {\n    q = `${q} and (min-width:${from}px)`;\n  }\n  if (to > 0) {\n    q = `${q} and (max-width:${to}px)`;\n  }\n  return q;\n}\n\nfunction resolveRangeInfo(name: RANGE_4_STEPS): RangeInfo {\n  const params: RangeInfo = {\n    from: RANGE_DEFINITIONS[name][0],\n    name: newRangeToLegacyRangeMap[name],\n    unit: 'px'\n  };\n  if (RANGE_DEFINITIONS[name][1] > 0) {\n    params.to = RANGE_DEFINITIONS[name][1];\n  }\n  return params;\n}\n\nlet mediaQueries: Record<RANGE_4_STEPS, MediaQueryList> | null = null;\n\nfunction initMediaQueries() {\n  if (typeof document !== 'undefined') {\n    mediaQueries = {\n      S: window.matchMedia(getQuery(...RANGE_DEFINITIONS.S)),\n      M: window.matchMedia(getQuery(...RANGE_DEFINITIONS.M)),\n      L: window.matchMedia(getQuery(...RANGE_DEFINITIONS.L)),\n      XL: window.matchMedia(getQuery(...RANGE_DEFINITIONS.XL))\n    };\n\n    for (const mediaQueriesKey in mediaQueries) {\n      const handler = (event) => {\n        if (event.matches) {\n          const params = resolveRangeInfo(mediaQueriesKey as RANGE_4_STEPS);\n          MediaEventProvider.fireEvent(`media`, params);\n        }\n      };\n      mediaQueries[mediaQueriesKey].addEventListener('change', handler);\n    }\n  }\n}\n\n// public API\n\nexport const getCurrentRange = (width?: number): RangeInfo => {\n  if (typeof window === 'undefined') {\n    return {\n      from: 1024,\n      to: 1439,\n      name: 'Desktop',\n      unit: 'px'\n    };\n  }\n  // @ts-expect-error: width can only be undefined or a number, therefore `isNaN` works here\n  return resolveRangeInfo(UI5MediaRange.getCurrentRange(DEFAULT_RANGE_SET, isNaN(width) ? undefined : width));\n};\n\nexport const attachMediaHandler = (func: (rangeInfo: RangeInfo) => void): void => {\n  if (mediaQueries === null) {\n    initMediaQueries();\n  }\n  MediaEventProvider.attachEvent(`media`, func);\n};\n\nexport const detachMediaHandler = (func: (rangeInfo: RangeInfo) => void): void => {\n  MediaEventProvider.detachEvent(`media`, func);\n};\n"],"names":["MediaEventProvider","EventProviderWC","DEFAULT_RANGE_SET","UI5MediaRange","RANGE_DEFINITIONS","newRangeToLegacyRangeMap","getQuery","from","to","q","resolveRangeInfo","name","params","mediaQueries","initMediaQueries","mediaQueriesKey","handler","event","getCurrentRange","width","attachMediaHandler","func","detachMediaHandler"],"mappings":"wGAqBa,MAAAA,EAAqB,IAAIC,ECfhCC,EAAoBC,EAAc,UAAU,aAE5CC,EAA6D,CACjE,EAAG,CAAC,EAAG,GAAG,EACV,EAAG,CAAC,IAAK,IAAI,EACb,EAAG,CAAC,KAAM,IAAI,EACd,GAAI,CAAC,KAAM,EAAE,CACf,EAEMC,EAAwE,CAC5E,EAAG,QACH,EAAG,SACH,EAAG,UACH,GAAI,cACN,EAEA,SAASC,EAASC,EAAcC,EAAY,CAC1C,IAAIC,EAAI,MACR,OAAIF,EAAO,IACTE,EAAI,GAAGA,oBAAoBF,QAEzBC,EAAK,IACPC,EAAI,GAAGA,oBAAoBD,QAEtBC,CACT,CAEA,SAASC,EAAiBC,EAAgC,CACxD,MAAMC,EAAoB,CACxB,KAAMR,EAAkBO,CAAI,EAAE,CAAC,EAC/B,KAAMN,EAAyBM,CAAI,EACnC,KAAM,IAAA,EAER,OAAIP,EAAkBO,CAAI,EAAE,CAAC,EAAI,IAC/BC,EAAO,GAAKR,EAAkBO,CAAI,EAAE,CAAC,GAEhCC,CACT,CAEA,IAAIC,EAA6D,KAEjE,SAASC,GAAmB,CACtB,GAAA,OAAO,SAAa,IAAa,CACpBD,EAAA,CACb,EAAG,OAAO,WAAWP,EAAS,GAAGF,EAAkB,CAAC,CAAC,EACrD,EAAG,OAAO,WAAWE,EAAS,GAAGF,EAAkB,CAAC,CAAC,EACrD,EAAG,OAAO,WAAWE,EAAS,GAAGF,EAAkB,CAAC,CAAC,EACrD,GAAI,OAAO,WAAWE,EAAS,GAAGF,EAAkB,EAAE,CAAC,CAAA,EAGzD,UAAWW,KAAmBF,EAAc,CACpC,MAAAG,EAAWC,GAAU,CACzB,GAAIA,EAAM,QAAS,CACX,MAAAL,EAASF,EAAiBK,CAAgC,EAC7Cf,EAAA,UAAU,QAASY,CAAM,EAC9C,EAEFC,EAAaE,CAAe,EAAE,iBAAiB,SAAUC,CAAO,GAGtE,CAIa,MAAAE,EAAmBC,GAC1B,OAAO,OAAW,IACb,CACL,KAAM,KACN,GAAI,KACJ,KAAM,UACN,KAAM,IAAA,EAIHT,EAAiBP,EAAc,gBAAgBD,EAAmB,MAAMiB,CAAK,EAAI,OAAYA,CAAK,CAAC,EAG/FC,EAAsBC,GAA+C,CAC5ER,IAAiB,MACFC,IAEAd,EAAA,YAAY,QAASqB,CAAI,CAC9C,EAEaC,EAAsBD,GAA+C,CAC7DrB,EAAA,YAAY,QAASqB,CAAI,CAC9C"}